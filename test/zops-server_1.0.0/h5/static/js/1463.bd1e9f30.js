/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[1463],{54009:function(e,l,a){a.r(l),a.d(l,{default:function(){return S}});var t=a(49530),n=(a(24549),a(80773),a(21211)),o=(a(12791),a(38492)),d=(a(94687),a(79303),a(24434)),m=(a(98476),a(35568),a(46538)),u=(a(20822),a(6715),a(57847)),r=(a(43872),a(66252)),i=a(2262),s=a(39049),c=a(79803);const f=e=>((0,r.dD)("data-v-1b68c228"),e=e(),(0,r.Cn)(),e),g={key:0,class:"ignore-time"},p=f((()=>(0,r._)("div",{class:"tips"},"* 注意:开启后,将不再收到邮件、短信等方式通知",-1)));var k={__name:"HandlAlarms",props:{alarmInfoData:{type:Object,default:()=>({})},title:{type:String,default:"处理告警"},visible:{type:Boolean,default:!1}},emits:["cancel","submit"],setup(e,{emit:l}){const f=e,k=(0,r.RC)((()=>Promise.all([a.e(1108),a.e(6860),a.e(5652)]).then(a.bind(a,12541)))),w=(0,r.f3)("$baseMessage"),y=(0,r.f3)("$baseConfirm"),v=(0,i.iH)(null),{title:S,visible:U,alarmInfoData:b}=(0,i.BK)(f);let _={};const V=[{name:"6小时",key:"6"},{name:"12小时",key:"12"},{name:"24小时",key:"24"}];function W(){JSON.stringify(_)===JSON.stringify(b.value)?l("cancel"):y("已经修改内容，你确定要关闭吗",null,"delete",(()=>{l("cancel")}))}function h(){v.value.validate((e=>{if(e){if(JSON.stringify(_)===JSON.stringify(b.value))return!1;const e={eventids:b.value.eventid};_.message!==b.value.message&&(e.message=b.value.message),b.value.ignoreAlarm&&b.value.alert_delay!=_.alert_delay&&(e.alert_delay=b.value.alert_delay),e.action=JSON.stringify(_.acknowledge)!==JSON.stringify(b.value.acknowledge)?2:JSON.stringify(_.ignoreAlarm)!==JSON.stringify(b.value.ignoreAlarm)?20:_.message===b.value.message?"":4,(0,c.Fh)(e).then((e=>{e?.error||(w("编辑成功","success"),l("submit"),l("cancel"))}))}}))}return(0,r.bv)((()=>{_=JSON.parse(JSON.stringify(b.value))})),(e,l)=>{const a=u.EZ,c=n.nH,f=m.ElCheckbox,w=d.rh,y=d.KD,_=o.BT,O=o.ElSelect,J=n.ly,N=t.ElButton;return(0,r.wg)(),(0,r.j4)((0,i.SU)(s["default"]),{modelValue:(0,i.SU)(U),"onUpdate:modelValue":[l[5]||(l[5]=e=>(0,i.dq)(U)?U.value=e:null),W],title:(0,i.SU)(S),width:"35rem"},{footer:(0,r.w5)((()=>[(0,r.Wm)(N,{onClick:W},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1}),(0,r.Wm)(N,{type:"primary",onClick:h},{default:(0,r.w5)((()=>[(0,r.Uk)("确定")])),_:1})])),default:(0,r.w5)((()=>[(0,r.Wm)(J,{ref_key:"alarmFormRef",ref:v,"label-position":"top",model:(0,i.SU)(b)},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{label:"问题名称",props:"name"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:(0,i.SU)(b).name,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,i.SU)(b).name=e),modelModifiers:{trim:!0},placeholder:"问题名称",disabled:"",maxlength:"100"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(c,{label:"备注",prop:"message"},{default:(0,r.w5)((()=>[(0,r.Wm)(a,{modelValue:(0,i.SU)(b).message,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,i.SU)(b).message=e),modelModifiers:{trim:!0},rows:3,maxlength:"255",type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(c,{label:"确认告警",prop:"acknowledge"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{modelValue:(0,i.SU)(b).acknowledge,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,i.SU)(b).acknowledge=e),label:"是",indeterminate:!1},null,8,["modelValue"])])),_:1}),(0,r.Wm)(c,{label:"是否暂时忽略告警",prop:"ignoreAlarm"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,{modelValue:(0,i.SU)(b).ignoreAlarm,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,i.SU)(b).ignoreAlarm=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{label:!1},{default:(0,r.w5)((()=>[(0,r.Uk)("否")])),_:1}),(0,r.Wm)(w,{label:!0},{default:(0,r.w5)((()=>[(0,r.Uk)("是")])),_:1})])),_:1},8,["modelValue"]),(0,i.SU)(b).ignoreAlarm?((0,r.wg)(),(0,r.iD)("div",g,[(0,r.Wm)(O,{modelValue:(0,i.SU)(b).delay,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,i.SU)(b).delay=e),placeholder:"请选择忽略时间",clearable:""},{default:(0,r.w5)((()=>[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(V,(e=>(0,r.Wm)(_,{key:e.key,label:e.name,value:e.key},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])):(0,r.kq)("",!0),p])),_:1}),(0,i.SU)(b)?.acknowledges?.length?((0,r.wg)(),(0,r.j4)(c,{key:0,label:"操作日志",prop:"acknowledges"},{default:(0,r.w5)((()=>[(0,r.Wm)((0,i.SU)(k),{acknowledges:(0,i.SU)(b).acknowledges},null,8,["acknowledges"])])),_:1})):(0,r.kq)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};function w(e){e.__source="src/components/HandlAlarms.vue"}var y=a(83744);"function"===typeof w&&w(k);const v=(0,y.Z)(k,[["__scopeId","data-v-1b68c228"]]);var S=v}}]);