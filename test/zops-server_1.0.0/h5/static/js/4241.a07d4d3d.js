/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[4241],{18907:function(e,t,n){n.d(t,{KW:function(){return i},Kj:function(){return m},Ld:function(){return l},Ob:function(){return p},Ox:function(){return u},Wh:function(){return c},XF:function(){return a},bm:function(){return s},uX:function(){return r},v0:function(){return d},y2:function(){return f}});var o=n(52806);function a(e){return(0,o.Z)({params:{method:"host.get",data:e}})}function r(e){return(0,o.Z)({params:{method:"host.exportinventory",data:e}})}function i(e){return(0,o.Z)({params:{method:"host.update",data:e}})}function l(e){return(0,o.Z)({params:{method:"host.create",data:e}})}function s(e){return(0,o.Z)({params:{method:"host.discoverupdate",data:e}})}function u(e){return(0,o.Z)({params:{method:"host.delete",data:e}})}function d(e){return(0,o.Z)({params:{method:"hostgroup.get",data:e}})}function c(e){return(0,o.Z)({params:{method:"modeltype.create",data:e}})}function p(e){return(0,o.Z)({params:{method:"modeltype.get",data:e}})}function f(e){return(0,o.Z)({params:{method:"modeltype.update",data:e}})}function m(e){return(0,o.Z)({params:{method:"modeltype.delete",data:e}})}},22076:function(e,t,n){function o(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function a(e,t,n){let a=0;return a="remToPx"===n?o(t):t,e?.value?.offsetHeight?e.value.offsetHeight-a:e?.offsetHeight?e.offsetHeight-a:void 0}function r(e,t){const n=new Map;for(const o of e)n.has(o[t])||n.set(o[t],o);return[...n.values()]}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function l(e){let t=parseInt(e),n=0,o=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(o=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:o}}n.d(t,{BE:function(){return i},NC:function(){return a},Nb:function(){return r},ZC:function(){return l}})},35068:function(e,t,n){n.d(t,{Z:function(){return u}});var o=n(74842),a=(n(24549),n(94851),n(66252));const r={class:"right-panel"};var i=(0,a.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,n)=>{const i=o.Dv;return(0,a.wg)(),(0,a.j4)(i,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function l(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof l&&l(i);const s=i;var u=s},48499:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(74842),a=(n(24549),n(94851),n(66252));const r={class:"top-panel"};function i(e,t){const n=o.Dv;return(0,a.wg)(),(0,a.j4)(n,{span:24},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a.WI)(e.$slots,"default")])])),_:3})}function l(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var s=n(83744);const u={};"function"===typeof l&&l(u);const d=(0,s.Z)(u,[["render",i]]);var c=d},58818:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(28314),a=(n(24549),n(7436),n(66252));function r(e,t){const n=o.dq;return(0,a.wg)(),(0,a.j4)(n,{class:"vab-query-form",gutter:0},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function i(e){e.__source="library/components/VabQueryForm/index.vue"}var l=n(83744);const s={};"function"===typeof i&&i(s);const u=(0,l.Z)(s,[["render",r],["__scopeId","data-v-4d22213e"]]);var d=u},5743:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n(64654),a=(n(24549),n(16135),n(91067)),r=(n(78526),n(47546)),i=(n(49653),n(37965)),l=(n(82880),n(60717),n(66252)),s=n(3577),u=n(2262),d={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:n}){const d=(0,u.iH)(null),c=e=>{n("sizeChange",e)},p=e=>{n("currentChange",e)},f=e=>{n("selectRows",e)},m=e=>{n("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),d.value.toggleRowSelection(e))}return(0,l.dl)((()=>{d?.value?.doLayout()})),(0,l.bv)((()=>{d.value.doLayout()})),t({tableRef:d,toggleRowSelection:g}),(t,n)=>{const u=r.$Y,g=i.GT,h=r.eI,v=a.R,y=o.t;return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(h,{ref_key:"tableRef",ref:d,class:(0,s.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:f,onSortChange:m},{empty:(0,l.w5)((()=>[(0,l.Wm)(g,{description:"暂无数据"})])),default:(0,l.w5)((()=>[e.isSelection?((0,l.wg)(),(0,l.j4)(u,{key:0,fixed:"left",type:"selection",width:"55"})):(0,l.kq)("",!0),e.isIndex?((0,l.wg)(),(0,l.j4)(u,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnList,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,l.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,l.w5)((()=>[(0,l.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,l.w5)((({row:n,$index:o,column:a})=>[(0,l.WI)(t.$slots,e.prop,{row:n,index:o,column:a})])),key:"1"}:{name:"default",fn:(0,l.w5)((({row:t})=>[(0,l._)("span",{class:"name"},(0,s.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[y,e.listLoading]]),e.isPagination?((0,l.wg)(),(0,l.j4)(v,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:p,onSizeChange:c},null,8,["current-page","layout","page-size","total"])):(0,l.kq)("",!0)],64)}}};function c(e){e.__source="src/components/CustomTable.vue"}var p=n(83744);"function"===typeof c&&c(d);const f=(0,p.Z)(d,[["__scopeId","data-v-bdd84b16"]]);var m=f},74241:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var o=n(58818),a=n(35068),r=n(49530),i=(n(24549),n(80773),n(48499)),l=n(21211),s=(n(12791),n(57847)),u=(n(43872),n(6715),n(38492)),d=(n(94687),n(79303),n(57658),n(66252)),c=n(2262),p=n(49963),f=n(3577),m=n(5743),g=n(22076),h=n(18907),v=n(22201),y={__name:"DevicesList",setup(e,{expose:t}){const y=(0,d.RC)((()=>Promise.all([n.e(922),n.e(1108),n.e(6860),n.e(211)]).then(n.bind(n,9686)))),w=(0,d.f3)("$baseConfirm"),b=(0,d.f3)("$baseMessage"),x=(0,d.f3)("$baseTableHeight"),_=(0,c.iH)(null),k=(0,c.iH)(null),S=(0,c.iH)([{groupid:"-1",name:"全部设备类型"}]),C=(0,v.tv)(),U=[{label:"设备名称",prop:"name",tooltip:!0},{label:"设备类型",prop:"groups",tooltip:!0,isRender:!0},{label:"厂商",prop:"manufacturer",tooltip:!0,isRender:!0},{label:"型号",prop:"inventory",tooltip:!0,isRender:!0},{label:"所属机房",prop:"idc",tooltip:!0,isRender:!0},{label:"更新时间",prop:"update_time",tooltip:!0},{align:"right",fixed:"right",label:"操作",width:"200",prop:"operation",isRender:!0}],R=(0,c.iH)({selectIDC:["name"],selectHouse:["name"],selectManufacturer:["name"],selectInventory:["type"],selectGroups:["name"],current:1,limit:10,search:{name:""},groupids:null}),I=(0,c.qj)({height:x(3)-30,deviceData:[],listLoading:!1,groupids:"-1",total:0,selectRows:"",moveInfoData:{title:"移动资产",type:"move",visible:!1,data:{inventory_typeid:"",hostid:""}}}),D=async()=>{I.listLoading=!0,I.deviceData=[],R.value.groupids="-1"===I.groupids?null:I.groupids,(0,h.XF)(R.value).then((e=>{!e.error&&e.length&&(I.deviceData=e,I.total=Number(e[0]?.total)),I.listLoading=!1})).catch((e=>{console.log(e),I.listLoading=!1}))},W=e=>{R.value.pageSize=e,D()},Z=e=>{R.value.pageNo=e,D()},z=()=>{R.value.groupids||(R.value.groupids=null),R.value.pageNo=1,D()},H=e=>{I.selectRows=e},N=()=>{I.height=(0,g.NC)(_,1/3+3.5,"remToPx")},L=e=>{const t=[];if(e.hostid?t.push(e.hostid):I.selectRows.forEach((e=>{t.push(e.hostid)})),!t.length)return!1;w("你确定要删除吗",null,"delete",(async()=>{(0,h.Ox)(t).then((e=>{e.error||(b("删除成功","success"),D())})).catch((e=>{console.log("err :>> ",e)}))}))};function j(e){e.inventory_typeid?R.value.inventory_typeids=e.inventory_typeid:R.value.inventory_typeids=null,D()}function V(){(0,h.v0)({}).then((e=>{S.value.push(...e)})).catch((e=>{console.log("error :>> ",e)}))}function q(){if(!R.value.hostids)return b("请选择资产类型进行导出","warning"),!1;(0,h.uX)({inventory_typeids:R.value.hostids[0]}).then((e=>{window.open(e,"_blank")})).catch((e=>{console.log("error :>> ",e)}))}function F(){const e=[],t=[];let n="";I.selectRows.forEach((n=>{e.push(n.hostid),t.push(n.name)})),1===I.selectRows.length&&(n=I.selectRows[0]?.inventory_typeid),I.moveInfoData={title:"移动资产",type:"move",visible:!0,data:{inventory_typeid:n,hostids:e,hostNames:t}}}function $(){I.moveInfoData.visible=!1}function B(e){console.log("data :>> ",e),C.push({name:"AssetsDetail",query:{hostid:e.hostid}})}return(0,d.wF)((()=>{window.addEventListener("resize",N)})),(0,d.Ah)((()=>{window.removeEventListener("resize",N)})),(0,d.bv)((()=>{N(),V()})),t({queryByDevices:j}),(e,t)=>{const n=u.BT,g=u.ElSelect,h=l.nH,v=s.EZ,w=l.ly,b=i.Z,x=r.ElButton,C=a.Z,N=o.Z;return(0,d.wg)(),(0,d.iD)("div",{ref_key:"userContainer",ref:_,class:"user-info-container"},[(0,d.Wm)(N,null,{default:(0,d.w5)((()=>[(0,d.Wm)(b,{span:12},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{class:"query-info-form",inline:"","label-width":"0px",model:(0,c.SU)(R),onSubmit:t[2]||(t[2]=(0,p.iM)((()=>{}),["prevent"]))},{default:(0,d.w5)((()=>[(0,d.Wm)(h,{label:"",class:"form-status"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{modelValue:(0,c.SU)(I).groupids,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,c.SU)(I).groupids=e),placeholder:"全部设备类型",clearable:"",filterable:"",onChange:z},{default:(0,d.w5)((()=>[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,c.SU)(S),(e=>((0,d.wg)(),(0,d.j4)(n,{key:e.groupid,label:e.name,value:e.groupid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,d.Wm)(h,{label:"",class:"form-name"},{default:(0,d.w5)((()=>[(0,d.Wm)(v,{modelValue:(0,c.SU)(R).search.name,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,c.SU)(R).search.name=e),placeholder:"请输入关键字搜索",clearable:"",onChange:z},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,d.Wm)(C,{span:12},{default:(0,d.w5)((()=>[(0,d.Wm)(x,{onClick:q},{default:(0,d.w5)((()=>[(0,d.Uk)("导出")])),_:1}),(0,d.Wm)(x,{disabled:!(0,c.SU)(I).selectRows.length,onClick:F},{default:(0,d.w5)((()=>[(0,d.Uk)(" 移动 ")])),_:1},8,["disabled"]),(0,d.Wm)(x,{disabled:!(0,c.SU)(I).selectRows.length,onClick:L},{default:(0,d.w5)((()=>[(0,d.Uk)(" 删除 ")])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,d.Wm)(m["default"],{ref_key:"userTableRef",ref:k,"max-height":(0,c.SU)(I).height,"class-name":"user-info-table","list-loading":(0,c.SU)(I).listLoading,"list-data":(0,c.SU)(I).deviceData,"column-list":U,total:(0,c.SU)(I).total,"page-no":(0,c.SU)(R).current,"page-size":(0,c.SU)(R).limit,"is-index":!0,onSizeChange:W,onCurrentChange:Z,onSelectRows:H},{groups:(0,d.w5)((({row:e})=>[(0,d.Uk)((0,f.zw)(e.groups[0]?.name||"---"),1)])),manufacturer:(0,d.w5)((({row:e})=>[(0,d.Uk)((0,f.zw)(e.manufacturer?.name||"---"),1)])),inventory:(0,d.w5)((({row:e})=>[(0,d.Uk)((0,f.zw)(e.inventory?.type||"---"),1)])),idc:(0,d.w5)((({row:e})=>[(0,d.Uk)((0,f.zw)(e.idc?.name||"---"),1)])),operation:(0,d.w5)((({row:e})=>[(0,d.Wm)(x,{text:"",type:"primary",onClick:t=>B(e)},{default:(0,d.w5)((()=>[(0,d.Uk)(" 详情 ")])),_:2},1032,["onClick"]),(0,d.Wm)(x,{text:"",type:"primary",onClick:t=>L(e)},{default:(0,d.w5)((()=>[(0,d.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1},8,["max-height","list-loading","list-data","total","page-no","page-size"]),(0,c.SU)(I).moveInfoData.visible?((0,d.wg)(),(0,d.j4)((0,c.SU)(y),{key:0,"move-info-data":(0,c.SU)(I).moveInfoData.data,title:(0,c.SU)(I).moveInfoData.title,visible:(0,c.SU)(I).moveInfoData.visible,onCancel:$,onConfirm:D},null,8,["move-info-data","title","visible"])):(0,d.kq)("",!0)],512)}}};function w(e){e.__source="src/views/assets-management/DevicesList.vue"}var b=n(83744);"function"===typeof w&&w(y);const x=(0,b.Z)(y,[["__scopeId","data-v-619d22bb"]]);var _=x}}]);