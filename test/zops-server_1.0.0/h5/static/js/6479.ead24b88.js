/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[6479],{94577:function(e,n,a){a.d(n,{Nl:function(){return l},Oc:function(){return s},Rt:function(){return o},_T:function(){return i}});var t=a(52806);function i(e){return(0,t.Z)({params:{method:"inventorytype.get",data:e}})}function l(e){return(0,t.Z)({params:{method:"inventorytype.create",data:e}})}function o(e){return(0,t.Z)({params:{method:"inventorytype.update",data:e}})}function s(e){return(0,t.Z)({params:{method:"inventorytype.delete",data:e}})}},43080:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var t=a(64654),i=(a(24549),a(16135),a(59109)),l=(a(65195),a(31574)),o=(a(72698),a(72673),a(56864),a(50952)),s=(a(83646),a(49530)),c=(a(80773),a(57847)),r=(a(43872),a(66252)),d=a(2262),u=a(3577),p=a(49963),m=a(65781),f=a(94577);const y={class:"asset-content"},k={class:"search-content"},v={class:"asset-tree-content"},_={class:"custom-tree-node"},h={key:1},b={class:"el-dropdown-link"};var C={__name:"AssetType",emits:["assetNodeClick"],setup(e,{emit:n}){const C=(0,r.RC)((()=>Promise.all([a.e(922),a.e(1108),a.e(6860),a.e(4375)]).then(a.bind(a,34713)))),w=(0,r.f3)("$baseConfirm"),g=(0,r.f3)("$baseMessage"),D=(0,d.iH)([]),N=(0,d.iH)(null),T={isLeaf:e=>!e.hasson,label:"name",id:"inventory_typeid"},W=(0,d.iH)({search:{name:""},fid:"0"}),I=(0,d.qj)({loading:!0,assetName:"",backupData:{},backupName:{},currentKey:"",allNum:0,assetTypeInfoData:{visible:!1,title:"新建资产类型",type:"new",data:{name:"",description:"",fid:""}}}),R=e=>{Z()},U=e=>{I.assetTypeInfoData={visible:!0,title:"新建资产类型",type:"new",data:{name:"",description:"",fid:e.inventory_typeid||I.currentKey}}},K=(e,n)=>{if(!e?.data?.inventory_typeid)return!1;W.value.fid=e.data.inventory_typeid||"0",(0,f._T)(W.value).then((e=>{!e.error&&e.length&&n(e)})).catch((e=>{console.log("err :>> ",e)}))},V=(e,n)=>!e||n.name.includes(e),Z=()=>{I.loading=!0,W.value.fid="0",(0,f._T)(W.value).then((e=>{I.loading=!1,!e.error&&e.length&&(D.value=e,I.currentKey="",I.allNum=e[0]?.all,n("assetNodeClick",e))})).catch((e=>{I.loading=!1,console.log("err :>> ",e)}))};function M(){I.assetTypeInfoData.visible=!1}function j(e){I.currentKey=e.inventory_typeid,n("assetNodeClick",e)}function z(e){e.isRename=!0,I.backupName=e.name,I.backupData=e}function H(e){(0,f.Rt)({name:e.name,inventory_typeid:e.inventory_typeid}).then((e=>{e.error?(I.backupData.isRename=!1,e.name=I.backupName):I.backupData.isRename=!1})).catch((()=>{e.isRename=!1,e.name=I.backupName}))}function S(e){I.backupData.isRename=!1,e.name=I.backupName}function $(e){I.assetTypeInfoData={visible:!0,title:"编辑资产类型",type:"edit",data:{name:e.name,description:e.description,fid:e.fid,inventory_typeid:e.inventory_typeid}}}function q(e){if(!e.inventory_typeid)return!1;w(`删除资产类型后不可恢复，确定要删除“${e.name}”吗？`,"删除资产类型","delete",(async()=>{(0,f.Oc)([e.inventory_typeid]).then((e=>{e.error||(g("删除成功","success"),Z())})).catch((e=>{console.log("err :>> ",e)}))}))}return(0,r.bv)((()=>{Z()})),(e,n)=>{const a=c.EZ,f=(0,r.up)("vab-icon"),w=s.ElButton,g=o.Q0,x=l.Df,A=l.o2,E=l.YK,O=i.y,B=t.t;return(0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",k,[(0,r.Wm)(a,{modelValue:W.value.search.name,"onUpdate:modelValue":n[0]||(n[0]=e=>W.value.search.name=e),placeholder:"请输入关键字搜索",clearable:"","prefix-icon":(0,d.SU)(m.Search),onChange:R},null,8,["modelValue","prefix-icon"]),(0,r.Wm)(g,{content:"新增资产类型",placement:"top",effect:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(w,{class:"add-btn",onClick:U},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{icon:"add-line"})])),_:1})])),_:1})]),(0,r._)("div",v,[(0,r._)("div",{class:(0,u.C_)(["asset-all",{"is-current":!I.currentKey}]),onClick:j}," 全部资产（"+(0,u.zw)(I.allNum)+"） ",3),(0,r.wy)(((0,r.wg)(),(0,r.j4)(O,{ref_key:"assetRef",ref:N,class:"asset-tree","current-node-key":I.currentKey,"node-key":"inventory_typeid","highlight-current":"",lazy:"",data:D.value,load:K,props:T,"filter-node-method":V,onNodeClick:j},{default:(0,r.w5)((({node:e,data:t})=>[(0,r._)("span",_,[t.isRename?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"rename-label",onClick:n[1]||(n[1]=(0,p.iM)((()=>{}),["stop"]))},[(0,r.Wm)(a,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,placeholder:"请输入资产类型名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),(0,r.Wm)(f,{class:"rename-icon icon-check",icon:"check-fill",onClick:(0,p.iM)((e=>H(t)),["stop"])},null,8,["onClick"]),(0,r.Wm)(f,{class:"rename-icon icon-close",icon:"close-fill",onClick:(0,p.iM)((e=>S(t)),["stop"])},null,8,["onClick"])])):((0,r.wg)(),(0,r.iD)("span",h,(0,u.zw)(e.label),1)),(0,r.Wm)(E,null,{dropdown:(0,r.w5)((()=>[(0,r.Wm)(A,null,{default:(0,r.w5)((()=>[(0,r.Wm)(x,{onClick:e=>U(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 新增子级类型 ")])),_:2},1032,["onClick"]),(0,r.Wm)(x,{onClick:e=>z(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 重命名 ")])),_:2},1032,["onClick"]),(0,r.Wm)(x,{onClick:e=>$(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,r.Wm)(x,{onClick:e=>q(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,r.w5)((()=>[(0,r._)("span",b,[(0,r.Wm)(f,{icon:"more-2-fill"})])])),_:2},1024)])])),_:1},8,["current-node-key","data"])),[[B,I.loading]])]),I.assetTypeInfoData.visible?((0,r.wg)(),(0,r.j4)((0,d.SU)(C),{key:0,"asset-type-info-data":I.assetTypeInfoData.data,title:I.assetTypeInfoData.title,type:I.assetTypeInfoData.type,visible:I.assetTypeInfoData.visible,onCancel:M,onConfirm:Z},null,8,["asset-type-info-data","title","type","visible"])):(0,r.kq)("",!0)])}}};function w(e){e.__source="src/views/assets-management/AssetType.vue"}var g=a(83744);"function"===typeof w&&w(C);const D=(0,g.Z)(C,[["__scopeId","data-v-62fb141f"]]);var N=D}}]);