/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[6892,7181,8743,9527,657],{18907:function(e,t,n){n.d(t,{KW:function(){return r},Kj:function(){return m},Ld:function(){return i},Ob:function(){return p},Ox:function(){return s},Wh:function(){return c},XF:function(){return a},bm:function(){return u},uX:function(){return l},v0:function(){return d},y2:function(){return f}});var o=n(52806);function a(e){return(0,o.Z)({params:{method:"host.get",data:e}})}function l(e){return(0,o.Z)({params:{method:"host.exportinventory",data:e}})}function r(e){return(0,o.Z)({params:{method:"host.update",data:e}})}function i(e){return(0,o.Z)({params:{method:"host.create",data:e}})}function u(e){return(0,o.Z)({params:{method:"host.discoverupdate",data:e}})}function s(e){return(0,o.Z)({params:{method:"host.delete",data:e}})}function d(e){return(0,o.Z)({params:{method:"hostgroup.get",data:e}})}function c(e){return(0,o.Z)({params:{method:"modeltype.create",data:e}})}function p(e){return(0,o.Z)({params:{method:"modeltype.get",data:e}})}function f(e){return(0,o.Z)({params:{method:"modeltype.update",data:e}})}function m(e){return(0,o.Z)({params:{method:"modeltype.delete",data:e}})}},22076:function(e,t,n){function o(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function a(e,t,n){let a=0;return a="remToPx"===n?o(t):t,e?.value?.offsetHeight?e.value.offsetHeight-a:e?.offsetHeight?e.offsetHeight-a:void 0}function l(e,t){const n=new Map;for(const o of e)n.has(o[t])||n.set(o[t],o);return[...n.values()]}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function i(e){let t=parseInt(e),n=0,o=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(o=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:o}}n.d(t,{BE:function(){return r},NC:function(){return a},Nb:function(){return l},ZC:function(){return i}})},35068:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(74842),a=(n(24549),n(94851),n(66252));const l={class:"right-panel"};var r=(0,a.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,n)=>{const r=o.Dv;return(0,a.wg)(),(0,a.j4)(r,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof i&&i(r);const u=r;var s=u},48499:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(74842),a=(n(24549),n(94851),n(66252));const l={class:"top-panel"};function r(e,t){const n=o.Dv;return(0,a.wg)(),(0,a.j4)(n,{span:24},{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a.WI)(e.$slots,"default")])])),_:3})}function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var u=n(83744);const s={};"function"===typeof i&&i(s);const d=(0,u.Z)(s,[["render",r]]);var c=d},58818:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(28314),a=(n(24549),n(7436),n(66252));function l(e,t){const n=o.dq;return(0,a.wg)(),(0,a.j4)(n,{class:"vab-query-form",gutter:0},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function r(e){e.__source="library/components/VabQueryForm/index.vue"}var i=n(83744);const u={};"function"===typeof r&&r(u);const s=(0,i.Z)(u,[["render",l],["__scopeId","data-v-4d22213e"]]);var d=s},93981:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n(49530),a=(n(24549),n(80773),n(21211)),l=(n(12791),n(6715),n(38492)),r=(n(94687),n(79303),n(57658),n(66252)),i=n(2262),u=n(39049),s=n(18907),d={__name:"AllocationTemplate",props:{allocationData:{type:Object,default:()=>({})},title:{type:String,default:"分配监控模板"},visible:{type:Boolean,default:!1}},emits:["cancel","confirm"],setup(e,{emit:t}){const n=e,d={name:[{required:!0,message:"请选择监控模板",trigger:"change"}]},c=((0,r.f3)("$baseMessage"),(0,i.iH)(null)),{title:p,visible:f,allocationData:m}=(0,i.BK)(n),g=(0,i.qj)({hostGroupList:[]});function h(){(0,s.v0)({output:["name","groupid"]}).then((e=>{if(!e.error)for(const t in e)if(Object.hasOwnProperty.call(e,t)){const n=e[t];g.hostGroupList.push(n)}g.loading=!1})).catch((e=>{console.log("err :>> ",e),g.loading=!1}))}function w(){t("cancel")}function y(){c.value.validate((e=>{e&&(t("cancel"),t("confirm"))}))}return(0,r.bv)((()=>{h()})),(e,t)=>{const n=l.BT,s=l.ElSelect,h=a.nH,b=a.ly,v=o.ElButton;return(0,r.wg)(),(0,r.j4)((0,i.SU)(u["default"]),{modelValue:(0,i.SU)(f),"onUpdate:modelValue":[t[1]||(t[1]=e=>(0,i.dq)(f)?f.value=e:null),w],title:(0,i.SU)(p),width:"30rem"},{footer:(0,r.w5)((()=>[(0,r.Wm)(v,{onClick:w},{default:(0,r.w5)((()=>[(0,r.Uk)("取消")])),_:1}),(0,r.Wm)(v,{type:"primary",onClick:y},{default:(0,r.w5)((()=>[(0,r.Uk)("确定")])),_:1})])),default:(0,r.w5)((()=>[(0,r.Wm)(b,{ref_key:"allocationFormRef",ref:c,"label-position":"top",model:(0,i.SU)(m),rules:d},{default:(0,r.w5)((()=>[(0,r.Wm)(h,{label:"选择监控模板",prop:"monitoringid"},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{modelValue:(0,i.SU)(m).monitoringid,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,i.SU)(m).monitoringid=e),placeholder:"请选择监控模板",class:"input-select"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)((0,i.SU)(g).hostGroupList,(e=>((0,r.wg)(),(0,r.j4)(n,{key:e.groupid,label:e.name,value:e.groupid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};function c(e){e.__source="src/components/AllocationTemplate.vue"}var p=n(83744);"function"===typeof c&&c(d);const f=(0,p.Z)(d,[["__scopeId","data-v-1b9009e8"]]);var m=f},5743:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var o=n(64654),a=(n(24549),n(16135),n(91067)),l=(n(78526),n(47546)),r=(n(49653),n(37965)),i=(n(82880),n(60717),n(66252)),u=n(3577),s=n(2262),d={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:n}){const d=(0,s.iH)(null),c=e=>{n("sizeChange",e)},p=e=>{n("currentChange",e)},f=e=>{n("selectRows",e)},m=e=>{n("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),d.value.toggleRowSelection(e))}return(0,i.dl)((()=>{d?.value?.doLayout()})),(0,i.bv)((()=>{d.value.doLayout()})),t({tableRef:d,toggleRowSelection:g}),(t,n)=>{const s=l.$Y,g=r.GT,h=l.eI,w=a.R,y=o.t;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(h,{ref_key:"tableRef",ref:d,class:(0,u.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:f,onSortChange:m},{empty:(0,i.w5)((()=>[(0,i.Wm)(g,{description:"暂无数据"})])),default:(0,i.w5)((()=>[e.isSelection?((0,i.wg)(),(0,i.j4)(s,{key:0,fixed:"left",type:"selection",width:"55"})):(0,i.kq)("",!0),e.isIndex?((0,i.wg)(),(0,i.j4)(s,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columnList,(e=>((0,i.wg)(),(0,i.j4)(s,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,i.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,i.w5)((()=>[(0,i.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,i.w5)((({row:n,$index:o,column:a})=>[(0,i.WI)(t.$slots,e.prop,{row:n,index:o,column:a})])),key:"1"}:{name:"default",fn:(0,i.w5)((({row:t})=>[(0,i._)("span",{class:"name"},(0,u.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[y,e.listLoading]]),e.isPagination?((0,i.wg)(),(0,i.j4)(w,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:p,onSizeChange:c},null,8,["current-page","layout","page-size","total"])):(0,i.kq)("",!0)],64)}}};function c(e){e.__source="src/components/CustomTable.vue"}var p=n(83744);"function"===typeof c&&c(d);const f=(0,p.Z)(d,[["__scopeId","data-v-bdd84b16"]]);var m=f},74188:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var o=n(38492),a=(n(24549),n(94687),n(79303),n(50952)),l=(n(83646),n(58818)),r=n(35068),i=n(49530),u=(n(80773),n(48499)),s=n(21211),d=(n(12791),n(6715),n(57847)),c=(n(43872),n(57658),n(66252)),p=n(2262),f=n(49963),m=n(3577),g=n(5743),h=n(22076),w=n(93981),y=n(18907),b={__name:"index",setup(e){const t=(0,p.iH)(null),n=(0,c.f3)("$baseTableHeight"),b=((0,c.f3)("$baseConfirm"),(0,c.f3)("$baseMessage")),v=(0,p.iH)({output:"extend",selectManufacturer:["name"],selectGroups:"extend",selectInterfaces:"extend",selectModelType:"extend",discover_hosts:!0,search:{name:""}}),x=(0,p.qj)({listLoading:!0,scanData:[],hostGroupList:[],selectRows:[],allocationData:{visible:!1,data:{monitoringid:""}},height:n(3)-30}),_=(0,p.iH)(null),k=[{label:"设备名称",prop:"name",tooltip:!0},{label:"IP 地址",width:"150",prop:"ip",tooltip:!0},{label:"发现方式",prop:"protocal",width:"150",tooltip:!0,isRender:!0},{label:"厂商",prop:"manufacturer",tooltip:!0,isRender:!0},{label:"型号",prop:"physical_model",tooltip:!0},{label:"监控模板（必选）",prop:"groups",isRender:!0,width:"200",isHeaderRender:!0},{align:"right",fixed:"right",label:"操作",tooltip:!0,width:"150",prop:"operation",isRender:!0}],S=e=>{x.selectRows=e},C=()=>{x.height=(0,h.NC)(_,4.5+1/3,"remToPx")};function U(){x.listLoading=!0,(0,y.XF)(v.value).then((e=>{e.error||(e.map((e=>{e.groupid=e?.groups&&e?.groups[0]?.groupid||""})),x.scanData=e),x.listLoading=!1})).catch((e=>{console.log(e),x.listLoading=!1}))}function W(){(0,y.v0)({output:["name","groupid"]}).then((e=>{if(!e.error)for(const t in e)if(Object.hasOwnProperty.call(e,t)){const n=e[t];x.hostGroupList.push(n)}x.loading=!1})).catch((e=>{console.log("err :>> ",e),x.loading=!1}))}function D(){if(x.selectRows.length){const e=x.selectRows.map((e=>({hostid:e.hostid,name:e.name,groupid:e.groupid})));x.allocationData={visible:!0,data:{discoverData:e,monitoringid:""}}}else b("未选中任何行","error")}function R(){x.allocationData.visible=!1}function Z(){x.selectRows.map((e=>{e.groupid=x.allocationData.data.monitoringid}))}function H(e){const t=[];if(e.hostid)e.groupid&&t.push({hostid:e.hostid,groupid:e.groupid});else{if(!x.selectRows.length)return b("未选中任何行","warning"),!1;x.scanData.map((e=>{e.groupid&&t.push({hostid:e.hostid,groupid:e.groupid})}))}if(!t.length)return b("请选择监控模板","warning"),!1;x.listLoading=!0,(0,y.bm)(t).then((e=>{e.error||U(),x.listLoading=!1})).catch((e=>{console.log("error :>> ",e),x.listLoading=!1}))}return(0,c.wF)((()=>{window.addEventListener("resize",C)})),(0,c.Ah)((()=>{window.removeEventListener("resize",C)})),(0,c.bv)((()=>{U(),W(),C()})),(e,n)=>{const h=d.EZ,y=s.nH,b=s.ly,C=u.Z,W=i.ElButton,L=r.Z,j=l.Z,I=(0,c.up)("vab-icon"),V=a.Q0,N=o.BT,z=o.ElSelect;return(0,c.wg)(),(0,c.iD)("div",{ref_key:"unmanagedRef",ref:_,class:"unmanaged-device-container"},[(0,c.Wm)(j,null,{default:(0,c.w5)((()=>[(0,c.Wm)(C,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)(b,{class:"query-info-form",inline:"","label-width":"0px",model:(0,p.SU)(v).search,onSubmit:n[1]||(n[1]=(0,f.iM)((()=>{}),["prevent"]))},{default:(0,c.w5)((()=>[(0,c.Wm)(y,{label:"",class:"form-name"},{default:(0,c.w5)((()=>[(0,c.Wm)(h,{modelValue:(0,p.SU)(v).search.name,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,p.SU)(v).search.name=e),placeholder:"请输入设备名称搜索",onChange:U},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,c.Wm)(L,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)(W,{class:"device-type-btn",onClick:D},{default:(0,c.w5)((()=>[(0,c.Uk)(" 分配设备类型 ")])),_:1}),(0,c.Wm)(W,{type:"primary",disabled:!(0,p.SU)(x).scanData.length,onClick:H},{default:(0,c.w5)((()=>[(0,c.Uk)(" 创建监测 ")])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,c.Wm)(g["default"],{ref_key:"scanTableRef",ref:t,"max-height":(0,p.SU)(x).height,"class-name":"scan-info-table","list-loading":(0,p.SU)(x).listLoading,"list-data":(0,p.SU)(x).scanData,"column-list":k,"is-index":!0,"is-pagination":!1,onSelectRows:S},{groupsHeader:(0,c.w5)((({column:e})=>[(0,c._)("span",null,(0,m.zw)(e.label),1),(0,c.Wm)(V,{content:e.label,placement:"top",effect:"light"},{default:(0,c.w5)((()=>[(0,c.Wm)(I,{icon:"question-line"})])),_:2},1032,["content"])])),manufacturer:(0,c.w5)((({row:e})=>[(0,c.Uk)((0,m.zw)(e.manufacturer.name||"---"),1)])),protocal:(0,c.w5)((({row:e})=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e?.protocal,((e,t)=>((0,c.wg)(),(0,c.iD)("span",{key:e,class:"protocal-column"},(0,m.zw)(t||"---"),1)))),128))])),groups:(0,c.w5)((({row:e})=>[(0,c.Wm)(z,{modelValue:e.groupid,"onUpdate:modelValue":t=>e.groupid=t,placeholder:"请选择资产类型",clearable:"",filterable:""},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,p.SU)(x).hostGroupList,(e=>((0,c.wg)(),(0,c.j4)(N,{key:e.groupid,label:e.name,value:e.groupid},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),operation:(0,c.w5)((({row:e})=>[(0,c.Wm)(W,{text:"",type:"primary",onClick:t=>H(e)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 创建监控 ")])),_:2},1032,["onClick"])])),_:1},8,["max-height","list-loading","list-data"]),(0,p.SU)(x).allocationData.visible?((0,c.wg)(),(0,c.j4)(w["default"],{key:0,"allocation-data":(0,p.SU)(x).allocationData.data,visible:(0,p.SU)(x).allocationData.visible,onCancel:R,onConfirm:Z},null,8,["allocation-data","visible"])):(0,c.kq)("",!0)],512)}}};function v(e){e.__source="src/views/monitoring-center/unmanaged-device/index.vue"}var x=n(83744);"function"===typeof v&&v(b);const _=(0,x.Z)(b,[["__scopeId","data-v-f25c1060"]]);var k=_}}]);