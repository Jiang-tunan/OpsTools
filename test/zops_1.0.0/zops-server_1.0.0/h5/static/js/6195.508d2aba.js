/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[6195],{32134:function(e,t,a){a.d(t,{IP:function(){return s},MB:function(){return n},PN:function(){return r},YZ:function(){return l},iv:function(){return c},qb:function(){return d},tS:function(){return i},vP:function(){return u}});var o=a(52806);function n(e){return(0,o.Z)({params:{method:"idc.get",data:e}})}function s(e){return(0,o.Z)({params:{method:"idc.create",data:e}})}function i(e){return(0,o.Z)({params:{method:"idc.update",data:e}})}function r(e){return(0,o.Z)({params:{method:"idc.delete",data:e}})}function l(e){return(0,o.Z)({params:{method:"house.get",data:e}})}function u(e){return(0,o.Z)({params:{method:"house.create",data:e}})}function c(e){return(0,o.Z)({params:{method:"house.update",data:e}})}function d(e){return(0,o.Z)({params:{method:"house.delete",data:e}})}},22076:function(e,t,a){function o(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function n(e,t,a){let n=0;return n="remToPx"===a?o(t):t,e?.value?.offsetHeight?e.value.offsetHeight-n:e?.offsetHeight?e.offsetHeight-n:void 0}function s(e,t){const a=new Map;for(const o of e)a.has(o[t])||a.set(o[t],o);return[...a.values()]}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))}function r(e){let t=parseInt(e),a=0,o=0;return t>60&&(a=parseInt(t/60),t=parseInt(t%60),a>60&&(o=parseInt(a/60),a=parseInt(a%60))),{second:t,minute:a,hour:o}}a.d(t,{BE:function(){return i},NC:function(){return n},Nb:function(){return s},ZC:function(){return r}})},35068:function(e,t,a){a.d(t,{Z:function(){return u}});var o=a(74842),n=(a(24549),a(94851),a(66252));const s={class:"right-panel"};var i=(0,n.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,a)=>{const i=o.Dv;return(0,n.wg)(),(0,n.j4)(i,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function r(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof r&&r(i);const l=i;var u=l},48499:function(e,t,a){a.d(t,{Z:function(){return d}});var o=a(74842),n=(a(24549),a(94851),a(66252));const s={class:"top-panel"};function i(e,t){const a=o.Dv;return(0,n.wg)(),(0,n.j4)(a,{span:24},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.WI)(e.$slots,"default")])])),_:3})}function r(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var l=a(83744);const u={};"function"===typeof r&&r(u);const c=(0,l.Z)(u,[["render",i]]);var d=c},58818:function(e,t,a){a.d(t,{Z:function(){return c}});var o=a(28314),n=(a(24549),a(7436),a(66252));function s(e,t){const a=o.dq;return(0,n.wg)(),(0,n.j4)(a,{class:"vab-query-form",gutter:0},{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function i(e){e.__source="library/components/VabQueryForm/index.vue"}var r=a(83744);const l={};"function"===typeof i&&i(l);const u=(0,r.Z)(l,[["render",s],["__scopeId","data-v-4d22213e"]]);var c=u},5743:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var o=a(64654),n=(a(24549),a(16135),a(91067)),s=(a(78526),a(47546)),i=(a(49653),a(37965)),r=(a(82880),a(60717),a(66252)),l=a(3577),u=a(2262),c={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:a}){const c=(0,u.iH)(null),d=e=>{a("sizeChange",e)},m=e=>{a("currentChange",e)},p=e=>{a("selectRows",e)},h=e=>{a("sortChange",e)};function f(e){e&&(console.log("row :>> ",e),c.value.toggleRowSelection(e))}return(0,r.dl)((()=>{c?.value?.doLayout()})),(0,r.bv)((()=>{c.value.doLayout()})),t({tableRef:c,toggleRowSelection:f}),(t,a)=>{const u=s.$Y,f=i.GT,g=s.eI,y=n.R,w=o.t;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)(((0,r.wg)(),(0,r.j4)(g,{ref_key:"tableRef",ref:c,class:(0,l.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:p,onSortChange:h},{empty:(0,r.w5)((()=>[(0,r.Wm)(f,{description:"暂无数据"})])),default:(0,r.w5)((()=>[e.isSelection?((0,r.wg)(),(0,r.j4)(u,{key:0,fixed:"left",type:"selection",width:"55"})):(0,r.kq)("",!0),e.isIndex?((0,r.wg)(),(0,r.j4)(u,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columnList,(e=>((0,r.wg)(),(0,r.j4)(u,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,r.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,r.w5)((()=>[(0,r.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,r.w5)((({row:a,$index:o,column:n})=>[(0,r.WI)(t.$slots,e.prop,{row:a,index:o,column:n})])),key:"1"}:{name:"default",fn:(0,r.w5)((({row:t})=>[(0,r._)("span",{class:"name"},(0,l.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[w,e.listLoading]]),e.isPagination?((0,r.wg)(),(0,r.j4)(y,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:m,onSizeChange:d},null,8,["current-page","layout","page-size","total"])):(0,r.kq)("",!0)],64)}}};function d(e){e.__source="src/components/CustomTable.vue"}var m=a(83744);"function"===typeof d&&d(c);const p=(0,m.Z)(c,[["__scopeId","data-v-bdd84b16"]]);var h=p},26195:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var o=a(28314),n=(a(24549),a(7436),a(37965)),s=(a(82880),a(91067)),i=(a(78526),a(74842)),r=(a(94851),a(58818)),l=a(35068),u=a(49530),c=(a(80773),a(24434)),d=(a(98476),a(25099),a(48499)),m=a(50741),p=(a(50674),a(8734)),h=(a(7553),a(57658),a(66252)),f=a(3577),g=a(2262),y=a(5743),w=a(32134),v=a(22076);const _=e=>((0,h.dD)("data-v-23a54c04"),e=e(),(0,h.Cn)(),e),b={class:"machine-room-name"},x={class:"machine-room-num"},C={key:0,class:"machine-room-table"},k=["onClick"],S={class:"card-content"},U={class:"card-top"},R={class:"top-name"},W={class:"top-btns"},z={class:"card-bottom"},D={class:"bottom-content"},q={class:"bottom-item"},N=_((()=>(0,h._)("span",null,"负责人：",-1))),F={class:"bottom-item"},Z=_((()=>(0,h._)("span",null,"设备数：",-1))),I=["onClick"],H={class:"bottom-item"},j=_((()=>(0,h._)("span",null,"机房地址：",-1)));var L={__name:"MachineRoom",emits:["hostsEvent"],setup(e,{expose:t,emit:_}){const L=(0,h.RC)((()=>Promise.all([a.e(922),a.e(3067)]).then(a.bind(a,12679)))),P=(0,h.f3)("$baseConfirm"),M=(0,h.f3)("$baseMessage"),B=(0,h.f3)("$baseTableHeight"),$=(0,g.iH)(null),E=(0,g.iH)(null),T=[{label:"机房名称",prop:"name",tooltip:!0},{label:"负责人",prop:"user",tooltip:!0,isRender:!0},{label:"设备数",prop:"hosts",tooltip:!0,isRender:!0},{label:"地址",prop:"address",tooltip:!0},{align:"right",fixed:"right",label:"操作",width:"200",prop:"operation",isRender:!0}],V=(0,g.qj)({height:B(3)-30,houseData:[],listLoading:!1,total:0,hostsNum:0,selectRows:"",selectData:{},layout:"card",queryForm:{pageNo:1,pageSize:10,enable:"",searchkey:"",usrgrpids:[]},machineRoomCaseData:{title:"新建机房",type:"new",visible:!1,data:{name:"",userid:"",address:""}}});function Q(e){V.queryForm.idcid=e.idcid,V.selectData=e,Y()}const Y=async()=>{V.listLoading=!0,V.houseData=[],V.hostsNum=0;const e={output:"extend",selectHosts:"count",selectUsers:!0,limit:V.queryForm.pageSize,current:V.queryForm.pageNo};V.queryForm.searchkey&&(e.search={},e.search.name=V.queryForm.searchkey),V.queryForm.idcid&&(e.idcids=[V.queryForm.idcid]),(0,w.YZ)(e).then((e=>{!e.error&&e.length&&(V.houseData=e,V.total=Number(e[0]?.total),e.map((e=>V.hostsNum+=e.hosts))),V.listLoading=!1})).catch((e=>{console.log(e),V.listLoading=!1}))},A=e=>{V.queryForm.pageSize=e,Y()},K=e=>{V.queryForm.pageNo=e,Y()},G=e=>{V.selectRows=e},O=()=>{V.height=(0,v.NC)($,1/3+3.5,"remToPx")},J=()=>{V.machineRoomCaseData={visible:!0,title:"新建机房",type:"new",data:{idcid:V.queryForm.idcid,name:"",userid:"",address:""}}},X=e=>{V.machineRoomCaseData={title:"编辑机房",type:"edit",visible:!0,data:{userid:e.userid||"",idcid:e.idcid,houseid:e.houseid,name:e.name,address:e.address}}};function ee(){V.machineRoomCaseData.visible=!1}const te=e=>{const t=[];if(e.houseid?t.push(e.houseid):V.selectRows.forEach((e=>{t.push(e.houseid)})),!t.length)return!1;P("你确定要删除吗",null,"delete",(async()=>{(0,w.qb)(t).then((e=>{e.error||(M("删除成功","success"),Y())})).catch((e=>{console.log("err :>> ",e)}))}))};function ae(e){e.hosts&&_("hostsEvent",e)}function oe(e){localStorage.setItem("machine-room-layout",e)}return(0,h.wF)((()=>{window.addEventListener("resize",O)})),(0,h.Ah)((()=>{window.removeEventListener("resize",O)})),(0,h.bv)((()=>{const e=localStorage.getItem("machine-room-layout");V.layout=e||"card",O()})),t({queryByMachineRoom:Q}),(e,t)=>{const a=(0,h.up)("OfficeBuilding"),w=p.gn,v=m.os,_=d.Z,P=(0,h.up)("vab-icon"),M=c.dn,B=c.KD,Q=u.ElButton,O=l.Z,ne=r.Z,se=(0,h.up)("Edit"),ie=(0,h.up)("Delete"),re=i.Dv,le=s.R,ue=n.GT,ce=o.dq;return(0,h.wg)(),(0,h.iD)("div",{ref_key:"machineContainer",ref:$,class:"machine-room-container"},[(0,h.Wm)(ne,{class:"machine-room-head"},{default:(0,h.w5)((()=>[(0,h.Wm)(_,{span:12},{default:(0,h.w5)((()=>[(0,h.Wm)(w,{class:"icon-title"},{default:(0,h.w5)((()=>[(0,h.Wm)(a)])),_:1}),(0,h._)("span",b,(0,f.zw)((0,g.SU)(V).selectData.name),1),(0,h.Wm)(v,{direction:"vertical"}),(0,h._)("span",x," 机房数 ："+(0,f.zw)((0,g.SU)(V).total)+"；设备总数 ："+(0,f.zw)((0,g.SU)(V).hostsNum),1)])),_:1}),(0,h.Wm)(O,{span:12},{default:(0,h.w5)((()=>[(0,h.Wm)(B,{modelValue:(0,g.SU)(V).layout,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,g.SU)(V).layout=e),onChange:oe},{default:(0,h.w5)((()=>[(0,h.Wm)(M,{label:"card"},{default:(0,h.w5)((()=>[(0,h.Wm)(P,{icon:"layout-5-fill"})])),_:1}),(0,h.Wm)(M,{label:"list"},{default:(0,h.w5)((()=>[(0,h.Wm)(P,{icon:"list-unordered"})])),_:1})])),_:1},8,["modelValue"]),(0,h.Wm)(Q,{type:"primary",onClick:J},{default:(0,h.w5)((()=>[(0,h.Uk)("新建机房")])),_:1})])),_:1})])),_:1}),"list"===(0,g.SU)(V).layout?((0,h.wg)(),(0,h.iD)("div",C,[(0,h.Wm)(y["default"],{ref_key:"machineTableRef",ref:E,"max-height":(0,g.SU)(V).height,"list-loading":(0,g.SU)(V).listLoading,"list-data":(0,g.SU)(V).houseData,"column-list":T,total:(0,g.SU)(V).total,"page-no":(0,g.SU)(V).queryForm.pageNo,"page-size":(0,g.SU)(V).queryForm.pageSize,"is-index":!0,onSizeChange:A,onCurrentChange:K,onSelectRows:G},{user:(0,h.w5)((({row:e})=>[(0,h.Uk)((0,f.zw)(e.user?.username||"---"),1)])),hosts:(0,h.w5)((({row:e})=>[(0,h._)("span",{class:(0,f.C_)({"hosts-num":!!e.hosts}),onClick:t=>ae(e)},(0,f.zw)(e.hosts),11,k)])),operation:(0,h.w5)((({row:e})=>[(0,h.Wm)(Q,{text:"",type:"primary",onClick:t=>X(e)},{default:(0,h.w5)((()=>[(0,h.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,h.Wm)(Q,{text:"",type:"primary",onClick:t=>te(e)},{default:(0,h.w5)((()=>[(0,h.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1},8,["max-height","list-loading","list-data","total","page-no","page-size"])])):((0,h.wg)(),(0,h.j4)(ce,{key:1,class:"card-container"},{default:(0,h.w5)((()=>[((0,h.wg)(!0),(0,h.iD)(h.HY,null,(0,h.Ko)((0,g.SU)(V).houseData,(e=>((0,h.wg)(),(0,h.j4)(re,{key:e.houseid,xs:24,sm:24,md:12,lg:12,xl:8},{default:(0,h.w5)((()=>[(0,h._)("div",S,[(0,h._)("div",U,[(0,h._)("span",R,(0,f.zw)(e.name),1),(0,h._)("div",W,[(0,h.Wm)(Q,{text:"",type:"primary",onClick:t=>X(e)},{default:(0,h.w5)((()=>[(0,h.Wm)(w,null,{default:(0,h.w5)((()=>[(0,h.Wm)(se)])),_:1}),(0,h.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,h.Wm)(Q,{text:"",type:"primary",onClick:t=>te(e)},{default:(0,h.w5)((()=>[(0,h.Wm)(w,null,{default:(0,h.w5)((()=>[(0,h.Wm)(ie)])),_:1}),(0,h.Uk)(" 删除 ")])),_:2},1032,["onClick"])])]),(0,h._)("div",z,[(0,h.Wm)(P,{class:"bottom-iamge",icon:"machine-room","is-custom-svg":""}),(0,h._)("div",D,[(0,h._)("div",q,[N,(0,h._)("span",null,(0,f.zw)(e.user?.username||"---"),1)]),(0,h._)("div",F,[Z,(0,h._)("span",{class:(0,f.C_)(["hosts-item",{"hosts-num":!!e.hosts}]),onClick:t=>ae(e)},(0,f.zw)(e.hosts),11,I)]),(0,h._)("div",H,[j,(0,h._)("span",null,(0,f.zw)(e.address||"---"),1)])])])])])),_:2},1024)))),128)),(0,h.Wm)(re,{span:24,class:"pagination-content"},{default:(0,h.w5)((()=>[(0,h.Wm)(le,{"current-page":(0,g.SU)(V).queryForm.pageNo,"onUpdate:currentPage":t[1]||(t[1]=e=>(0,g.SU)(V).queryForm.pageNo=e),"page-size":(0,g.SU)(V).queryForm.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:(0,g.SU)(V).total,onSizeChange:A,onCurrentChange:K},null,8,["current-page","page-size","total"])])),_:1}),(0,g.SU)(V).houseData?.length?(0,h.kq)("",!0):((0,h.wg)(),(0,h.iD)("div",{key:0,style:(0,f.j5)({height:(0,g.SU)(V).height+"px"}),class:"empty-content"},[(0,h.Wm)(ue,{description:"暂无数据"})],4))])),_:1})),(0,g.SU)(V).machineRoomCaseData.visible?((0,h.wg)(),(0,h.j4)((0,g.SU)(L),{key:2,"machine-room-case-data":(0,g.SU)(V).machineRoomCaseData.data,title:(0,g.SU)(V).machineRoomCaseData.title,type:(0,g.SU)(V).machineRoomCaseData.type,visible:(0,g.SU)(V).machineRoomCaseData.visible,onCancel:ee,onConfirm:Y},null,8,["machine-room-case-data","title","type","visible"])):(0,h.kq)("",!0)],512)}}};function P(e){e.__source="src/views/system/idc/MachineRoom.vue"}var M=a(83744);"function"===typeof P&&P(L);const B=(0,M.Z)(L,[["__scopeId","data-v-23a54c04"]]);var $=B}}]);