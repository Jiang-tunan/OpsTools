/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[4768,6479,7886],{94577:function(e,n,a){a.d(n,{Nl:function(){return l},Oc:function(){return s},Rt:function(){return o},_T:function(){return i}});var t=a(52806);function i(e){return(0,t.Z)({params:{method:"inventorytype.get",data:e}})}function l(e){return(0,t.Z)({params:{method:"inventorytype.create",data:e}})}function o(e){return(0,t.Z)({params:{method:"inventorytype.update",data:e}})}function s(e){return(0,t.Z)({params:{method:"inventorytype.delete",data:e}})}},43080:function(e,n,a){a.r(n),a.d(n,{default:function(){return W}});var t=a(64654),i=(a(24549),a(16135),a(59109)),l=(a(65195),a(31574)),o=(a(72698),a(72673),a(56864),a(50952)),s=(a(83646),a(49530)),c=(a(80773),a(57847)),r=(a(43872),a(66252)),u=a(2262),d=a(3577),m=a(49963),f=a(65781),p=a(94577);const y={class:"asset-content"},v={class:"search-content"},k={class:"asset-tree-content"},_={class:"custom-tree-node"},h={key:1},b={class:"el-dropdown-link"};var w={__name:"AssetType",emits:["assetNodeClick"],setup(e,{emit:n}){const w=(0,r.RC)((()=>Promise.all([a.e(922),a.e(1108),a.e(6860),a.e(4375)]).then(a.bind(a,34713)))),C=(0,r.f3)("$baseConfirm"),g=(0,r.f3)("$baseMessage"),D=(0,u.iH)([]),W=(0,u.iH)(null),N={isLeaf:e=>!e.hasson,label:"name",id:"inventory_typeid"},T=(0,u.iH)({search:{name:""},fid:"0"}),I=(0,u.qj)({loading:!0,assetName:"",backupData:{},backupName:{},currentKey:"",allNum:0,assetTypeInfoData:{visible:!1,title:"新建资产类型",type:"new",data:{name:"",description:"",fid:""}}}),R=e=>{V()},U=e=>{I.assetTypeInfoData={visible:!0,title:"新建资产类型",type:"new",data:{name:"",description:"",fid:e.inventory_typeid||I.currentKey}}},x=(e,n)=>{if(!e?.data?.inventory_typeid)return!1;T.value.fid=e.data.inventory_typeid||"0",(0,p._T)(T.value).then((e=>{!e.error&&e.length&&n(e)})).catch((e=>{console.log("err :>> ",e)}))},K=(e,n)=>!e||n.name.includes(e),V=()=>{I.loading=!0,T.value.fid="0",(0,p._T)(T.value).then((e=>{I.loading=!1,!e.error&&e.length&&(D.value=e,I.currentKey="",I.allNum=e[0]?.all,n("assetNodeClick",e))})).catch((e=>{I.loading=!1,console.log("err :>> ",e)}))};function Z(){I.assetTypeInfoData.visible=!1}function q(e){I.currentKey=e.inventory_typeid,n("assetNodeClick",e)}function H(e){e.isRename=!0,I.backupName=e.name,I.backupData=e}function M(e){(0,p.Rt)({name:e.name,inventory_typeid:e.inventory_typeid}).then((e=>{e.error?(I.backupData.isRename=!1,e.name=I.backupName):I.backupData.isRename=!1})).catch((()=>{e.isRename=!1,e.name=I.backupName}))}function j(e){I.backupData.isRename=!1,e.name=I.backupName}function z(e){I.assetTypeInfoData={visible:!0,title:"编辑资产类型",type:"edit",data:{name:e.name,description:e.description,fid:e.fid,inventory_typeid:e.inventory_typeid}}}function A(e){if(!e.inventory_typeid)return!1;C(`删除资产类型后不可恢复，确定要删除“${e.name}”吗？`,"删除资产类型","delete",(async()=>{(0,p.Oc)([e.inventory_typeid]).then((e=>{e.error||(g("删除成功","success"),V())})).catch((e=>{console.log("err :>> ",e)}))}))}return(0,r.bv)((()=>{V()})),(e,n)=>{const a=c.EZ,p=(0,r.up)("vab-icon"),C=s.ElButton,g=o.Q0,S=l.Df,$=l.o2,B=l.YK,E=i.y,L=t.t;return(0,r.wg)(),(0,r.iD)("div",y,[(0,r._)("div",v,[(0,r.Wm)(a,{modelValue:T.value.search.name,"onUpdate:modelValue":n[0]||(n[0]=e=>T.value.search.name=e),placeholder:"请输入关键字搜索",clearable:"","prefix-icon":(0,u.SU)(f.Search),onChange:R},null,8,["modelValue","prefix-icon"]),(0,r.Wm)(g,{content:"新增资产类型",placement:"top",effect:"light"},{default:(0,r.w5)((()=>[(0,r.Wm)(C,{class:"add-btn",onClick:U},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{icon:"add-line"})])),_:1})])),_:1})]),(0,r._)("div",k,[(0,r._)("div",{class:(0,d.C_)(["asset-all",{"is-current":!I.currentKey}]),onClick:q}," 全部资产（"+(0,d.zw)(I.allNum)+"） ",3),(0,r.wy)(((0,r.wg)(),(0,r.j4)(E,{ref_key:"assetRef",ref:W,class:"asset-tree","current-node-key":I.currentKey,"node-key":"inventory_typeid","highlight-current":"",lazy:"",data:D.value,load:x,props:N,"filter-node-method":K,onNodeClick:q},{default:(0,r.w5)((({node:e,data:t})=>[(0,r._)("span",_,[t.isRename?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"rename-label",onClick:n[1]||(n[1]=(0,m.iM)((()=>{}),["stop"]))},[(0,r.Wm)(a,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,placeholder:"请输入资产类型名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),(0,r.Wm)(p,{class:"rename-icon icon-check",icon:"check-fill",onClick:(0,m.iM)((e=>M(t)),["stop"])},null,8,["onClick"]),(0,r.Wm)(p,{class:"rename-icon icon-close",icon:"close-fill",onClick:(0,m.iM)((e=>j(t)),["stop"])},null,8,["onClick"])])):((0,r.wg)(),(0,r.iD)("span",h,(0,d.zw)(e.label),1)),(0,r.Wm)(B,null,{dropdown:(0,r.w5)((()=>[(0,r.Wm)($,null,{default:(0,r.w5)((()=>[(0,r.Wm)(S,{onClick:e=>U(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 新增子级类型 ")])),_:2},1032,["onClick"]),(0,r.Wm)(S,{onClick:e=>H(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 重命名 ")])),_:2},1032,["onClick"]),(0,r.Wm)(S,{onClick:e=>z(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,r.Wm)(S,{onClick:e=>A(t)},{default:(0,r.w5)((()=>[(0,r.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,r.w5)((()=>[(0,r._)("span",b,[(0,r.Wm)(p,{icon:"more-2-fill"})])])),_:2},1024)])])),_:1},8,["current-node-key","data"])),[[L,I.loading]])]),I.assetTypeInfoData.visible?((0,r.wg)(),(0,r.j4)((0,u.SU)(w),{key:0,"asset-type-info-data":I.assetTypeInfoData.data,title:I.assetTypeInfoData.title,type:I.assetTypeInfoData.type,visible:I.assetTypeInfoData.visible,onCancel:Z,onConfirm:V},null,8,["asset-type-info-data","title","type","visible"])):(0,r.kq)("",!0)])}}};function C(e){e.__source="src/views/assets-management/AssetType.vue"}var g=a(83744);"function"===typeof C&&C(w);const D=(0,g.Z)(w,[["__scopeId","data-v-62fb141f"]]);var W=D},42553:function(e,n,a){a.r(n),a.d(n,{default:function(){return p}});var t=a(28314),i=(a(24549),a(7436),a(74842)),l=(a(94851),a(66252)),o=a(74241),s=a(43080),c=a(2262);const r={class:"assets-container"};var u={__name:"index",setup(e){const n=(0,c.iH)(null);function a(e){n.value.queryByDevices(e)}return(e,c)=>{const u=i.Dv,d=t.dq;return(0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(d,null,{default:(0,l.w5)((()=>[(0,l.Wm)(u,{xs:8,sm:6,md:5,lg:4,xl:3,class:"assets-data-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(s["default"],{onAssetNodeClick:a})])),_:1}),(0,l.Wm)(u,{xs:14,sm:18,md:19,lg:20,xl:21},{default:(0,l.w5)((()=>[(0,l.Wm)(o["default"],{ref_key:"devicesListRef",ref:n},null,512)])),_:1})])),_:1})])}}};function d(e){e.__source="src/views/assets-management/index.vue"}var m=a(83744);"function"===typeof d&&d(u);const f=(0,m.Z)(u,[["__scopeId","data-v-87789f80"]]);var p=f}}]);