/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[1066],{83954:function(e,t,n){n.d(t,{$C:function(){return d},AX:function(){return i},C$:function(){return m},QB:function(){return r},Rg:function(){return u},UX:function(){return l},VZ:function(){return o},g4:function(){return c},tE:function(){return s},yj:function(){return p}});var a=n(52806);function o(e){return(0,a.Z)({params:{method:"template.get",data:e}})}function r(e){return(0,a.Z)({params:{method:"template.update",data:e}})}function l(e){return(0,a.Z)({params:{method:"trigger.get",data:e}})}function i(e){return(0,a.Z)({params:{method:"trigger.update",data:e}})}function u(e){return(0,a.Z)({params:{method:"trigger.enabletrigger",data:e}})}function s(e){return(0,a.Z)({params:{method:"trigger.recover",data:e}})}function d(e){return(0,a.Z)({params:{method:"item.get",data:e}})}function c(e){return(0,a.Z)({params:{method:"item.update",data:e}})}function p(e){return(0,a.Z)({params:{method:"item.enable",data:e}})}function m(e){return(0,a.Z)({params:{method:"item.interfacelist",data:e}})}},30575:function(e,t,n){n.d(t,{h:function(){return a}});const a={"":{name:"全部告警",value:""},0:{name:"未分类",value:0},1:{name:"信息",value:1},2:{name:"警告",value:2},3:{name:"一般严重",value:3},4:{name:"严重",value:4},5:{name:"灾难",value:5}}},22076:function(e,t,n){function a(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function o(e,t,n){let o=0;return o="remToPx"===n?a(t):t,e?.value?.offsetHeight?e.value.offsetHeight-o:e?.offsetHeight?e.offsetHeight-o:void 0}function r(e,t){const n=new Map;for(const a of e)n.has(a[t])||n.set(a[t],a);return[...n.values()]}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function i(e){let t=parseInt(e),n=0,a=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(a=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:a}}n.d(t,{BE:function(){return l},NC:function(){return o},Nb:function(){return r},ZC:function(){return i}})},35068:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(74842),o=(n(24549),n(94851),n(66252));const r={class:"right-panel"};var l=(0,o.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,n)=>{const l=a.Dv;return(0,o.wg)(),(0,o.j4)(l,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof i&&i(l);const u=l;var s=u},48499:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(74842),o=(n(24549),n(94851),n(66252));const r={class:"top-panel"};function l(e,t){const n=a.Dv;return(0,o.wg)(),(0,o.j4)(n,{span:24},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.WI)(e.$slots,"default")])])),_:3})}function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var u=n(83744);const s={};"function"===typeof i&&i(s);const d=(0,u.Z)(s,[["render",l]]);var c=d},58818:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(28314),o=(n(24549),n(7436),n(66252));function r(e,t){const n=a.dq;return(0,o.wg)(),(0,o.j4)(n,{class:"vab-query-form",gutter:0},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function l(e){e.__source="library/components/VabQueryForm/index.vue"}var i=n(83744);const u={};"function"===typeof l&&l(u);const s=(0,i.Z)(u,[["render",r],["__scopeId","data-v-4d22213e"]]);var d=s},5743:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(64654),o=(n(24549),n(16135),n(91067)),r=(n(78526),n(47546)),l=(n(49653),n(37965)),i=(n(82880),n(60717),n(66252)),u=n(3577),s=n(2262),d={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:n}){const d=(0,s.iH)(null),c=e=>{n("sizeChange",e)},p=e=>{n("currentChange",e)},m=e=>{n("selectRows",e)},f=e=>{n("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),d.value.toggleRowSelection(e))}return(0,i.dl)((()=>{d?.value?.doLayout()})),(0,i.bv)((()=>{d.value.doLayout()})),t({tableRef:d,toggleRowSelection:g}),(t,n)=>{const s=r.$Y,g=l.GT,h=r.eI,w=o.R,y=a.t;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(h,{ref_key:"tableRef",ref:d,class:(0,u.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:m,onSortChange:f},{empty:(0,i.w5)((()=>[(0,i.Wm)(g,{description:"暂无数据"})])),default:(0,i.w5)((()=>[e.isSelection?((0,i.wg)(),(0,i.j4)(s,{key:0,fixed:"left",type:"selection",width:"55"})):(0,i.kq)("",!0),e.isIndex?((0,i.wg)(),(0,i.j4)(s,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columnList,(e=>((0,i.wg)(),(0,i.j4)(s,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,i.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,i.w5)((()=>[(0,i.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,i.w5)((({row:n,$index:a,column:o})=>[(0,i.WI)(t.$slots,e.prop,{row:n,index:a,column:o})])),key:"1"}:{name:"default",fn:(0,i.w5)((({row:t})=>[(0,i._)("span",{class:"name"},(0,u.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[y,e.listLoading]]),e.isPagination?((0,i.wg)(),(0,i.j4)(w,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:p,onSizeChange:c},null,8,["current-page","layout","page-size","total"])):(0,i.kq)("",!0)],64)}}};function c(e){e.__source="src/components/CustomTable.vue"}var p=n(83744);"function"===typeof c&&c(d);const m=(0,p.Z)(d,[["__scopeId","data-v-bdd84b16"]]);var f=m},81066:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(50952),o=(n(24549),n(83646),n(47301)),r=(n(52783),n(58818)),l=n(35068),i=n(31574),u=(n(72698),n(72673),n(56864),n(49530)),s=(n(80773),n(48499)),d=n(21211),c=(n(12791),n(57847)),p=(n(43872),n(6715),n(38492)),m=(n(94687),n(79303),n(57658),n(66252)),f=n(49963),g=n(2262),h=n(3577),w=n(22076),y=n(30575),v=n(5743),b=n(83954),x=n(22201);const _=["onClick"];var C={__name:"AlarmIndicatorAll",setup(e){const t=[{prop:"description",label:"监控指标",minWidth:"110"},{prop:"items",label:"监控项",isRender:!0,tooltip:!0},{prop:"expression",label:"告警设置",tooltip:!0},{prop:"priority",label:"告警等级",isRender:!0,width:"130"},{prop:"status",label:"启用状态",isRender:!0,width:"130"}],n=(0,x.yj)(),C=(0,m.f3)("$baseTableHeight"),S=(0,g.iH)(null),k=(0,g.iH)({selectItems:"extend",current:1,limit:10,hostids:n?.query?.templateid,expandExpression:!0,filter:{priority:""},search:{description:""}}),W=(0,g.qj)({height:C(3)-30,loading:!1,total:0,selectRows:[],alarmIndicatorData:[]}),R=async()=>{W.loading=!0,W.alarmIndicatorData=[],(0,b.UX)(k.value).then((e=>{!e.error&&e.length&&(W.alarmIndicatorData=e,W.total=Number(e[0]?.total||"0")),W.loading=!1})).catch((e=>{console.log(e),W.loading=!1}))},U=e=>{k.value.limit=e,R()},Z=e=>{k.value.current=e,R()},I=()=>{k.value.current=1,R()},V=e=>{W.selectRows=e},z=()=>{W.height=(0,w.NC)(S,1/3+8.125,"remToPx")};function H(){const e=[];W.selectRows.forEach((t=>{e.push(t.triggerid)})),(0,b.tE)(e).then((()=>{R()}))}function N(e,t){const n=[];if(e?.userid?n.push({triggerid:e.triggerid,enable:e.isopen}):W.selectRows.forEach((e=>{n.push({triggerid:e.triggerid,enable:t})})),!n.length)return!1;(0,b.Rg)(n).then((e=>{e.error||n.length&&R()})).catch((e=>{console.log("err :>> ",e),R()}))}return(0,m.wF)((()=>{window.addEventListener("resize",z)})),(0,m.Ah)((()=>{window.removeEventListener("resize",z)})),(0,m.bv)((()=>{z(),R()})),(e,n)=>{const w=p.BT,b=p.ElSelect,x=d.nH,C=c.EZ,R=d.ly,z=s.Z,j=(0,m.up)("vab-icon"),D=u.ElButton,E=i.Df,$=i.o2,B=i.YK,q=l.Z,A=r.Z,F=o.OX,L=a.Q0;return(0,m.wg)(),(0,m.iD)("div",{ref_key:"alarmRef",ref:S,class:"alarm-indicato-container"},[(0,m.Wm)(A,null,{default:(0,m.w5)((()=>[(0,m.Wm)(z,{span:12},{default:(0,m.w5)((()=>[(0,m.Wm)(R,{class:"query-info-form",inline:"","label-width":"0px",onSubmit:n[2]||(n[2]=(0,f.iM)((()=>{}),["prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(x,{label:"",class:"form-status"},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{modelValue:(0,g.SU)(k).filter.priority,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,g.SU)(k).filter.priority=e),onChange:I},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)((0,g.SU)(y.h),((e,t)=>((0,m.wg)(),(0,m.j4)(w,{key:t,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,m.Wm)(x,{label:"",class:"form-name"},{default:(0,m.w5)((()=>[(0,m.Wm)(C,{modelValue:(0,g.SU)(k).search.description,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,g.SU)(k).search.description=e),placeholder:"请输入内容搜索",clearable:"",onChange:I},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),(0,m.Wm)(q,{class:"alarm-indicato-form-right",span:12},{default:(0,m.w5)((()=>[(0,m.Wm)(B,null,{dropdown:(0,m.w5)((()=>[(0,m.Wm)($,null,{default:(0,m.w5)((()=>[(0,m.Wm)(E,{disabled:!(0,g.SU)(W).selectRows.length,onClick:n[3]||(n[3]=e=>N(null,!0))},{default:(0,m.w5)((()=>[(0,m.Uk)(" 批量开启 ")])),_:1},8,["disabled"]),(0,m.Wm)(E,{disabled:!(0,g.SU)(W).selectRows.length,onClick:n[4]||(n[4]=e=>N(null,!1))},{default:(0,m.w5)((()=>[(0,m.Uk)(" 批量关闭 ")])),_:1},8,["disabled"])])),_:1})])),default:(0,m.w5)((()=>[(0,m.Wm)(D,null,{default:(0,m.w5)((()=>[(0,m.Uk)(" 批量操作 "),(0,m.Wm)(j,{icon:"arrow-down-s-line"})])),_:1})])),_:1}),(0,m.Wm)(D,{disabled:!(0,g.SU)(W).selectRows.length,onClick:H},{default:(0,m.w5)((()=>[(0,m.Uk)(" 恢复默认阈值 ")])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,m.Wm)(v["default"],{"max-height":(0,g.SU)(W).height,"list-data":(0,g.SU)(W).alarmIndicatorData,"column-list":t,"class-name":"alarm-table","list-loading":(0,g.SU)(W).loading,total:(0,g.SU)(W).total,"is-index":!0,"page-no":(0,g.SU)(k).current,"page-size":(0,g.SU)(k).limit,onSizeChange:U,onCurrentChange:Z,onSelectRows:V},{items:(0,m.w5)((({row:e})=>[(0,m.Uk)((0,h.zw)(e.items[0]?.name||"---"),1)])),priority:(0,m.w5)((({row:t})=>[(0,m._)("span",{class:(0,h.C_)("priority-"+t.priority),onClick:n=>e.detailEvent(t,"alarm")},(0,h.zw)(t.priority_str||"---"),11,_)])),status:(0,m.w5)((({row:e})=>[(0,m.Wm)(L,{content:e.isopen?"点击禁用":"点击启用",enterable:!1,placement:"top"},{default:(0,m.w5)((()=>[(0,m.Wm)(F,{modelValue:e.isopen,"onUpdate:modelValue":t=>e.isopen=t,"active-value":!0,"inactive-value":!1,onChange:t=>N(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["content"])])),_:1},8,["max-height","list-data","list-loading","total","page-no","page-size"])],512)}}};function S(e){e.__source="src/views/system/template-management/alarm-indicator/AlarmIndicatorAll.vue"}var k=n(83744);"function"===typeof S&&S(C);const W=(0,k.Z)(C,[["__scopeId","data-v-2cbc93da"]]);var R=W}}]);