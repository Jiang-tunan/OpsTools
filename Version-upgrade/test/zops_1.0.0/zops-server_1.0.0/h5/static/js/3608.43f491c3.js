/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[3608],{69407:function(e,t,l){l.r(t),l.d(t,{default:function(){return z}});var a=l(28314),o=(l(24549),l(7436),l(74842)),n=(l(94851),l(47546)),i=(l(49653),l(60717),l(21211)),r=(l(12791),l(88027)),s=(l(66302),l(737),l(29814)),d=(l(77632),l(49530)),w=(l(80773),l(6715),l(24434)),m=(l(98476),l(25099),l(23202)),p=(l(61033),l(66252)),u=l(3577);const c={class:"roles-container"},f={key:0},y={key:0},g={key:0},k={key:0},_={key:0},h={key:0};function b(e,t,l,b,W,v){const U=m.v,j=w.dn,C=w.KD,D=i.nH,A=d.ElButton,q=s.Ks,$=r.QQ,x=r.Lf,E=i.ly,z=n.$Y,H=(0,p.up)("vab-icon"),I=n.eI,T=o.Dv,K=a.dq,R=(0,p.Q2)("permissions");return(0,p.wg)(),(0,p.iD)("div",c,[e.loginInterception?(0,p.kq)("",!0):((0,p.wg)(),(0,p.j4)(U,{key:0,closable:!1,"show-icon":"",title:"检测到您当前的登录拦截已关闭，无法模拟切换角色功能，请在src/config/setting.config.js中配置loginInterception为ture，开启登录拦截",type:"success"})),(0,p.Wm)(U,{closable:!1,"show-icon":"",title:`当前路由模式为：{ authentication:${e.authentication} }，是否开启角色权限控制功能：{ rolesControl:${e.rolesControl} }`,type:"success"},null,8,["title"]),(0,p.Wm)(E,{"label-position":"top","label-width":"140px",model:e.form},{default:(0,p.w5)((()=>[(0,p.Wm)(D,{label:"账号切换"},{default:(0,p.w5)((()=>[(0,p.Wm)(C,{modelValue:e.form.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.account=t),onChange:e.handleChangeRole},{default:(0,p.w5)((()=>[(0,p.Wm)(j,{label:"admin"},{default:(0,p.w5)((()=>[(0,p.Uk)("admin")])),_:1}),(0,p.Wm)(j,{label:"editor"},{default:(0,p.w5)((()=>[(0,p.Uk)("editor")])),_:1}),(0,p.Wm)(j,{label:"test"},{default:(0,p.w5)((()=>[(0,p.Uk)("test")])),_:1})])),_:1},8,["modelValue","onChange"])])),_:1}),(0,p.Wm)(D,{label:"过期Token模拟访问(令牌失效5s)"},{default:(0,p.w5)((()=>[(0,p.Wm)(A,{type:"primary",onClick:e.handleRefreshToken},{default:(0,p.w5)((()=>[(0,p.Uk)(" 点击模拟token过期访问接口，无痛刷新 ")])),_:1},8,["onClick"])])),_:1}),(0,p.Wm)(D,{label:"当前账号"},{default:(0,p.w5)((()=>[(0,p.Wm)(x,{border:"",column:3,direction:"vertical"},{default:(0,p.w5)((()=>[(0,p.Wm)($,null,{label:(0,p.w5)((()=>[(0,p.Uk)("角色")])),default:(0,p.w5)((()=>[(0,p.Wm)(q,null,{default:(0,p.w5)((()=>[(0,p.Uk)((0,u.zw)(JSON.stringify(e.role)),1)])),_:1})])),_:1}),(0,p.Wm)($,null,{label:(0,p.w5)((()=>[(0,p.Uk)("权限点")])),default:(0,p.w5)((()=>[(0,p.Wm)(q,null,{default:(0,p.w5)((()=>[(0,p.Uk)((0,u.zw)(JSON.stringify(e.permission)),1)])),_:1})])),_:1}),(0,p.Wm)($,null,{label:(0,p.w5)((()=>[(0,p.Uk)("token")])),default:(0,p.w5)((()=>[(0,p.Wm)(q,null,{default:(0,p.w5)((()=>[(0,p.Uk)((0,u.zw)(e.token),1)])),_:1})])),_:1})])),_:1})])),_:1}),(0,p.Wm)(D,{label:"按钮级角色"},{default:(0,p.w5)((()=>[(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["Admin"]角色的按钮 ')])),_:1})),[[R,["Admin"]]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 未拥有["Admin"]角色的按钮 ')])),_:1})),[[R,{role:["Admin"],mode:"except"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["Editor"]角色的按钮 ')])),_:1})),[[R,["Editor"]]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 未拥有["Editor"]角色的按钮 ')])),_:1})),[[R,{role:["Editor"],mode:"except"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 同时拥有["Admin","Editor"]角色的按钮 ')])),_:1})),[[R,{role:["Admin","Editor"],mode:"allOf"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["Test"]角色的按钮 ')])),_:1})),[[R,["Test"]]])])),_:1}),(0,p.Wm)(D,{label:"按钮级权限点"},{default:(0,p.w5)((()=>[(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["read:system"]权限点的按钮 ')])),_:1})),[[R,{permission:["read:system"]}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(" 未拥有[\"'read:system'\"]权限点的按钮 ")])),_:1})),[[R,{permission:["read:system"],mode:"except"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["write:system"]权限点的按钮 ')])),_:1})),[[R,{permission:["write:system"]}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 未拥有["write:system"]权限点的按钮 ')])),_:1})),[[R,{permission:["write:system"],mode:"except"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["delete:system"]权限点的按钮 ')])),_:1})),[[R,{permission:["delete:system"]}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 未拥有["delete:system"]权限点的按钮 ')])),_:1})),[[R,{permission:["delete:system"],mode:"except"}]])])),_:1}),(0,p.Wm)(D,{label:"按钮级角色&权限点"},{default:(0,p.w5)((()=>[(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["Admin"]角色或者["delete:system"]权限点的按钮 ')])),_:1})),[[R,{role:["Admin"],permission:["delete:system"]}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"primary"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 拥有["Editor"]角色和["read:system"]权限点的按钮 ')])),_:1})),[[R,{role:["Editor"],permission:["read:system"],mode:"allOf"}]]),(0,p.wy)(((0,p.wg)(),(0,p.j4)(A,{type:"danger"},{default:(0,p.w5)((()=>[(0,p.Uk)(' 未拥有["Admin"]和["delete:system"]权限点的按钮 ')])),_:1})),[[R,{role:["Admin"],permission:["delete:system"],mode:"except"}]])])),_:1}),(0,p.Wm)(D,{label:"路由"})])),_:1},8,["model"]),(0,p.Wm)(K,{gutter:20},{default:(0,p.w5)((()=>[(0,p.Wm)(T,{span:24},{default:(0,p.w5)((()=>[(0,p.Wm)(I,{border:"",data:e.tableData,"default-expand-all":"","row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:(0,p.w5)((()=>[(0,p.Wm)(z,{align:"center",label:"name",prop:"name","show-overflow-tooltip":"",width:"220"}),(0,p.Wm)(z,{align:"center",label:"path",prop:"path","show-overflow-tooltip":"",width:"220"}),(0,p.Wm)(z,{align:"center",label:"component",prop:"component","show-overflow-tooltip":"",width:"220"}),(0,p.Wm)(z,{align:"center",label:"redirect",prop:"redirect","show-overflow-tooltip":"",width:"220"}),(0,p.Wm)(z,{align:"center",label:"title",prop:"meta.title","show-overflow-tooltip":""}),(0,p.Wm)(z,{align:"center",label:"icon","show-overflow-tooltip":""},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",f,[e.meta.icon?((0,p.wg)(),(0,p.j4)(H,{key:0,icon:e.meta.icon},null,8,["icon"])):(0,p.kq)("",!0)])):(0,p.kq)("",!0)])),_:1}),(0,p.Wm)(z,{align:"center",label:"noClosable","show-overflow-tooltip":""},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",y,(0,u.zw)(e.meta.noClosable||!1),1)):(0,p.kq)("",!0)])),_:1}),(0,p.Wm)(z,{align:"center",label:"noKeepAlive","show-overflow-tooltip":"",width:"100"},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",g,[e.meta.noKeepAlive?((0,p.wg)(),(0,p.iD)(p.HY,{key:1},[(0,p.Uk)("true")],64)):((0,p.wg)(),(0,p.iD)(p.HY,{key:0},[(0,p.Uk)("false")],64))])):(0,p.kq)("",!0)])),_:1}),(0,p.Wm)(z,{align:"center",label:"badge","show-overflow-tooltip":""},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",k,(0,u.zw)(e.meta.badge),1)):(0,p.kq)("",!0)])),_:1}),(0,p.Wm)(z,{align:"center",label:"isCustomSvg","show-overflow-tooltip":"",width:"140"},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",_,(0,u.zw)(e.meta.isCustomSvg||!1),1)):(0,p.kq)("",!0)])),_:1}),(0,p.Wm)(z,{align:"center",label:"tabHidden","show-overflow-tooltip":""},{default:(0,p.w5)((({row:e})=>[e.meta?((0,p.wg)(),(0,p.iD)("span",h,[e.meta.tabHidden?((0,p.wg)(),(0,p.iD)(p.HY,{key:1},[(0,p.Uk)("true")],64)):((0,p.wg)(),(0,p.iD)(p.HY,{key:0},[(0,p.Uk)("false")],64))])):(0,p.kq)("",!0)])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})])}var W=l(45743),v=l(30582),U=l(83798),j=(l(96183),l(19635),l(88903)),C=l(15623),D=l(2262),A=l(47720),q=(0,p.aZ)({name:"Permission",setup(){const e=(0,p.f3)("$baseLoading"),t=(0,p.f3)("$baseMessage"),l=(0,W.i)(),{role:a,permission:o}=(0,A.Jk)(l),n=(0,v.L)(),{username:i,token:r}=(0,A.Jk)(n),s=(0,D.qj)({form:{account:i.value},tableData:[],res:[],authentication:U.authentication,loginInterception:U.loginInterception,rolesControl:U.rolesControl}),d=async()=>{e(0,"正在切换账号请稍后..."),await localStorage.setItem(U.tokenTableName,`${s.form.account}-token-${C.Random.guid()}-${(new Date).getTime()}`),await location.reload()},w=async()=>{const{msg:e}=await(0,j.z)();t(`${e}: [${r.value}] `,"success")};return{...(0,D.BK)(s),role:a,permission:o,username:i,token:r,handleChangeRole:d,handleRefreshToken:w}}});function $(e){e.__source="src/views/vab/permission/index.vue"}var x=l(83744);"function"===typeof $&&$(q);const E=(0,x.Z)(q,[["render",b],["__scopeId","data-v-803915f8"]]);var z=E}}]);