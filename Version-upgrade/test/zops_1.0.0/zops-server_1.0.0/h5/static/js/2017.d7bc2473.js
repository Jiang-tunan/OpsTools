/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[2017,9527,1463],{79803:function(e,a,l){l.d(a,{Fh:function(){return o},ZC:function(){return d},cv:function(){return n},dW:function(){return i},i0:function(){return r},mY:function(){return u}});var t=l(52806);function n(e){return(0,t.Z)({params:{method:"problem.get",data:{selectAcknowledges:"extend",selectTags:"extend",selectSuppressionData:"extend",sortfield:"clock",sortorder:"DESC",...e}}})}function o(e){return(0,t.Z)({params:{method:"event.acknowledge",data:e}})}function r(e){return(0,t.Z)({params:{method:"action.create",data:e}})}function d(e){return(0,t.Z)({params:{method:"action.update",data:e}})}function u(e){return(0,t.Z)({params:{method:"action.get",data:e}})}function i(e){return(0,t.Z)({params:{method:"action.delete",data:e}})}},54009:function(e,a,l){l.r(a),l.d(a,{default:function(){return S}});var t=l(49530),n=(l(24549),l(80773),l(21211)),o=(l(12791),l(38492)),r=(l(94687),l(79303),l(24434)),d=(l(98476),l(35568),l(46538)),u=(l(20822),l(6715),l(57847)),i=(l(43872),l(66252)),m=l(2262),s=l(39049),c=l(79803);const f=e=>((0,i.dD)("data-v-1b68c228"),e=e(),(0,i.Cn)(),e),g={key:0,class:"ignore-time"},p=f((()=>(0,i._)("div",{class:"tips"},"* 注意:开启后,将不再收到邮件、短信等方式通知",-1)));var k={__name:"HandlAlarms",props:{alarmInfoData:{type:Object,default:()=>({})},title:{type:String,default:"处理告警"},visible:{type:Boolean,default:!1}},emits:["cancel","submit"],setup(e,{emit:a}){const f=e,k=(0,i.RC)((()=>Promise.all([l.e(1108),l.e(6860),l.e(5652)]).then(l.bind(l,12541)))),v=(0,i.f3)("$baseMessage"),w=(0,i.f3)("$baseConfirm"),y=(0,m.iH)(null),{title:S,visible:b,alarmInfoData:U}=(0,m.BK)(f);let _={};const h=[{name:"6小时",key:"6"},{name:"12小时",key:"12"},{name:"24小时",key:"24"}];function V(){JSON.stringify(_)===JSON.stringify(U.value)?a("cancel"):w("已经修改内容，你确定要关闭吗",null,"delete",(()=>{a("cancel")}))}function W(){y.value.validate((e=>{if(e){if(JSON.stringify(_)===JSON.stringify(U.value))return!1;const e={eventids:U.value.eventid};_.message!==U.value.message&&(e.message=U.value.message),U.value.ignoreAlarm&&U.value.alert_delay!=_.alert_delay&&(e.alert_delay=U.value.alert_delay),e.action=JSON.stringify(_.acknowledge)!==JSON.stringify(U.value.acknowledge)?2:JSON.stringify(_.ignoreAlarm)!==JSON.stringify(U.value.ignoreAlarm)?20:_.message===U.value.message?"":4,(0,c.Fh)(e).then((e=>{e?.error||(v("编辑成功","success"),a("submit"),a("cancel"))}))}}))}return(0,i.bv)((()=>{_=JSON.parse(JSON.stringify(U.value))})),(e,a)=>{const l=u.EZ,c=n.nH,f=d.ElCheckbox,v=r.rh,w=r.KD,_=o.BT,O=o.ElSelect,A=n.ly,C=t.ElButton;return(0,i.wg)(),(0,i.j4)((0,m.SU)(s["default"]),{modelValue:(0,m.SU)(b),"onUpdate:modelValue":[a[5]||(a[5]=e=>(0,m.dq)(b)?b.value=e:null),V],title:(0,m.SU)(S),width:"35rem"},{footer:(0,i.w5)((()=>[(0,i.Wm)(C,{onClick:V},{default:(0,i.w5)((()=>[(0,i.Uk)("取消")])),_:1}),(0,i.Wm)(C,{type:"primary",onClick:W},{default:(0,i.w5)((()=>[(0,i.Uk)("确定")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(A,{ref_key:"alarmFormRef",ref:y,"label-position":"top",model:(0,m.SU)(U)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{label:"问题名称",props:"name"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,m.SU)(U).name,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,m.SU)(U).name=e),modelModifiers:{trim:!0},placeholder:"问题名称",disabled:"",maxlength:"100"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{label:"备注",prop:"message"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,m.SU)(U).message,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,m.SU)(U).message=e),modelModifiers:{trim:!0},rows:3,maxlength:"255",type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{label:"确认告警",prop:"acknowledge"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{modelValue:(0,m.SU)(U).acknowledge,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,m.SU)(U).acknowledge=e),label:"是",indeterminate:!1},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,{label:"是否暂时忽略告警",prop:"ignoreAlarm"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:(0,m.SU)(U).ignoreAlarm,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,m.SU)(U).ignoreAlarm=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{label:!1},{default:(0,i.w5)((()=>[(0,i.Uk)("否")])),_:1}),(0,i.Wm)(v,{label:!0},{default:(0,i.w5)((()=>[(0,i.Uk)("是")])),_:1})])),_:1},8,["modelValue"]),(0,m.SU)(U).ignoreAlarm?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(O,{modelValue:(0,m.SU)(U).delay,"onUpdate:modelValue":a[4]||(a[4]=e=>(0,m.SU)(U).delay=e),placeholder:"请选择忽略时间",clearable:""},{default:(0,i.w5)((()=>[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(h,(e=>(0,i.Wm)(_,{key:e.key,label:e.name,value:e.key},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])):(0,i.kq)("",!0),p])),_:1}),(0,m.SU)(U)?.acknowledges?.length?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"操作日志",prop:"acknowledges"},{default:(0,i.w5)((()=>[(0,i.Wm)((0,m.SU)(k),{acknowledges:(0,m.SU)(U).acknowledges},null,8,["acknowledges"])])),_:1})):(0,i.kq)("",!0)])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};function v(e){e.__source="src/components/HandlAlarms.vue"}var w=l(83744);"function"===typeof v&&v(k);const y=(0,w.Z)(k,[["__scopeId","data-v-1b68c228"]]);var S=y}}]);