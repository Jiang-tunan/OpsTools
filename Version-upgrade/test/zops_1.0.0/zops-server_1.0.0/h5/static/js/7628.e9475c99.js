/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7628],{22076:function(e,t,n){function a(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function i(e,t,n){let i=0;return i="remToPx"===n?a(t):t,e?.value?.offsetHeight?e.value.offsetHeight-i:e?.offsetHeight?e.offsetHeight-i:void 0}function s(e,t){const n=new Map;for(const a of e)n.has(a[t])||n.set(a[t],a);return[...n.values()]}function m(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function l(e){let t=parseInt(e),n=0,a=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(a=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:a}}n.d(t,{BE:function(){return m},NC:function(){return i},Nb:function(){return s},ZC:function(){return l}})},7628:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(64654),i=(n(24549),n(16135),n(28314)),s=(n(7436),n(38492)),m=(n(94687),n(79303),n(16652)),l=(n(38602),n(21211)),o=(n(12791),n(6715),n(95301)),r=(n(61620),n(50952)),c=(n(83646),n(49530)),u=(n(80773),n(8734)),d=(n(7553),n(74842)),p=(n(94851),n(66252)),f=n(3577),v=n(2262),h=n(49963),k=n(83798),w=n(18907),T=n(22076),b=n(7605),y=n(58109),g=n(17052),_=n(47720),S=n(22201);const x=e=>((0,p.dD)("data-v-0b4eaee8"),e=e(),(0,p.Cn)(),e),W={class:"btns-item time-btns"},D={class:"time-num"},U={class:"times-text"},C=x((()=>(0,p._)("span",{class:"time-separator"},"To",-1))),R={class:"times-text"},F={class:"time-select-content"},I={class:"time-select-left"},H={class:"more-screen-time"},M=x((()=>(0,p._)("div",{class:"time-left-title"},"更多筛选时间",-1))),V=["onClick"],z={class:"custom-time"},$=x((()=>(0,p._)("div",{class:"time-left-title"},"自定义时间",-1))),B={class:"time-select-right"},E=["onClick"],q={class:"time-num"},j={class:"time-text"},A=["src","height"],K=316224e5;var L={__name:"MonitorChart",setup(e){const t=[{name:"Off",key:""},{name:"5秒",key:"5s"},{name:"10秒",key:"10s"},{name:"30秒",key:"30s"},{name:"1分钟",key:"1m"},{name:"5分钟",key:"5m"},{name:"15分钟",key:"15m"},{name:"30分钟",key:"30m"},{name:"1小时",key:"1h"},{name:"2小时",key:"2h"},{name:"1天",key:"1d"}],n=[{value:5,key:"5m",name:"最近5分钟"},{value:15,key:"15m",name:"最近16分钟"},{value:30,key:"30m",name:"最近30分钟"},{value:60,key:"1h",name:"最近1小时"},{value:180,key:"3h",name:"最近3小时"},{value:360,key:"6h",name:"最近6小时"},{value:720,key:"12h",name:"最近12小时"},{value:1440,key:"1d",name:"最近1天"},{value:4320,key:"3d",name:"最近3天"}],x=[{name:"今日",key:"today"},{name:"昨日",key:"yesterday"},{name:"本周",key:"thisWeek"},{name:"上周",key:"lastWeek"},{name:"本月",key:"currentMonth"},{name:"上月",key:"lastMonth"}],L=(e,t,n)=>{t?se.customTime.endTime?se.customTime.endTime>t?n():n(new Error((0,b.Iu)("开始时间要小于结束时间"))):n():n(new Error((0,b.Iu)("请输入开始时间")))},O=(e,t,n)=>{t?se.customTime.startTime?se.customTime.startTime<t?n():n(new Error((0,b.Iu)("结束时间要大于开始时间"))):n():n(new Error((0,b.Iu)("请输入结束时间")))},X={startTime:[{validator:L,trigger:"blur"}],endTime:[{validator:O,trigger:"blur"}]},J=e=>{const t=Date.now()-K;return e.getTime()>Date.now()||e.getTime()<t},N=(0,y.F)(),{theme:P}=(0,_.Jk)(N),Y=(0,S.yj)(),G=(0,v.iH)(0),Z=(0,v.iH)(!0),Q=(0,v.iH)(null),ee=(0,v.iH)(null),te=(0,v.iH)(null),ne=(0,v.iH)(null),ae=(0,v.iH)(null),ie=(0,v.iH)(""),se=(0,v.qj)({hostData:{},refresh:"",isFull:!0,popoverVisible:!1,timestamp:{end:null,start:null},selectTime:{endTime:null,startTime:null,timeRange:15,timeInterval:"15m"},customTime:{startTime:"",endTime:""},btnDisabled:{plusBtn:!0,minusBtn:!1},initSrc:`${k.chartURL}/d/abb4f519-eb05-4758-a6c2-9b1bfb6166a9/linux-snmp?orgId=1`});(0,p.YP)((()=>P.value.themeType),(()=>{oe()}),{immediate:!0,deep:!0});const me=()=>{se.isFull=!se.isFull;const e=se.isFull?-17.25:1;G.value=(0,T.NC)(ee,e,"remToPx")};function le(){(0,w.XF)({output:["name","groups","hostid"],selectGroups:["groupid","name"],hostids:[Y.query.hostid]}).then((e=>{e.error||(se.hostData=e[0]||{},re()),Z.value=!1})).catch((e=>{console.log(e)}))}function oe(){se.hostData?.name&&(ie.value=`${se.initSrc}&theme=${P.value.themeType}&from=${se.timestamp.start}&to=${se.timestamp.end}&kiosk&var-group=${se.hostData?.name}&var-host=${se.hostData?.groups[0]?.name}&refresh=${se.refresh}`)}function re(){const e=Date.now();se.timestamp.end=e-e%600,se.timestamp.start=se.timestamp.end-60*se.selectTime.timeRange*1e3,ke()}function ce(){se.isFull?de():ue()}function ue(){const e=Q.value.requestFullScreen||Q.value.webkitRequestFullScreen||Q.value.mozRequestFullScreen||Q.value.msRequestFullScreen;let t=null;"undefined"!=typeof e&&e?e.call(Q.value):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),t&&t.SendKeys("{F11}"))}function de(){const e=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.exitFullScreen;let t=null;"undefined"!=typeof e&&e?e.call(document):"undefined"!=typeof window.ActiveXObject&&(t=new ActiveXObject("WScript.Shell"),null!=t&&t.SendKeys("{F11}"))}function pe(){const e=60*se.selectTime.timeRange*1e3;se.timestamp.end=se.timestamp.end-e,se.timestamp.start=se.timestamp.start-e,se.btnDisabled.minusBtn=!(se.timestamp.start-e>Date.now()-K),se.btnDisabled.plusBtn=!(se.timestamp.end+e<Date.now()),ke()}function fe(){const e=60*se.selectTime.timeRange*1e3;se.timestamp.end=se.timestamp.end+e,se.timestamp.start=se.timestamp.start+e,se.timestamp.end,se.btnDisabled.plusBtn=!(se.timestamp.end+e<Date.now()),se.btnDisabled.minusBtn=!(se.timestamp.start-e>Date.now()-K),ke()}function ve(e){se.selectTime.timeRange=e.value,se.selectTime.timeInterval=e.key,re()}function he(e){let t=!1;switch(e.key){case"today":se.timestamp.start=(0,g.rG)(),se.timestamp.end=Date.now();break;case"yesterday":{t=!0,se.selectTime.timeRange=1440,se.selectTime.timeInterval="1d";const e=(0,g.Ki)();se.timestamp.start=e[0],se.timestamp.end=e[1];break}case"thisWeek":se.timestamp.start=(0,g.tp)(),se.timestamp.end=Date.now();break;case"lastWeek":{t=!0,se.selectTime.timeRange=10080,se.selectTime.timeInterval="7d";const e=(0,g.ej)();se.timestamp.start=e[0],se.timestamp.end=e[1];break}case"currentMonth":se.timestamp.start=(0,g.lJ)(),se.timestamp.end=Date.now();break;case"lastMonth":{t=!0;const e=(0,g.Nw)();se.selectTime.timeRange=1440*e,se.selectTime.timeInterval=`${e}d`;const n=(0,g.JH)();se.timestamp.start=n[0],se.timestamp.end=n[1];break}}ke(t)}function ke(e){if(se.selectTime.endTime=(0,g.V3)(se.timestamp.end,"-"),se.selectTime.startTime=(0,g.V3)(se.timestamp.start,"-"),!e){const e=se.timestamp.end-se.timestamp.start;if(se.selectTime.timeRange=Math.floor(e/6e4),1440<=se.selectTime.timeRange){const e=Math.floor(se.selectTime.timeRange/1440);se.selectTime.timeInterval=`${e}d`}else if(60<=se.selectTime.timeRange){const e=Math.floor(se.selectTime.timeRange/60);se.selectTime.timeInterval=`${e}h`}else se.selectTime.timeInterval=`${se.selectTime.timeRange}m`}se.popoverVisible=!1,oe()}function we(){ne.value.validate((e=>{e&&(se.timestamp.end=se.customTime.endTime.getTime(),se.timestamp.start=se.customTime.startTime.getTime(),ke())}))}return(0,p.wF)((()=>{window.addEventListener("resize",me)})),(0,p.Ah)((()=>{window.removeEventListener("resize",me)})),(0,p.bv)((()=>{le(),me();const e=te.value.contentWindow.document;e.classList&&e.classList.remove("grid-drag-cancel"),te.value.onload=function(){te.value.contentWindow.postMessage({showMenu:!1},"*")}})),(e,k)=>{const w=d.Dv,T=(0,p.up)("Monitor"),b=u.gn,y=c.ElButton,g=r.Q0,_=(0,p.up)("ArrowLeft"),S=o.iJ,K=l.nH,L=l.ly,O=m.$t,N=(0,p.up)("ArrowRight"),P=(0,p.up)("Refresh"),Y=s.BT,me=s.ElSelect,le=i.dq,re=a.t;return(0,p.wy)(((0,p.wg)(),(0,p.iD)("div",{ref_key:"monitorChartRef",ref:Q,class:(0,f.C_)([{"full-screen":(0,v.SU)(se).isFull},"chart-container"])},[(0,p.Wm)(le,{class:"chart-operation"},{default:(0,p.w5)((()=>[(0,p.Wm)(w,{class:"chart-title",span:12},{default:(0,p.w5)((()=>[(0,p.Uk)((0,f.zw)((0,v.SU)(se).hostData?.name),1)])),_:1}),(0,p.Wm)(w,{class:"operation-content",align:"right",span:12},{default:(0,p.w5)((()=>[(0,p.Wm)(g,{content:(0,v.SU)(se).isFull?"全屏模式":"退出全屏",placement:"bottom",effect:"light"},{default:(0,p.w5)((()=>[(0,p.Wm)(y,{class:(0,f.C_)([{"active-btn":(0,v.SU)(se).isFull},"btns-item"]),onClick:ce},{default:(0,p.w5)((()=>[(0,p.Wm)(b,null,{default:(0,p.w5)((()=>[(0,p.Wm)(T)])),_:1})])),_:1},8,["class"])])),_:1},8,["content"]),(0,p._)("div",W,[(0,p.Wm)(y,{disabled:(0,v.SU)(se).btnDisabled.minusBtn,class:"time-arrow-left",onClick:pe},{default:(0,p.w5)((()=>[(0,p.Wm)(b,{size:"0.88rem"},{default:(0,p.w5)((()=>[(0,p.Wm)(_)])),_:1})])),_:1},8,["disabled"]),(0,p.Wm)(O,{ref_key:"timePopoverRef",ref:ae,width:"26.25rem",visible:(0,v.SU)(se).popoverVisible,trigger:"click","popper-class":"time-select-popover"},{reference:(0,p.w5)((()=>[(0,p.Wm)(y,{onClick:k[0]||(k[0]=e=>(0,v.SU)(se).popoverVisible=!(0,v.SU)(se).popoverVisible)},{default:(0,p.w5)((()=>[(0,p._)("span",D,(0,f.zw)((0,v.SU)(se).selectTime.timeInterval),1),(0,p._)("span",U,(0,f.zw)((0,v.SU)(se).selectTime.startTime),1),C,(0,p._)("span",R,(0,f.zw)((0,v.SU)(se).selectTime.endTime),1)])),_:1})])),default:(0,p.w5)((()=>[(0,p._)("div",F,[(0,p._)("div",I,[(0,p._)("div",H,[M,(0,p._)("ul",null,[((0,p.wg)(),(0,p.iD)(p.HY,null,(0,p.Ko)(x,(e=>(0,p._)("li",{key:e.key,class:"time-num",onClick:t=>he(e)},(0,f.zw)(e.name),9,V))),64))])]),(0,p._)("div",z,[$,(0,p.Wm)(L,{ref_key:"customFormRef",ref:ne,model:(0,v.SU)(se).customTime,rules:X,"label-width":"0"},{default:(0,p.w5)((()=>[(0,p.Wm)(K,{prop:"startTime",class:"form-item-time"},{default:(0,p.w5)((()=>[(0,p.Wm)(S,{modelValue:(0,v.SU)(se).customTime.startTime,"onUpdate:modelValue":k[1]||(k[1]=e=>(0,v.SU)(se).customTime.startTime=e),type:"datetime",class:"data-picker-time",placeholder:"请选择开始时间","disabled-date":J,onClick:k[2]||(k[2]=(0,h.iM)((()=>{}),["stop"]))},null,8,["modelValue"])])),_:1}),(0,p.Wm)(K,{prop:"endTime",class:"form-item-time"},{default:(0,p.w5)((()=>[(0,p.Wm)(S,{modelValue:(0,v.SU)(se).customTime.endTime,"onUpdate:modelValue":k[3]||(k[3]=e=>(0,v.SU)(se).customTime.endTime=e),type:"datetime",class:"data-picker-time",placeholder:"请选择结束时间","disabled-date":J,onClick:k[4]||(k[4]=(0,h.iM)((()=>{}),["stop"]))},null,8,["modelValue"])])),_:1}),(0,p.Wm)(K,null,{default:(0,p.w5)((()=>[(0,p.Wm)(y,{type:"primary",onClick:we},{default:(0,p.w5)((()=>[(0,p.Uk)(" 应用 ")])),_:1})])),_:1})])),_:1},8,["model"])])]),(0,p._)("div",B,[(0,p._)("ul",null,[((0,p.wg)(),(0,p.iD)(p.HY,null,(0,p.Ko)(n,(e=>(0,p._)("li",{key:e.key,class:"time-selece-li",onClick:t=>ve(e)},[(0,p._)("span",q,(0,f.zw)(e.key),1),(0,p._)("span",j,(0,f.zw)(e.name),1)],8,E))),64))])])])])),_:1},8,["visible"]),(0,p.Wm)(y,{disabled:(0,v.SU)(se).btnDisabled.plusBtn,class:"time-arrow-right",onClick:fe},{default:(0,p.w5)((()=>[(0,p.Wm)(b,{size:"0.88rem"},{default:(0,p.w5)((()=>[(0,p.Wm)(N)])),_:1})])),_:1},8,["disabled"])]),(0,p.Wm)(g,{content:"刷新",placement:"bottom",effect:"light"},{default:(0,p.w5)((()=>[(0,p.Wm)(y,{class:"btns-item",onClick:oe},{default:(0,p.w5)((()=>[(0,p.Wm)(b,{size:"0.88rem"},{default:(0,p.w5)((()=>[(0,p.Wm)(P)])),_:1})])),_:1})])),_:1}),(0,p.Wm)(me,{modelValue:(0,v.SU)(se).refresh,"onUpdate:modelValue":k[5]||(k[5]=e=>(0,v.SU)(se).refresh=e),class:"btns-item",placeholder:"请选择刷新时间",clearable:"",filterable:"",onChange:oe},{default:(0,p.w5)((()=>[((0,p.wg)(),(0,p.iD)(p.HY,null,(0,p.Ko)(t,(e=>(0,p.Wm)(Y,{key:e.key,label:e.name,value:e.key},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,p._)("div",{ref_key:"chartRef",ref:ee,class:"chart-content"},[(0,p._)("iframe",{ref_key:"iframeRef",ref:te,src:(0,v.SU)(ie),width:"100%",height:(0,v.SU)(G),frameborder:"0"},null,8,A)],512)],2)),[[re,(0,v.SU)(Z)]])}}};function O(e){e.__source="src/views/monitoring-center/equipment-monitoring/device-monitor-info/MonitorChart.vue"}var X=n(83744);"function"===typeof O&&O(L);const J=(0,X.Z)(L,[["__scopeId","data-v-0b4eaee8"]]);var N=J}}]);