/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[8753,8743,9527,470],{5743:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(64654),l=(a(24549),a(16135),a(91067)),o=(a(78526),a(47546)),i=(a(49653),a(37965)),s=(a(82880),a(60717),a(66252)),r=a(3577),d=a(2262),u={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:a}){const u=(0,d.iH)(null),p=e=>{a("sizeChange",e)},m=e=>{a("currentChange",e)},c=e=>{a("selectRows",e)},f=e=>{a("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),u.value.toggleRowSelection(e))}return(0,s.dl)((()=>{u?.value?.doLayout()})),(0,s.bv)((()=>{u.value.doLayout()})),t({tableRef:u,toggleRowSelection:g}),(t,a)=>{const d=o.$Y,g=i.GT,h=o.eI,w=l.R,y=n.t;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.wy)(((0,s.wg)(),(0,s.j4)(h,{ref_key:"tableRef",ref:u,class:(0,r.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:c,onSortChange:f},{empty:(0,s.w5)((()=>[(0,s.Wm)(g,{description:"暂无数据"})])),default:(0,s.w5)((()=>[e.isSelection?((0,s.wg)(),(0,s.j4)(d,{key:0,fixed:"left",type:"selection",width:"55"})):(0,s.kq)("",!0),e.isIndex?((0,s.wg)(),(0,s.j4)(d,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,s.kq)("",!0),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.columnList,(e=>((0,s.wg)(),(0,s.j4)(d,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,s.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,s.w5)((()=>[(0,s.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,s.w5)((({row:a,$index:n,column:l})=>[(0,s.WI)(t.$slots,e.prop,{row:a,index:n,column:l})])),key:"1"}:{name:"default",fn:(0,s.w5)((({row:t})=>[(0,s._)("span",{class:"name"},(0,r.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[y,e.listLoading]]),e.isPagination?((0,s.wg)(),(0,s.j4)(w,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:m,onSizeChange:p},null,8,["current-page","layout","page-size","total"])):(0,s.kq)("",!0)],64)}}};function p(e){e.__source="src/components/CustomTable.vue"}var m=a(83744);"function"===typeof p&&p(u);const c=(0,m.Z)(u,[["__scopeId","data-v-bdd84b16"]]);var f=c},90626:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(49530),l=(a(24549),a(80773),a(46538)),o=(a(92719),a(20822),a(23202)),i=(a(61033),a(57658),a(66252)),s=a(2262),r=a(3577),d=a(39049),u=a(12688),p=a(5743),m=a(50837),c={__name:"FunPermissionSet",props:{roleData:{type:Object,default:()=>({})},title:{type:String,default:"功能权限设置"},type:{type:String,default:"new"},visible:{type:Boolean,default:!1}},emits:["cancel","confirm"],setup(e,{emit:t}){const a=e,c=(0,i.f3)("$baseMessage"),f=[{label:"模块",prop:"module",tooltip:!0,isRender:!0},{isHeaderRender:!0,label:"页面",prop:"page",tooltip:!0,isRender:!0,className:"page-column"}],{title:g,visible:h,roleData:w}=(0,s.BK)(a),y=(0,s.qj)({permissionVal:[],listLoading:!0,permissionInfoData:[],frontsData:[],checkAll:!1,isIndeterminate:!1}),b=({row:e,columnIndex:t})=>0===t?1===e.level?[e?.children?.length+1,1]:[0,0]:e?.children?.length?[0,0]:[1,1];function v(){t("cancel")}function k(){const e={name:w.value.name,description:w.value.description,roleid:w.value.roleid,type:"1",rules:{front:[]}};for(let t=0;t<w.value.permission.length;t++)e.rules.front.push({name:w.value.permission[t],status:"1"});(0,u.ul)(e).then((e=>{e?.error||(c("设置功能权限成功","success"),t("cancel"),t("confirm"))}))}function S(e,t){for(let a=0;a<e.length;a++){const n=e[a];n.meta.title&&!n.meta.hidden&&y.permissionInfoData.push({children:n.children,title:n.meta.title,name:n.name,level:t}),n.children&&S(n.children,2),(2===t||n.meta.title&&!n.children?.length)&&y.frontsData.push(n.name)}y.listLoading=!1}function _(){const e=w.value.permission.length;y.checkAll=e===y.frontsData.length,y.isIndeterminate=e>0&&e<y.frontsData.length}function C(e){w.value.permission=e?y.frontsData:[],y.isIndeterminate=!1}return(0,i.bv)((()=>{S(m.aP,1),(0,i.Y3)((()=>{_()}))})),(e,t)=>{const a=o.v,u=l.ElCheckbox,m=l.z5,c=n.ElButton;return(0,i.wg)(),(0,i.j4)((0,s.SU)(d["default"]),{modelValue:(0,s.SU)(h),"onUpdate:modelValue":[t[2]||(t[2]=e=>(0,s.dq)(h)?h.value=e:null),v],title:(0,s.SU)(g),width:"62.5rem",class:"fun-permission-set-dialog"},{footer:(0,i.w5)((()=>[(0,i.Wm)(c,{onClick:v},{default:(0,i.w5)((()=>[(0,i.Uk)("取消")])),_:1}),(0,i.Wm)(c,{type:"primary",onClick:k},{default:(0,i.w5)((()=>[(0,i.Uk)("确定")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(a,{title:"功能权限仅影响页面功能，管理应用的发布权限请在发布权限中设置。权限更改成功后会强制属于该角色的账户重新登录。",type:"info","show-icon":""}),(0,i.Wm)(p["default"],{ref:"permissionTableRef","list-loading":(0,s.SU)(y).listLoading,"list-data":(0,s.SU)(y).permissionInfoData,"column-list":f,"is-pagination":!1,"is-selection":!1,stripe:!1,"span-method":b,"class-name":"permission-table"},{pageHeader:(0,i.w5)((({column:e})=>[(0,i.Wm)(u,{modelValue:(0,s.SU)(y).checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,s.SU)(y).checkAll=e),indeterminate:(0,s.SU)(y).isIndeterminate,onChange:C},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.label),1)])),_:2},1032,["modelValue","indeterminate"])])),module:(0,i.w5)((({row:e})=>[(0,i.Uk)((0,r.zw)(e.title),1)])),page:(0,i.w5)((({row:e})=>[(0,i.Wm)(m,{modelValue:(0,s.SU)(w).permission,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,s.SU)(w).permission=e),onChange:_},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:e.name},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(e.title),1)])),_:2},1032,["label"])])),_:2},1032,["modelValue"])])),_:1},8,["list-loading","list-data"])])),_:1},8,["modelValue","title"])}}};function f(e){e.__source="src/views/system/role/components/FunPermissionSet.vue"}var g=a(83744);"function"===typeof f&&f(c);const h=(0,g.Z)(c,[["__scopeId","data-v-28a89ffd"]]);var w=h}}]);