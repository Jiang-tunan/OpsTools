/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[9771],{89771:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var r=a(98639),o=(a(24549),a(85295),a(49530)),u=(a(80773),a(21211)),t=(a(12791),a(47301)),s=(a(52783),a(38492)),d=(a(94687),a(79303),a(6715),a(57847)),n=(a(43872),a(57658),a(66252)),i=a(2262),m=a(49963),p=a(12688),c=a(25498),g=a(7605),w={__name:"UserInfoCase",props:{userInfoData:{type:Object,default:()=>({})},title:{type:String,default:"用户"},type:{type:String,default:"new"},visible:{type:Boolean,default:!1}},emits:["cancel","confirm"],setup(e,{emit:l}){const a=e,w=(0,i.iH)(null),f=(0,n.f3)("$baseMessage"),{title:v,type:U,visible:b,userInfoData:h}=(0,i.BK)(a),S=(e,l,a)=>{if(""===l)a(new Error((0,g.Iu)("请输入登录密码")));else{if((0,c.gO)(l))if((0,c.L6)(l)){if(""!==h.value.repassword){if(!w.value)return;w.value.validateField("repassword",(()=>null))}}else a(new Error((0,g.Iu)("密码中必须包含字母、数字、特殊字符！")));else a(new Error((0,g.Iu)("密码不能少于8位")));a()}},V=(e,l,a)=>{""===l?a(new Error((0,g.Iu)("请再次输入登录密码"))):l!==h.value.passwd?a(new Error((0,g.Iu)("两次密码输入不一致!"))):a()},_=(e,l,a)=>{e.required&&!l&&a(new Error((0,g.Iu)("邮箱不能为空"))),l&&((0,c.Jh)(l)?a():a(new Error((0,g.Iu)("请输入正确邮箱"))))},W=(e,l,a)=>{l?(0,c.Mn)(l)?a():a(new Error((0,g.Iu)("请输入正确的手机号码"))):a(new Error((0,g.Iu)("请输入手机号码")))},y={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:100,message:"用户名不高于100个字符",trigger:"blur"}],passwd:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:S,trigger:"blur"}],repassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:V,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:_,trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:W,trigger:"blur"}]},k=(0,i.qj)({roleList:[],orgList:[]});function I(){l("cancel")}function E(){w.value.validate((e=>{if(e){const e=[];if(h.value.usrgrps.map((l=>{e.push({usrgrpid:l})})),"new"===U.value){const a={ding:h.value.ding||"",email:h.value.email,phone:h.value.phone,memo:h.value.memo||"",roleid:h.value.roleid||"",username:h.value.username,usrgrps:e,wechat:h.value.wechat||"",enable:h.value.enable,passwd:h.value.passwd},r={};for(const e in a)if(a.hasOwnProperty.call(a,e)){const l=a[e];"usrgrps"===e||"roleid"===e?l.length&&(r[e]=l):l&&(r[e]=l)}(0,p.r4)(a).then((e=>{e.error||(f("创建成功","success"),l("cancel"),l("confirm"))})).catch((e=>{console.log("err :>> ",e)}))}else{const a={userid:h.value.userid};for(const l in h.value)if(Object.hasOwnProperty.call(h.value,l)){const r=h.value[l],o=k.backupsData[l];"usrgrps"===l?r.sort().toString()!==o.sort().toString()&&(a[l]=e):r!==o&&(a[l]=r)}(0,p.Nq)(a).then((e=>{e.error||(f("编辑成功","success"),l("cancel"),l("confirm"))})).catch((e=>{console.log("err :>> ",e)}))}}}))}function q(){(0,p.cY)({}).then((e=>{e.error||(k.roleList=e)})).catch((e=>{console.log("err :>> ",e)}))}function M(){(0,p.XN)({exceptdisable:!0}).then((e=>{e.error||(k.orgList=e)})).catch((e=>{console.log("err :>> ",e)}))}return(0,n.bv)((()=>{k.backupsData=JSON.parse(JSON.stringify(h.value)),q(),M()})),(e,l)=>{const a=d.EZ,p=u.nH,c=s.BT,g=s.ElSelect,f=t.OX,S=u.ly,V=o.ElButton,_=r.zd;return(0,n.wg)(),(0,n.j4)(_,{modelValue:(0,i.SU)(b),"onUpdate:modelValue":l[12]||(l[12]=e=>(0,i.dq)(b)?b.value=e:null),title:(0,i.SU)(v),onClose:I},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{ref_key:"organizationFormRef",ref:w,model:(0,i.SU)(h),rules:y,"label-width":"5.5rem",onSubmit:l[11]||(l[11]=(0,m.iM)((()=>{}),["prevent"]))},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{label:"用户名",prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).username,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,i.SU)(h).username=e),modelModifiers:{trim:!0},placeholder:"请输入用户名",maxlength:"100"},null,8,["modelValue"])])),_:1}),"new"===(0,i.SU)(U)?((0,n.wg)(),(0,n.j4)(p,{key:0,label:"登录密码",prop:"passwd"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).passwd,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,i.SU)(h).passwd=e),modelModifiers:{trim:!0},type:"password","show-password":"",placeholder:"请输入登录密码"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0),"new"===(0,i.SU)(U)?((0,n.wg)(),(0,n.j4)(p,{key:1,label:"确认密码",prop:"repassword"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).repassword,"onUpdate:modelValue":l[2]||(l[2]=e=>(0,i.SU)(h).repassword=e),modelModifiers:{trim:!0},type:"password","show-password":"",placeholder:"请输入确认密码"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(p,{label:"邮箱",prop:"email"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).email,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,i.SU)(h).email=e),modelModifiers:{trim:!0},placeholder:"请输入邮箱"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"手机",prop:"phone"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).phone,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,i.SU)(h).phone=e),modelModifiers:{trim:!0},placeholder:"请输入手机"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"企业微信",prop:"wechat"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).wechat,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,i.SU)(h).wechat=e),modelModifiers:{trim:!0},placeholder:"请输入企业微信"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"钉钉",prop:"ding"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).ding,"onUpdate:modelValue":l[6]||(l[6]=e=>(0,i.SU)(h).ding=e),modelModifiers:{trim:!0},placeholder:"请输入钉钉"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"角色",prop:"roleid"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{modelValue:(0,i.SU)(h).roleid,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,i.SU)(h).roleid=e),placeholder:"请选择角色",class:"input-select"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(k).roleList,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e.roleid,label:e.name,value:e.roleid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"组织",prop:"usrgrps"},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{modelValue:(0,i.SU)(h).usrgrps,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,i.SU)(h).usrgrps=e),placeholder:"请选择组织",class:"input-select",multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,i.SU)(k).orgList,(e=>((0,n.wg)(),(0,n.j4)(c,{key:e.usrgrpid,label:e.name,value:e.usrgrpid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"账号状态",prop:"enable"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{modelValue:(0,i.SU)(h).enable,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,i.SU)(h).enable=e),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{label:"备注",prop:"memo"},{default:(0,n.w5)((()=>[(0,n.Wm)(a,{modelValue:(0,i.SU)(h).memo,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,i.SU)(h).memo=e),modelModifiers:{trim:!0},rows:3,maxlength:"255",type:"textarea",placeholder:"请输入"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),footer:(0,n.w5)((()=>[(0,n.Wm)(V,{onClick:I},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1}),(0,n.Wm)(V,{type:"primary",onClick:E},{default:(0,n.w5)((()=>[(0,n.Uk)("确定")])),_:1})])),_:1},8,["modelValue","title"])}}};function f(e){e.__source="src/views/system/user/components/UserInfoCase.vue"}var v=a(83744);"function"===typeof f&&f(w);const U=(0,v.Z)(w,[["__scopeId","data-v-300dee21"]]);var b=U}}]);