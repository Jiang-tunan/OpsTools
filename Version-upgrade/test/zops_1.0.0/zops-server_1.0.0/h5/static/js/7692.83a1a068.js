/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7692],{32134:function(e,t,n){n.d(t,{IP:function(){return i},MB:function(){return c},PN:function(){return o},YZ:function(){return d},iv:function(){return r},qb:function(){return s},tS:function(){return l},vP:function(){return u}});var a=n(52806);function c(e){return(0,a.Z)({params:{method:"idc.get",data:e}})}function i(e){return(0,a.Z)({params:{method:"idc.create",data:e}})}function l(e){return(0,a.Z)({params:{method:"idc.update",data:e}})}function o(e){return(0,a.Z)({params:{method:"idc.delete",data:e}})}function d(e){return(0,a.Z)({params:{method:"house.get",data:e}})}function u(e){return(0,a.Z)({params:{method:"house.create",data:e}})}function r(e){return(0,a.Z)({params:{method:"house.update",data:e}})}function s(e){return(0,a.Z)({params:{method:"house.delete",data:e}})}},77692:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(64654),c=(n(24549),n(16135),n(49530)),i=(n(80773),n(46538)),l=(n(92719),n(20822),n(57658),n(66252)),o=n(2262),d=n(3577),u=n(39049),r=n(32134);const s={class:"device-list"},h={class:"device-list-content"},f={class:"item-total"};var m={__name:"SelectRoom",props:{type:{type:String,default:""},checkedData:{type:Array,default:()=>[]},title:{type:String,default:"选择设备"},selectDeviceData:{type:Object,default:()=>({})},visible:{type:Boolean,default:!1}},emits:["selectData","cancel","confirm"],setup(e,{emit:t}){const n=e,{type:m,checkedData:p,title:k,visible:v}=(0,o.BK)(n),g=(0,o.qj)({checkAll:!1,loading:!1,isIndeterminate:!1,deviceData:[],checkedCities:[],idkey:[]});function y(){g.loading=!0,(0,r.MB)({selectHosts:"count"}).then((e=>{e.error||(g.loading=!1,g.deviceData=e,w())})).catch((e=>{g.loading=!1,console.log("err :>> ",e)}))}function D(){g.loading=!0,g.houseData=[],(0,r.YZ)({selectHosts:"count"}).then((e=>{e.error||(g.loading=!1,g.deviceData=e,w())})).catch((e=>{console.log(e),g.loading=!1}))}function w(){g.checkAll=g.checkedCities.length===g.deviceData.length,g.isIndeterminate=g.checkedCities.length>0&&g.checkedCities.length<g.deviceData.length}function C(e){const t=[];for(let n=0;n<g.deviceData.length;n++){const e=g.deviceData[n];t.push(e[g.idkey])}g.checkedCities=e?t:[],g.isIndeterminate=!1,S()}function U(e){g.checkAll=e.length===g.deviceData.length,g.isIndeterminate=e.length>0&&e.length<g.deviceData.length,S()}function S(){const e=[];for(let t=0;t<g.checkedCities.length;t++){const n=g.checkedCities[t],a=g.deviceData.find((e=>e[g.idkey]===n));a&&e.push(a)}t("selectData",e)}function _(){t("cancel")}function b(){t("cancel"),t("confirm",g.checkedCities)}return(0,l.bv)((()=>{"1"===m.value?(g.idkey="idcid",y()):"2"===m.value&&(g.idkey="houseid",D());const e=[];for(let t=0;t<p.value.length;t++){const n=p.value[t];e.push(n[g.idkey])}g.checkedCities=e,w()})),(e,t)=>{const n=i.ElCheckbox,r=i.z5,m=c.ElButton,p=a.t;return(0,l.wg)(),(0,l.j4)((0,o.SU)(u["default"]),{modelValue:(0,o.SU)(v),"onUpdate:modelValue":[t[2]||(t[2]=e=>(0,o.dq)(v)?v.value=e:null),_],title:(0,o.SU)(k),width:"24rem",class:"device-dialog"},{footer:(0,l.w5)((()=>[(0,l.Wm)(m,{onClick:_},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(m,{type:"primary",onClick:b},{default:(0,l.w5)((()=>[(0,l.Uk)("确定")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(n,{modelValue:(0,o.SU)(g).checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.SU)(g).checkAll=e),indeterminate:(0,o.SU)(g).isIndeterminate,onChange:C},{default:(0,l.w5)((()=>[(0,l.Uk)(" 全选 ")])),_:1},8,["modelValue","indeterminate"]),(0,l.Wm)(r,{modelValue:(0,o.SU)(g).checkedCities,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.SU)(g).checkedCities=e),onChange:U},{default:(0,l.w5)((()=>[(0,l.wy)(((0,l.wg)(),(0,l.iD)("ul",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(g).deviceData,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t,class:"device-item"},[(0,l.Wm)(n,{label:e[(0,o.SU)(g).idkey]},{default:(0,l.w5)((()=>[(0,l.Uk)((0,d.zw)(e.name),1)])),_:2},1032,["label"]),(0,l._)("span",f,(0,d.zw)(e.total)+"台设备",1)])))),128))])),[[p,(0,o.SU)(g).loading]])])),_:1},8,["modelValue"])])])),_:1},8,["modelValue","title"])}}};function p(e){e.__source="src/views/problem/component/AlarmNotifyInfo/SelectRoom.vue"}var k=n(83744);"function"===typeof p&&p(m);const v=(0,k.Z)(m,[["__scopeId","data-v-2f6b34b9"]]);var g=v}}]);