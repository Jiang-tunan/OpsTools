/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[8437,9527,4070,6480],{97744:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=a(21211),r=(a(24549),a(12791),a(49530)),o=(a(80773),a(6715),a(57847)),n=(a(43872),a(66252)),i=a(2262),s=a(49963),m=a(15489),u=a(25498),d=a(7605);const p={class:"notification-mode-content"},c=(0,n._)("div",{class:"notification-mode-title"},"邮件设置",-1),f={class:"notification-mode-content"},_=(0,n._)("div",{class:"notification-mode-title"},"发送测试邮件",-1);var v={__name:"Mail",setup(e){const t=(0,i.iH)(null),a=(0,i.iH)(null),v=(e,t,a)=>{e.required&&!t&&a(new Error((0,d.Iu)("邮箱不能为空"))),t&&((0,u.Jh)(t)?a():a(new Error((0,d.Iu)("请输入正确邮箱"))))},w=(e,t,a)=>{e.required&&!t&&a(new Error((0,d.Iu)("邮箱不能为空"))),t&&((0,u.kM)(t)?a():a(new Error((0,d.Iu)("请输入正确邮箱"))))},g={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:v,trigger:"blur"}]},y={smtp_server:[{required:!0,message:"请输入SMTP服务器",trigger:"blur"}],smtp_port:[{required:!0,message:"请输入SMTP服务器端口",trigger:"blur"},{validator:w,trigger:"blur"}],username:[{required:!0,message:"请输入SMTP用户名称",trigger:"blur"}],passwd:[{required:!0,message:"请输入SMTP用户密码",trigger:"blur"}],smtp_email:[{required:!0,message:"请输入发件人邮件地址",trigger:"blur"},{validator:v,trigger:"blur"}]},b=(0,i.qj)({smtpData:{smtp_server:"",smtp_port:"",username:"",passwd:"",smtp_email:""},emai:""}),h=(0,n.f3)("$baseMessage");function U(){a.value.validate((e=>{e&&(0,m.BK)({smtp_server:b.smtpData.smtp_server,smtp_email:b.smtpData.smtp_email,smtp_port:b.smtpData.smtp_port,username:b.smtpData.username,passwd:b.smtpData.passwd,mediatypeid:"1002"}).then((e=>{e.error||h("邮件保存成功","success")})).catch((e=>{console.log("err :>> ",e),h("邮件保存失败","error")}))}))}function D(){t.value.validate((e=>{e&&(0,m.U$)({email:b.email,smtp_server:b.smtpData.smtp_server,smtp_email:b.smtpData.smtp_email,smtp_port:b.smtpData.smtp_port,username:b.smtpData.username,passwd:b.smtpData.passwd}).then((e=>{e.error||h("测试发送邮件成功，请查收","success")})).catch((()=>{}))}))}function S(){(0,m.hg)({mediatypeids:[1002]}).then((e=>{e.error||(b.smtpData=e[0])}))}return(0,n.bv)((()=>{S()})),(e,m)=>{const u=o.EZ,d=l.nH,v=r.ElButton,w=l.ly,h=(0,n.up)("vab-icon");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",p,[c,(0,n.Wm)(w,{ref_key:"smtpFormRef",ref:a,class:"notification-mode-form","label-position":"top",rules:y,model:(0,i.SU)(b).smtpData,onSubmit:m[5]||(m[5]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"SMTP服务器",prop:"smtp_server"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).smtpData.smtp_server,"onUpdate:modelValue":m[0]||(m[0]=e=>(0,i.SU)(b).smtpData.smtp_server=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"SMTP服务器端口",prop:"smtp_port"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).smtpData.smtp_port,"onUpdate:modelValue":m[1]||(m[1]=e=>(0,i.SU)(b).smtpData.smtp_port=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"SMTP用户名称",prop:"username"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).smtpData.username,"onUpdate:modelValue":m[2]||(m[2]=e=>(0,i.SU)(b).smtpData.username=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"SMTP用户密码",prop:"passwd"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).smtpData.passwd,"onUpdate:modelValue":m[3]||(m[3]=e=>(0,i.SU)(b).smtpData.passwd=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,{label:"发件人邮件地址",prop:"smtp_email"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).smtpData.smtp_email,"onUpdate:modelValue":m[4]||(m[4]=e=>(0,i.SU)(b).smtpData.smtp_email=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{type:"primary",onClick:U},{default:(0,n.w5)((()=>[(0,n.Uk)("保存")])),_:1})])),_:1})])),_:1},8,["model"])]),(0,n._)("div",f,[_,(0,n.Wm)(w,{ref_key:"sendFormRef",ref:t,class:"notification-mode-form","label-position":"top",model:(0,i.SU)(b),rules:g,onSubmit:m[7]||(m[7]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"邮箱地址",prop:"email"},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{modelValue:(0,i.SU)(b).email,"onUpdate:modelValue":m[6]||(m[6]=e=>(0,i.SU)(b).email=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"]),(0,n.Wm)(v,{class:"send-btn",type:"primary",onClick:D},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{icon:"send-plane-fill"}),(0,n.Uk)(" 发送邮件 ")])),_:1})])),_:1})])),_:1},8,["model"])])])}}};function w(e){e.__source="src/views/problem/alarm-setting/Mail.vue"}"function"===typeof w&&w(v);const g=v;var y=g},86121:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(21211),r=(a(24549),a(12791),a(49530)),o=(a(80773),a(57847)),n=(a(43872),a(6715),a(24434)),i=(a(98476),a(35568),a(66252)),s=a(2262),m=a(49963),u=a(15489),d=a(25498),p=a(7605);const c={class:"notification-mode-content"},f=(0,i._)("div",{class:"notification-mode-title"},"短信设置",-1);var _={__name:"Note",setup(e){(0,s.iH)(null);const t=(0,s.iH)(null),a=(0,i.f3)("$baseMessage"),_=(e,t,a)=>{t?(0,d.CB)(t)?a():a(new Error((0,p.Iu)("请输入正确的短信URL"))):a(new Error((0,p.Iu)("请输入短信URL")))},v={messageUrl:[{validator:_,trigger:"blur"}]},w=(0,s.qj)({messageUrl:"",phone:"",mode:1});function g(){t.value.validate((e=>{if(e){const e={url:w.messageUrl};(0,u.BK)({script:JSON.stringify(e),mediatypeid:"1001"}).then((e=>{e.error||a("短信保存成功","success")})).catch((e=>{console.log("err :>> ",e),a("短信保存失败","error")}))}}))}function y(){(0,u.hg)({mediatypeids:[1001]}).then((e=>{if(!e.error){const t=e[0]?.script;t&&(w.messageUrl=JSON.parse(t)?.url)}}))}return(0,i.bv)((()=>{y()})),(e,a)=>{const u=n.rh,d=n.KD,p=l.nH,_=o.EZ,y=r.ElButton,b=l.ly;return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",c,[f,(0,i.Wm)(b,{ref_key:"notificationRef",ref:t,class:"notification-mode-form","label-position":"top",model:(0,s.SU)(w),rules:v,onSubmit:a[2]||(a[2]=(0,m.iM)((()=>{}),["prevent"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{label:"配置方式",prop:"configMode"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{modelValue:(0,s.SU)(w).mode,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.SU)(w).mode=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{label:1},{default:(0,i.w5)((()=>[(0,i.Uk)("HTTP")])),_:1}),(0,i.Wm)(u,{label:2},{default:(0,i.w5)((()=>[(0,i.Uk)("WebService")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(p,{label:"短信URL",prop:"messageUrl"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{modelValue:(0,s.SU)(w).messageUrl,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,s.SU)(w).messageUrl=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,{type:"primary",onClick:g},{default:(0,i.w5)((()=>[(0,i.Uk)("保存")])),_:1})])),_:1})])),_:1},8,["model"])])])}}};function v(e){e.__source="src/views/problem/alarm-setting/Note.vue"}"function"===typeof v&&v(_);const w=_;var g=w},21322:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var l=a(49530),r=(a(24549),a(80773),a(66252)),o=a(3577),n=a(2262),i=a(15489),s=a(72433),m=a(11229),u=a(43314);const d=e=>((0,r.dD)("data-v-057b7238"),e=e(),(0,r.Cn)(),e),p={class:"notification-mode-content notification-container"},c=d((()=>(0,r._)("span",null,"企业微信设置",-1)));var f={__name:"Wechat",setup(e){const t=(0,n.iH)([]),a=(0,n.iH)(!1),d=(0,n.qj)({wechatData:{visible:!1,title:"新增 Webhook",data:{group:"",url:"",isproxy:!1,proxy_address:"",proxy_port:""}}}),f=(0,r.f3)("$baseMessage");function _(){const e={mediatypeid:d.wechatData.data.mediatypeid,group:d.wechatData.data.group,proxy_port:d.wechatData.data.proxy_port,webhook:d.wechatData.data.url,proxy_address:d.wechatData.data.proxy_address,mediatype:"wechat"};(0,i.BK)(e).then((e=>{e.error||f("企业微信保存成功","success")})).catch((e=>{console.log("err :>> ",e),f("企业微信保存失败","error")}))}function v(){(0,i.hg)({search:{name:"wecom"}}).then((e=>{!e.error&&e.length?(a.value=!1,t.value=e):a.value=!0}))}function w(){d.wechatData.visible=!1}function g(){d.wechatData={visible:!0,title:"新增 Webhook",type:"new",data:{group:"",url:"",isproxy:!1,proxy_address:"",proxy_port:""}}}function y(e){const t=!!e.proxy_address;d.wechatData={visible:!0,title:"编辑 Webhook",type:"edit",data:{name:e.name,group:e.group,url:e.url,mediatypeid:e.mediatypeid,isproxy:t,proxy_address:e.proxy_address,proxy_port:e.proxy_port}}}return(0,r.bv)((()=>{v()})),(e,i)=>{const f=l.ElButton;return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",p,[(0,r._)("div",{class:(0,o.C_)(["notification-mode-title",{"layout-list":!(0,n.SU)(a)}])},[c,(0,n.SU)(a)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(f,{key:0,type:"primary",onClick:g},{default:(0,r.w5)((()=>[(0,r.Uk)(" 新增 Webhook ")])),_:1}))],2),(0,n.SU)(a)?((0,r.wg)(),(0,r.j4)(s["default"],{key:0,"group-data":(0,n.SU)(d).wechatData.data,"is-save":!0,onSave:_},null,8,["group-data"])):((0,r.wg)(),(0,r.j4)(m["default"],{key:1,"group-data":(0,n.SU)(t),type:"wechat",onEdit:y,onUpdateData:v},null,8,["group-data"])),(0,n.SU)(d).wechatData.visible?((0,r.wg)(),(0,r.j4)(u["default"],{key:2,"anotify-info-data":(0,n.SU)(d).wechatData.data,visible:(0,n.SU)(d).wechatData.visible,title:(0,n.SU)(d).wechatData.title,type:(0,n.SU)(d).wechatData.type,"group-type":"wechat",onCancel:w,onConfirm:v},null,8,["anotify-info-data","visible","title","type"])):(0,r.kq)("",!0)])])}}};function _(e){e.__source="src/views/problem/alarm-setting/Wechat.vue"}var v=a(83744);"function"===typeof _&&_(f);const w=(0,v.Z)(f,[["__scopeId","data-v-057b7238"]]);var g=w},50794:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var l=a(48959),r=(a(24549),a(81037),a(24302),a(13565),a(66252)),o=a(3577);const n={class:"alarm-set-content"},i={class:"component-container"};function s(e,t,a,s,m,u){const d=l.E_,p=l.F8,c=l.Q8;return(0,r.wg)(),(0,r.iD)("div",n,[(0,r.Wm)(c,{class:"alarm-set-menu side-menu","default-active":s.menuComponent,"menu-trigger":"click"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.routes.flatMap((e=>e["meta"]&&e["meta"]["levelHidden"]&&e["children"]?[...e["children"]]:e)),((e,t)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:t},[e.children?((0,r.wg)(),(0,r.j4)(p,{key:0,index:e.name},{title:(0,r.w5)((()=>[(0,r._)("span",null,(0,o.zw)(e.title),1)])),default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.children,((e,t)=>((0,r.wg)(),(0,r.j4)(d,{key:t,index:e.name,onClick:t=>s.menuEvent(e)},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,o.zw)(e.title),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1032,["index"])):((0,r.wg)(),(0,r.j4)(d,{key:1,index:e.name,onClick:t=>s.menuEvent(e)},{default:(0,r.w5)((()=>[(0,r._)("span",null,(0,o.zw)(e.title),1)])),_:2},1032,["index","onClick"]))],64)))),128))])),_:1},8,["default-active"]),(0,r._)("div",i,[((0,r.wg)(),(0,r.j4)((0,r.LL)(s.menuComponent),{class:"component-content"}))])])}a(57658);var m=a(68500),u=a(18986),d=a(97744),p=a(86121),c=a(21322),f=a(22201),_=a(2262),v={components:{Dingtal:u["default"],Mail:d["default"],Note:p["default"],Wechat:c["default"],AlarmNotify:m["default"]},setup(){const e=(0,f.yj)(),t=(0,f.tv)(),a=(0,_.iH)(e.query.name||"Note"),l=[{name:"NotifyMode",title:"通知方式设置",children:[{name:"Note",title:"短信"},{name:"Mail",title:"邮件"},{name:"Wechat",title:"企业微信"},{name:"Dingtal",title:"钉钉"}]},{name:"AlarmNotify",title:"告警通知组"}];function r(e){a.value=e.name,t.push({query:{name:e.name}})}return{menuEvent:r,menuComponent:a,routes:l,router:t,route:e}}};function w(e){e.__source="src/views/problem/alarm-setting/index.vue"}var g=a(83744);"function"===typeof w&&w(v);const y=(0,g.Z)(v,[["render",s],["__scopeId","data-v-2ca3fe8c"]]);var b=y}}]);