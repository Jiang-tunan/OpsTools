/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[3045,8743,657],{83954:function(e,t,n){n.d(t,{$C:function(){return d},AX:function(){return l},C$:function(){return p},QB:function(){return i},Rg:function(){return s},UX:function(){return r},VZ:function(){return o},g4:function(){return m},tE:function(){return u},yj:function(){return c}});var a=n(52806);function o(e){return(0,a.Z)({params:{method:"template.get",data:e}})}function i(e){return(0,a.Z)({params:{method:"template.update",data:e}})}function r(e){return(0,a.Z)({params:{method:"trigger.get",data:e}})}function l(e){return(0,a.Z)({params:{method:"trigger.update",data:e}})}function s(e){return(0,a.Z)({params:{method:"trigger.enabletrigger",data:e}})}function u(e){return(0,a.Z)({params:{method:"trigger.recover",data:e}})}function d(e){return(0,a.Z)({params:{method:"item.get",data:e}})}function m(e){return(0,a.Z)({params:{method:"item.update",data:e}})}function c(e){return(0,a.Z)({params:{method:"item.enable",data:e}})}function p(e){return(0,a.Z)({params:{method:"item.interfacelist",data:e}})}},22076:function(e,t,n){function a(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function o(e,t,n){let o=0;return o="remToPx"===n?a(t):t,e?.value?.offsetHeight?e.value.offsetHeight-o:e?.offsetHeight?e.offsetHeight-o:void 0}function i(e,t){const n=new Map;for(const a of e)n.has(a[t])||n.set(a[t],a);return[...n.values()]}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function l(e){let t=parseInt(e),n=0,a=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(a=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:a}}n.d(t,{BE:function(){return r},NC:function(){return o},Nb:function(){return i},ZC:function(){return l}})},48499:function(e,t,n){n.d(t,{Z:function(){return m}});var a=n(74842),o=(n(24549),n(94851),n(66252));const i={class:"top-panel"};function r(e,t){const n=a.Dv;return(0,o.wg)(),(0,o.j4)(n,{span:24},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.WI)(e.$slots,"default")])])),_:3})}function l(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var s=n(83744);const u={};"function"===typeof l&&l(u);const d=(0,s.Z)(u,[["render",r]]);var m=d},58818:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(28314),o=(n(24549),n(7436),n(66252));function i(e,t){const n=a.dq;return(0,o.wg)(),(0,o.j4)(n,{class:"vab-query-form",gutter:0},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function r(e){e.__source="library/components/VabQueryForm/index.vue"}var l=n(83744);const s={};"function"===typeof r&&r(s);const u=(0,l.Z)(s,[["render",i],["__scopeId","data-v-4d22213e"]]);var d=u},5743:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(64654),o=(n(24549),n(16135),n(91067)),i=(n(78526),n(47546)),r=(n(49653),n(37965)),l=(n(82880),n(60717),n(66252)),s=n(3577),u=n(2262),d={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:n}){const d=(0,u.iH)(null),m=e=>{n("sizeChange",e)},c=e=>{n("currentChange",e)},p=e=>{n("selectRows",e)},f=e=>{n("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),d.value.toggleRowSelection(e))}return(0,l.dl)((()=>{d?.value?.doLayout()})),(0,l.bv)((()=>{d.value.doLayout()})),t({tableRef:d,toggleRowSelection:g}),(t,n)=>{const u=i.$Y,g=r.GT,h=i.eI,y=o.R,w=a.t;return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.wy)(((0,l.wg)(),(0,l.j4)(h,{ref_key:"tableRef",ref:d,class:(0,s.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:p,onSortChange:f},{empty:(0,l.w5)((()=>[(0,l.Wm)(g,{description:"暂无数据"})])),default:(0,l.w5)((()=>[e.isSelection?((0,l.wg)(),(0,l.j4)(u,{key:0,fixed:"left",type:"selection",width:"55"})):(0,l.kq)("",!0),e.isIndex?((0,l.wg)(),(0,l.j4)(u,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,l.kq)("",!0),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.columnList,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,l.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,l.w5)((()=>[(0,l.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,l.w5)((({row:n,$index:a,column:o})=>[(0,l.WI)(t.$slots,e.prop,{row:n,index:a,column:o})])),key:"1"}:{name:"default",fn:(0,l.w5)((({row:t})=>[(0,l._)("span",{class:"name"},(0,s.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[w,e.listLoading]]),e.isPagination?((0,l.wg)(),(0,l.j4)(y,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:c,onSizeChange:m},null,8,["current-page","layout","page-size","total"])):(0,l.kq)("",!0)],64)}}};function m(e){e.__source="src/components/CustomTable.vue"}var c=n(83744);"function"===typeof m&&m(d);const p=(0,c.Z)(d,[["__scopeId","data-v-bdd84b16"]]);var f=p},24831:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(49530),o=(n(24549),n(80773),n(50952)),i=(n(83646),n(47301)),r=(n(52783),n(58818)),l=n(48499),s=n(21211),u=(n(12791),n(6715),n(57847)),d=(n(43872),n(57658),n(66252)),m=n(2262),c=n(49963),p=n(3577),f=n(5743),g=n(83954),h=n(22076),y=n(22201);const w=["onClick"];var b={__name:"MonitorItem",setup(e){const t=(0,d.RC)((()=>Promise.all([n.e(922),n.e(4736)]).then(n.bind(n,66468)))),b=(0,y.yj)(),v=(0,y.tv)(),x=(0,d.f3)("$baseTableHeight"),_=(0,m.iH)(null),C=(0,m.iH)(null),S=[{label:"监控项",prop:"name",tooltip:!0},{label:"告警指标",prop:"triggers",className:"blue-text",tooltip:!0,isRender:!0},{label:"间隔",prop:"delay",tooltip:!0},{label:"历史记录",prop:"history",tooltip:!0},{label:"趋势",prop:"trends",tooltip:!0,width:"200"},{label:"类型",prop:"type_str",tooltip:!0},{label:"启用状态",prop:"status",isRender:!0},{align:"right",fixed:"right",label:"操作",tooltip:!0,width:"100",prop:"operation",isRender:!0}],k=(0,m.iH)({current:1,limit:10,search:{name:""},output:"extend",selectTriggers:!0,hostids:[b?.query?.templateid]}),I=(0,m.qj)({height:x(3)-30,itemsdata:[],listLoading:!0,total:0,monitorItemData:{title:"监控项编辑",type:"new",visible:!1,data:{itemid:"",type:"",name:"",history:"",trends:"",trendsUnit:"d",selectTrends:"noTrend",delay:"",enable:!0,description:""}}}),U=async()=>{I.listLoading=!0,I.itemsdata=[],(0,g.$C)(k.value).then((e=>{!e.error&&e.length&&(I.itemsdata=e,I.total=Number(e[0]?.total)),I.listLoading=!1})).catch((e=>{console.log(e),I.listLoading=!1}))},Z=e=>{k.value.limit=e,I.total=0,U()},H=e=>{k.value.current=e,U()},N=()=>{k.value.current=1,U()},W=()=>{I.height=(0,h.NC)(_,1/3+8.125,"remToPx")},z=e=>{const t=e.delay.slice(0,e.delay.length-1),n=e.delay.slice(-1),a=e.history.slice(0,e.history.length-1),o=e.history.slice(-1),i="0"===e.trends?0:e.trends.slice(0,e.trends.length-1),r="0"===e.trends?"d":e.trends.slice(-1);I.monitorItemData={title:"监控项编辑",type:"edit",visible:!0,data:{itemid:e.itemid,type:e.type,name:e.name,history:a||0,trends:i,delay:t||0,enable:e.isopen,selectTrends:0===i?"noTrend":"custom",description:e.description,delayUnit:n||"m",historyUnit:o||"d",trendsUnit:r||"d"}}};function D(){I.monitorItemData.visible=!1}function R(e){(0,g.yj)({itemid:e.itemid,enable:e.isopen}).then((e=>{e.error&&U()})).catch((e=>{console.log("err :>> ",e),U()}))}function T(e){"0"!==e.triggers&&v.push({name:"TemplateDetail",query:{templateid:b?.query?.templateid,tab:"alarm",name:b?.query?.name,itemid:e.itemid}})}return(0,d.wF)((()=>{window.addEventListener("resize",W)})),(0,d.Ah)((()=>{window.removeEventListener("resize",W)})),(0,d.bv)((()=>{W(),U()})),(e,n)=>{const g=u.EZ,h=s.nH,y=s.ly,b=l.Z,v=r.Z,x=i.OX,W=o.Q0,j=a.ElButton;return(0,d.wg)(),(0,d.iD)("div",{ref_key:"itemsContainer",ref:_,class:"template-content"},[(0,d.Wm)(v,null,{default:(0,d.w5)((()=>[(0,d.Wm)(b,{span:12},{default:(0,d.w5)((()=>[(0,d.Wm)(y,{class:"query-info-form",inline:"","label-width":"0px",model:(0,m.SU)(k),onSubmit:n[1]||(n[1]=(0,c.iM)((()=>{}),["prevent"]))},{default:(0,d.w5)((()=>[(0,d.Wm)(h,{label:"",class:"form-name"},{default:(0,d.w5)((()=>[(0,d.Wm)(g,{modelValue:(0,m.SU)(k).search.name,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,m.SU)(k).search.name=e),placeholder:"请输入关键字搜索",onChange:N},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),(0,d.Wm)(f["default"],{ref_key:"itemsTableRef",ref:C,"max-height":(0,m.SU)(I).height,"class-name":"items-table","list-loading":(0,m.SU)(I).listLoading,"list-data":(0,m.SU)(I).itemsdata,"column-list":S,total:(0,m.SU)(I).total,"is-selection":!1,"page-no":(0,m.SU)(k).current,"page-size":(0,m.SU)(k).limit,onSizeChange:Z,onCurrentChange:H},{triggers:(0,d.w5)((({row:e})=>[(0,d._)("span",{class:"alarm-table-btn",onClick:t=>T(e)}," 告警指标 "+(0,p.zw)(e.triggers||0),9,w)])),status:(0,d.w5)((({row:e})=>[(0,d.Wm)(W,{content:e.isopen?"点击禁用":"点击启用",enterable:!1,placement:"top"},{default:(0,d.w5)((()=>[(0,d.Wm)(x,{modelValue:e.isopen,"onUpdate:modelValue":t=>e.isopen=t,"active-value":!0,"inactive-value":!1,onChange:t=>R(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:2},1032,["content"])])),operation:(0,d.w5)((({row:e})=>[(0,d.Wm)(j,{text:"",type:"primary",onClick:t=>z(e)},{default:(0,d.w5)((()=>[(0,d.Uk)(" 编辑 ")])),_:2},1032,["onClick"])])),_:1},8,["max-height","list-loading","list-data","total","page-no","page-size"]),(0,m.SU)(I).monitorItemData.visible?((0,d.wg)(),(0,d.j4)((0,m.SU)(t),{key:0,"monitor-item-data":(0,m.SU)(I).monitorItemData.data,title:(0,m.SU)(I).monitorItemData.title,type:(0,m.SU)(I).monitorItemData.type,visible:(0,m.SU)(I).monitorItemData.visible,onCancel:D,onConfirm:U},null,8,["monitor-item-data","title","type","visible"])):(0,d.kq)("",!0)],512)}}};function v(e){e.__source="src/views/system/template-management/MonitorItem.vue"}var x=n(83744);"function"===typeof v&&v(b);const _=(0,x.Z)(b,[["__scopeId","data-v-2489f584"]]);var C=_}}]);