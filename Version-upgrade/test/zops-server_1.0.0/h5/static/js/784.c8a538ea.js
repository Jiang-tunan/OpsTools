/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[784,8743,657],{22076:function(e,t,n){function a(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function o(e,t,n){let o=0;return o="remToPx"===n?a(t):t,e?.value?.offsetHeight?e.value.offsetHeight-o:e?.offsetHeight?e.offsetHeight-o:void 0}function l(e,t){const n=new Map;for(const a of e)n.has(a[t])||n.set(a[t],a);return[...n.values()]}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}))}function i(e){let t=parseInt(e),n=0,a=0;return t>60&&(n=parseInt(t/60),t=parseInt(t%60),n>60&&(a=parseInt(n/60),n=parseInt(n%60))),{second:t,minute:n,hour:a}}n.d(t,{BE:function(){return r},NC:function(){return o},Nb:function(){return l},ZC:function(){return i}})},35068:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(74842),o=(n(24549),n(94851),n(66252));const l={class:"right-panel"};var r=(0,o.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,n)=>{const r=a.Dv;return(0,o.wg)(),(0,o.j4)(r,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof i&&i(r);const s=r;var u=s},48499:function(e,t,n){n.d(t,{Z:function(){return c}});var a=n(74842),o=(n(24549),n(94851),n(66252));const l={class:"top-panel"};function r(e,t){const n=a.Dv;return(0,o.wg)(),(0,o.j4)(n,{span:24},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o.WI)(e.$slots,"default")])])),_:3})}function i(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var s=n(83744);const u={};"function"===typeof i&&i(u);const d=(0,s.Z)(u,[["render",r]]);var c=d},58818:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(28314),o=(n(24549),n(7436),n(66252));function l(e,t){const n=a.dq;return(0,o.wg)(),(0,o.j4)(n,{class:"vab-query-form",gutter:0},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function r(e){e.__source="library/components/VabQueryForm/index.vue"}var i=n(83744);const s={};"function"===typeof r&&r(s);const u=(0,i.Z)(s,[["render",l],["__scopeId","data-v-4d22213e"]]);var d=u},5743:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var a=n(64654),o=(n(24549),n(16135),n(91067)),l=(n(78526),n(47546)),r=(n(49653),n(37965)),i=(n(82880),n(60717),n(66252)),s=n(3577),u=n(2262),d={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:n}){const d=(0,u.iH)(null),c=e=>{n("sizeChange",e)},p=e=>{n("currentChange",e)},f=e=>{n("selectRows",e)},m=e=>{n("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),d.value.toggleRowSelection(e))}return(0,i.dl)((()=>{d?.value?.doLayout()})),(0,i.bv)((()=>{d.value.doLayout()})),t({tableRef:d,toggleRowSelection:g}),(t,n)=>{const u=l.$Y,g=r.GT,y=l.eI,h=o.R,w=a.t;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)(((0,i.wg)(),(0,i.j4)(y,{ref_key:"tableRef",ref:d,class:(0,s.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:f,onSortChange:m},{empty:(0,i.w5)((()=>[(0,i.Wm)(g,{description:"暂无数据"})])),default:(0,i.w5)((()=>[e.isSelection?((0,i.wg)(),(0,i.j4)(u,{key:0,fixed:"left",type:"selection",width:"55"})):(0,i.kq)("",!0),e.isIndex?((0,i.wg)(),(0,i.j4)(u,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.columnList,(e=>((0,i.wg)(),(0,i.j4)(u,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,i.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,i.w5)((()=>[(0,i.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,i.w5)((({row:n,$index:a,column:o})=>[(0,i.WI)(t.$slots,e.prop,{row:n,index:a,column:o})])),key:"1"}:{name:"default",fn:(0,i.w5)((({row:t})=>[(0,i._)("span",{class:"name"},(0,s.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[w,e.listLoading]]),e.isPagination?((0,i.wg)(),(0,i.j4)(h,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:p,onSizeChange:c},null,8,["current-page","layout","page-size","total"])):(0,i.kq)("",!0)],64)}}};function c(e){e.__source="src/components/CustomTable.vue"}var p=n(83744);"function"===typeof c&&c(d);const f=(0,p.Z)(d,[["__scopeId","data-v-bdd84b16"]]);var m=f},90246:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var a=n(50952),o=(n(24549),n(83646),n(47301)),l=(n(52783),n(8734)),r=(n(7553),n(58818)),i=n(35068),s=n(49530),u=(n(80773),n(48499)),d=n(21211),c=(n(12791),n(6715),n(57847)),p=(n(43872),n(57658),n(66252)),f=n(2262),m=n(49963),g=n(3577),y=n(5743),h=n(12688),w=n(22076);const b=e=>((0,p.dD)("data-v-8dcb9b02"),e=e(),(0,p.Cn)(),e),v=["onClick"],x=b((()=>(0,p._)("span",null,"分配功能",-1)));var C={__name:"index",setup(e){const t=(0,p.RC)((()=>Promise.all([n.e(922),n.e(7592)]).then(n.bind(n,56054)))),b=(0,p.RC)((()=>Promise.all([n.e(922),n.e(1108),n.e(6860),n.e(470)]).then(n.bind(n,90626)))),C=(0,p.f3)("$baseTableHeight"),_=(0,p.f3)("$baseConfirm"),S=(0,p.f3)("$baseMessage"),k=(0,f.iH)(null),D=[{label:"角色名称",prop:"name",tooltip:!0},{label:"关联用户",prop:"users",tooltip:!0,isRender:!0},{label:"描述信息",prop:"description",tooltip:!0},{label:"功能权限",prop:"rules",tooltip:!0,isRender:!0},{align:"right",fixed:"right",label:"操作",tooltip:!0,width:"200",prop:"operation",isRender:!0}],U=(0,f.iH)({current:1,output:"extend",selectUsers:"count",selectRules:["front"],limit:10,search:{name:""}}),I=(0,f.qj)({fold:!1,height:C(3)-30,roleInfoData:[],listLoading:!0,total:0,selectRows:"",roleInfoCaseData:{visible:!1,title:"新建角色",type:"new",data:{name:"",description:"",type:"",rules:{front:[]}}},permissionCaseData:{visible:!1,data:{name:"",description:"",type:"",rules:{front:[]}}}}),R=async()=>{I.listLoading=!0,I.roleInfoData=[],(0,h.cY)(U.value).then((e=>{I.listLoading=!1,e.error||(I.roleInfoData=e,I.total=Number(e[0].total||"0"))})).catch((e=>{I.listLoading=!1,console.log("error :>> ",e)}))},W=e=>{I.queryForm.pageSize=e,R()},N=e=>{I.queryForm.pageNo=e,R()},z=()=>{I.queryForm.pageNo=1,R()},H=e=>{I.selectRows=e},q=()=>{I.height=(0,w.NC)(k,1/3+8.125,"remToPx")},L=()=>{I.roleInfoCaseData={visible:!0,title:"新建角色",type:"new",data:{name:"",description:"",type:"",rules:{front:[]}}}},V=e=>{I.roleInfoCaseData={title:"编辑角色",type:"edit",visible:!0,data:{name:e.name,description:e.description,type:e.type,rules:e.rules,roleid:e.roleid}}};function Z(){I.roleInfoCaseData.visible=!1}const j=e=>{const t=[];if(e.roleid?t.push(e.roleid):I.selectRows.forEach((e=>{t.push(e.roleid)})),!t.length)return!1;_("你确定要删除吗",null,"delete",(async()=>{(0,h.Rd)(t).then((e=>{e.error||(S("删除成功","success"),R())})).catch((e=>{console.log("err :>> ",e)}))}))};function F(e){const t=[];for(let n=0;n<e.rules?.front?.length;n++){const a=e.rules?.front[n];"1"===a.status&&t.push(a.name)}I.permissionCaseData={visible:!0,data:{name:e.name,description:e.description,type:e.type,rules:e.rules,roleid:e.roleid,permission:t}}}function $(){I.permissionCaseData.visible=!1}return(0,p.wF)((()=>{window.addEventListener("resize",q)})),(0,p.Ah)((()=>{window.removeEventListener("resize",q)})),(0,p.bv)((()=>{q(),R()})),(e,n)=>{const h=c.EZ,w=d.nH,C=d.ly,_=u.Z,S=s.ElButton,q=i.Z,P=r.Z,E=(0,p.up)("Edit"),M=l.gn,T=o.OX,B=a.Q0;return(0,p.wg)(),(0,p.iD)("div",{ref_key:"roleContainer",ref:k,class:"role-container"},[(0,p.Wm)(P,null,{default:(0,p.w5)((()=>[(0,p.Wm)(_,{span:12},{default:(0,p.w5)((()=>[(0,p.Wm)(C,{class:"query-info-form",inline:"","label-width":"0px",model:(0,f.SU)(U).search,onSubmit:n[1]||(n[1]=(0,m.iM)((()=>{}),["prevent"]))},{default:(0,p.w5)((()=>[(0,p.Wm)(w,{label:"",class:"form-name"},{default:(0,p.w5)((()=>[(0,p.Wm)(h,{modelValue:(0,f.SU)(U).search.name,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,f.SU)(U).search.name=e),placeholder:"请输入角色名称搜索",onChange:z},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,p.Wm)(q,{span:12},{default:(0,p.w5)((()=>[(0,p.Wm)(S,{disabled:!(0,f.SU)(I).selectRows.length,onClick:j},{default:(0,p.w5)((()=>[(0,p.Uk)(" 删除 ")])),_:1},8,["disabled"]),(0,p.Wm)(S,{type:"primary",onClick:L},{default:(0,p.w5)((()=>[(0,p.Uk)("新建角色")])),_:1})])),_:1})])),_:1}),(0,p.Wm)(y["default"],{ref:"roleTableRef","max-height":(0,f.SU)(I).height,"list-loading":(0,f.SU)(I).listLoading,"list-data":(0,f.SU)(I).roleInfoData,"column-list":D,total:(0,f.SU)(I).total,"page-no":(0,f.SU)(U).current,"page-size":(0,f.SU)(U).limit,onSizeChange:W,onCurrentChange:N,onSelectRows:H},{users:(0,p.w5)((({row:e})=>[e.users?((0,p.wg)(),(0,p.iD)("span",{key:0,class:(0,g.C_)({"users-cloumn":"0"!==e.users})},(0,g.zw)(e.users),3)):(0,p.kq)("",!0)])),rules:(0,p.w5)((({row:e})=>[(0,p._)("span",{class:"distribution-fun",onClick:t=>F(e)},[(0,p.Wm)(M,null,{default:(0,p.w5)((()=>[(0,p.Wm)(E)])),_:1}),x],8,v)])),accountStatus:(0,p.w5)((({row:e})=>[(0,p.Wm)(B,{content:0===e.accountStatus?"点击开启":"点击关闭",enterable:!1,placement:"top"},{default:(0,p.w5)((()=>[(0,p.Wm)(T,{modelValue:e.accountStatus,"onUpdate:modelValue":t=>e.accountStatus=t,"active-value":!0,"inactive-value":!1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["content"])])),operation:(0,p.w5)((({row:e})=>[(0,p.Wm)(S,{text:"",type:"primary",onClick:t=>V(e)},{default:(0,p.w5)((()=>[(0,p.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,p.Wm)(S,{text:"",type:"primary",onClick:t=>j(e)},{default:(0,p.w5)((()=>[(0,p.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:1},8,["max-height","list-loading","list-data","total","page-no","page-size"]),(0,f.SU)(I).roleInfoCaseData.visible?((0,p.wg)(),(0,p.j4)((0,f.SU)(t),{key:0,"role-data":(0,f.SU)(I).roleInfoCaseData.data,title:(0,f.SU)(I).roleInfoCaseData.title,type:(0,f.SU)(I).roleInfoCaseData.type,visible:(0,f.SU)(I).roleInfoCaseData.visible,onCancel:Z,onConfirm:R},null,8,["role-data","title","type","visible"])):(0,p.kq)("",!0),(0,f.SU)(I).permissionCaseData.visible?((0,p.wg)(),(0,p.j4)((0,f.SU)(b),{key:1,"role-data":(0,f.SU)(I).permissionCaseData.data,title:(0,f.SU)(I).permissionCaseData.title,type:(0,f.SU)(I).permissionCaseData.type,visible:(0,f.SU)(I).permissionCaseData.visible,onCancel:$,onConfirm:R},null,8,["role-data","title","type","visible"])):(0,p.kq)("",!0)],512)}}};function _(e){e.__source="src/views/system/role/index.vue"}var S=n(83744);"function"===typeof _&&_(C);const k=(0,S.Z)(C,[["__scopeId","data-v-8dcb9b02"]]);var D=k}}]);