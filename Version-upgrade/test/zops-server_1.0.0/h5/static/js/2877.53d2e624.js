/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[2877],{15489:function(e,t,n){n.d(t,{BK:function(){return i},D$:function(){return l},U$:function(){return u},hg:function(){return r},nc:function(){return o}});var a=n(52806);function r(e){return(0,a.Z)({params:{method:"mediatype.get",data:e}})}function o(e){return(0,a.Z)({params:{method:"mediatype.create",data:e}})}function l(e){return(0,a.Z)({params:{method:"mediatype.delete",data:e}})}function i(e){return(0,a.Z)({params:{method:"mediatype.update",data:e}})}function u(e){return(0,a.Z)({params:{method:"mediatype.sendmail",data:e}})}},86121:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var a=n(21211),r=(n(24549),n(12791),n(49530)),o=(n(80773),n(57847)),l=(n(43872),n(6715),n(24434)),i=(n(98476),n(35568),n(66252)),u=n(2262),s=n(49963),d=n(15489),m=n(25498),c=n(7605);const f={class:"notification-mode-content"},p=(0,i._)("div",{class:"notification-mode-title"},"短信设置",-1);var U={__name:"Note",setup(e){(0,u.iH)(null);const t=(0,u.iH)(null),n=(0,i.f3)("$baseMessage"),U=(e,t,n)=>{t?(0,m.CB)(t)?n():n(new Error((0,c.Iu)("请输入正确的短信URL"))):n(new Error((0,c.Iu)("请输入短信URL")))},g={messageUrl:[{validator:U,trigger:"blur"}]},_=(0,u.qj)({messageUrl:"",phone:"",mode:1});function h(){t.value.validate((e=>{if(e){const e={url:_.messageUrl};(0,d.BK)({script:JSON.stringify(e),mediatypeid:"1001"}).then((e=>{e.error||n("短信保存成功","success")})).catch((e=>{console.log("err :>> ",e),n("短信保存失败","error")}))}}))}function v(){(0,d.hg)({mediatypeids:[1001]}).then((e=>{if(!e.error){const t=e[0]?.script;t&&(_.messageUrl=JSON.parse(t)?.url)}}))}return(0,i.bv)((()=>{v()})),(e,n)=>{const d=l.rh,m=l.KD,c=a.nH,U=o.EZ,v=r.ElButton,b=a.ly;return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",f,[p,(0,i.Wm)(b,{ref_key:"notificationRef",ref:t,class:"notification-mode-form","label-position":"top",model:(0,u.SU)(_),rules:g,onSubmit:n[2]||(n[2]=(0,s.iM)((()=>{}),["prevent"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{label:"配置方式",prop:"configMode"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{modelValue:(0,u.SU)(_).mode,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,u.SU)(_).mode=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{label:1},{default:(0,i.w5)((()=>[(0,i.Uk)("HTTP")])),_:1}),(0,i.Wm)(d,{label:2},{default:(0,i.w5)((()=>[(0,i.Uk)("WebService")])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,i.Wm)(c,{label:"短信URL",prop:"messageUrl"},{default:(0,i.w5)((()=>[(0,i.Wm)(U,{modelValue:(0,u.SU)(_).messageUrl,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,u.SU)(_).messageUrl=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{type:"primary",onClick:h},{default:(0,i.w5)((()=>[(0,i.Uk)("保存")])),_:1})])),_:1})])),_:1},8,["model"])])])}}};function g(e){e.__source="src/views/problem/alarm-setting/Note.vue"}"function"===typeof g&&g(U);const _=U;var h=_}}]);