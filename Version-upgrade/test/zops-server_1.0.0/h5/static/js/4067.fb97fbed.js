/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[4067],{18907:function(e,t,a){a.d(t,{KW:function(){return i},Kj:function(){return m},Ld:function(){return r},Ob:function(){return p},Ox:function(){return u},Wh:function(){return c},XF:function(){return o},bm:function(){return l},uX:function(){return s},v0:function(){return d},y2:function(){return f}});var n=a(52806);function o(e){return(0,n.Z)({params:{method:"host.get",data:e}})}function s(e){return(0,n.Z)({params:{method:"host.exportinventory",data:e}})}function i(e){return(0,n.Z)({params:{method:"host.update",data:e}})}function r(e){return(0,n.Z)({params:{method:"host.create",data:e}})}function l(e){return(0,n.Z)({params:{method:"host.discoverupdate",data:e}})}function u(e){return(0,n.Z)({params:{method:"host.delete",data:e}})}function d(e){return(0,n.Z)({params:{method:"hostgroup.get",data:e}})}function c(e){return(0,n.Z)({params:{method:"modeltype.create",data:e}})}function p(e){return(0,n.Z)({params:{method:"modeltype.get",data:e}})}function f(e){return(0,n.Z)({params:{method:"modeltype.update",data:e}})}function m(e){return(0,n.Z)({params:{method:"modeltype.delete",data:e}})}},57873:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var n=a(16652),o=(a(24549),a(38602),a(66252)),s=a(2262),i=a(3577),r=a(5743);const l=e=>((0,o.dD)("data-v-ed649eb2"),e=e(),(0,o.Cn)(),e),u={class:"interfaces-log-container"},d=l((()=>(0,o._)("div",{class:"interfaces-log-title"},[(0,o._)("span",{class:"title"},"协议状态")],-1)));var c={__name:"ProtocalItem",props:{interfacesData:{type:Object,default:()=>[]}},setup(e){const t=e,a=[{prop:"ip",label:"接口",tooltip:!0,width:"180"},{prop:"available",label:"状态",isRender:!0},{prop:"errors_from",label:"错误",isRender:!0}],l={1:"AGENT",2:"SNMP",3:"IPMI",4:"JMX"},{interfacesData:c}=(0,s.BK)(t);return(e,t)=>{const p=n.$t;return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(c),((e,t)=>((0,o.wg)(),(0,o.j4)(p,{key:t,width:"35rem",trigger:"hover","show-arrow":!1,"popper-class":"interfaces-log-popover"},{reference:(0,o.w5)((()=>[(0,o._)("span",{class:(0,i.C_)(["interfaces-column","interfaces-"+e.available])},(0,i.zw)(l[e.type]),3)])),default:(0,o.w5)((()=>[(0,o._)("div",u,[d,e.interfaceid?((0,o.wg)(),(0,o.j4)(r["default"],{key:0,"list-data":[e],"column-list":a,"is-pagination":!1,"is-selection":!1,"list-loading":!1},{available:(0,o.w5)((({row:e})=>[(0,o._)("span",{class:(0,i.C_)(["available-column","available-"+e.available])},(0,i.zw)("0"===e.available?"无数据":"1"===e.available?"启用中":"不可用"),3)])),errors_from:(0,o.w5)((({row:e})=>[(0,o._)("span",{class:(0,i.C_)({"error-info":!!e.errors_from})},(0,i.zw)(e?e?.errors_from:"---"),3)])),_:2},1032,["list-data"])):(0,o.kq)("",!0)])])),_:2},1024)))),128)}}};function p(e){e.__source="src/components/ProtocalItem.vue"}var f=a(83744);"function"===typeof p&&p(c);const m=(0,f.Z)(c,[["__scopeId","data-v-ed649eb2"]]);var h=m},64067:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var n=a(28314),o=(a(24549),a(7436),a(49530)),s=(a(80773),a(74842)),i=(a(94851),a(8734)),r=(a(7553),a(57658),a(66252)),l=a(3577),u=a(2262),d=a(5743),c=a(22076),p=a(18907),f=a(57873);const m=e=>((0,r.dD)("data-v-79a2534a"),e=e(),(0,r.Cn)(),e),h={class:"back-title"},v={class:"title"},w=m((()=>(0,r._)("span",{class:"divider"},"/",-1))),g={class:"back-name"};var _={__name:"DeviceData",props:{hostsData:{type:Object,default:()=>({})}},emits:["hostsBack"],setup(e,{emit:t}){const m=e,_=(0,r.RC)((()=>Promise.all([a.e(922),a.e(3757)]).then(a.bind(a,38116)))),b=(0,r.f3)("$baseTableHeight"),k={0:"启用中",1:"已停用",2:"未纳管"},{hostsData:D}=(0,u.BK)(m),y=(0,r.f3)("$baseMessage"),C=(0,u.iH)({output:["hostid","name","ip","status","protocal","houseid","idcid"],selectGroups:["name"],selectInterfaces:"extends",monitored_hosts:!0,houseids:[D.value.houseid]}),I=(0,u.qj)({listLoading:!0,equipmentData:[],selectRows:[],total:0,height:b(3)-30,moveInfoData:{visible:!1,title:"移动设备",data:{name:"",userid:"",address:"",usrgrpid:""}}}),S=(0,u.iH)(null),U=[{label:"设备名称",prop:"name",tooltip:!0},{label:"IP地址",prop:"ip",tooltip:!0},{label:"监控状态",prop:"status",tooltip:!0,isRender:!0},{label:"监控来源",prop:"protocal",tooltip:!0,isRender:!0},{label:"设备类型",prop:"groups",tooltip:!0,isRender:!0},{align:"right",fixed:"right",label:"操作",tooltip:!0,width:"200",prop:"operation",isRender:!0}],R=e=>{I.selectRows=e},W=()=>{I.height=(0,c.NC)(S,1/3+3.5,"remToPx")},Z=e=>{C.value.pageSize=e,x()},z=e=>{C.value.pageNo=e,x()};function x(){I.listLoading=!0,(0,p.XF)(C.value).then((e=>{e.error||(I.equipmentData=e,I.total=Number(e[0].total||"0")),I.listLoading=!1})).catch((e=>{console.log(e),I.listLoading=!1}))}function j(){t("hostsBack")}function q(e){if(e?.hostid||I.selectRows.length){const t=[],a=[];let n="",o="";e?.hostid?(t.push(e.hostid),a.push(e.name),n=e.houseid,o=e.idcid):I.selectRows.map((e=>{t.push(e.hostid),a.push(e.name)})),I.moveInfoData={visible:!0,title:"移动设备",data:{names:a,hostids:t,houseid:n,idcid:o}}}else y("未选中任何行","error")}function L(){I.moveInfoData.visible=!1}return(0,r.wF)((()=>{window.addEventListener("resize",W)})),(0,r.Ah)((()=>{window.removeEventListener("resize",W)})),(0,r.bv)((()=>{x(),W()})),(e,t)=>{const a=(0,r.up)("Back"),c=i.gn,p=s.Dv,m=o.ElButton,b=n.dq;return(0,r.wg)(),(0,r.iD)("div",{ref_key:"deviceRef",ref:S,class:"device-data-container"},[(0,r.Wm)(b,{class:"device-data-head"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{span:12},{default:(0,r.w5)((()=>[(0,r._)("div",h,[(0,r._)("span",{class:"back-btn",onClick:j},[(0,r.Wm)(c,null,{default:(0,r.w5)((()=>[(0,r.Wm)(a)])),_:1}),(0,r._)("span",v,(0,l.zw)((0,u.SU)(D).idcName),1)]),w,(0,r._)("span",g,(0,l.zw)((0,u.SU)(D).name||"---"),1)])])),_:1}),(0,r.Wm)(p,{span:12,align:"right"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{onClick:t[0]||(t[0]=e=>q())},{default:(0,r.w5)((()=>[(0,r.Uk)("移动")])),_:1})])),_:1})])),_:1}),(0,r.Wm)(d["default"],{"max-height":(0,u.SU)(I).height,"class-name":"equipment-table","list-loading":(0,u.SU)(I).listLoading,"list-data":(0,u.SU)(I).equipmentData,"column-list":U,"is-index":!0,total:(0,u.SU)(I).total,onSizeChange:Z,onCurrentChange:z,onSelectRows:R},{status:(0,r.w5)((({row:e})=>[(0,r._)("span",{class:(0,l.C_)("status-"+e.status)},(0,l.zw)(k[e.status]||"---"),3)])),protocal:(0,r.w5)((({row:t})=>[t?.interfaces?.length?(0,r.WI)(e.$slots,"default",{key:0},(()=>[(0,r.Wm)(f["default"],{"interfaces-data":t.interfaces},null,8,["interfaces-data"])])):(0,r.WI)(e.$slots,"default",{key:1},(()=>[(0,r.Uk)("---")]))])),groups:(0,r.w5)((({row:e})=>[(0,r.Uk)((0,l.zw)(e?.groups?.length?e?.groups.map((e=>e.name)).join("，"):"---"),1)])),operation:(0,r.w5)((({row:e})=>[(0,r.Wm)(m,{text:"",type:"primary",onClick:t=>q(e)},{default:(0,r.w5)((()=>[(0,r.Uk)("移动")])),_:2},1032,["onClick"])])),_:3},8,["max-height","list-loading","list-data","total"]),(0,u.SU)(I).moveInfoData.visible?((0,r.wg)(),(0,r.j4)((0,u.SU)(_),{key:0,"move-info-data":(0,u.SU)(I).moveInfoData.data,visible:(0,u.SU)(I).moveInfoData.visible,onCancel:L,onConfirm:x},null,8,["move-info-data","visible"])):(0,r.kq)("",!0)],512)}}};function b(e){e.__source="src/views/system/idc/DeviceData.vue"}var k=a(83744);"function"===typeof b&&b(_);const D=(0,k.Z)(_,[["__scopeId","data-v-79a2534a"]]);var y=D}}]);