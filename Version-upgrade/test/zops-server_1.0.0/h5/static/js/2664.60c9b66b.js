/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[2664,4449,3898],{72657:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var o=a(64654),i=(a(24549),a(16135),a(59109)),t=(a(65195),a(31574)),l=(a(72698),a(72673),a(56864),a(50952)),r=(a(83646),a(49530)),c=(a(80773),a(57847)),s=(a(43872),a(66252)),u=a(2262),d=a(49963),m=a(3577),f=a(65781),g=a(12688);const p={class:"organization-content"},k={class:"search-content"},_={class:"custom-tree-node"},v={key:1},b={class:"el-dropdown-link"};var w={__name:"Organization",emits:["organizationNodeClick"],setup(e,{emit:n}){const w=(0,s.RC)((()=>Promise.all([a.e(922),a.e(1110)]).then(a.bind(a,88939)))),y=(0,s.f3)("$baseConfirm"),h=(0,s.f3)("$baseMessage"),C=(0,u.iH)(null),z={children:"children",label:"name",id:"usrgrpid"},D=(0,u.qj)({loading:!0,organizationName:"",backupName:"",currentKey:"",organizationData:[],orgInfoData:{visible:!1}}),W=e=>{C.value.filter(e)},N=()=>{D.orgInfoData={visible:!0,title:"新建组织",type:"new",data:{name:"",manager_id:"",memo:""}}},I=(e,n)=>!e||n.name.includes(e),x=()=>{D.loading=!0;const e={exceptdisable:!0};""!=D.organizationName&&(e.search=D.organizationName),(0,g.XN)(e).then((e=>{D.loading=!1,D.organizationData=e,!e.error&&e.length&&(D.currentKey=e[0]?.usrgrpid,C.value.setCurrentKey(e[0]?.usrgrpid),n("organizationNodeClick",e[0]))})).catch((e=>{D.loading=!1,console.log("err :>> ",e)}))};function R(){D.orgInfoData.visible=!1}function U(e){const n={name:e.name,usrgrpid:e.usrgrpid};(0,g.A6)(n).then((e=>{e.error?(e.isRename=!1,e.name=D.backupName):e.isRename=!1})).catch((()=>{e.isRename=!1,e.name=D.backupName}))}function V(e){e.isRename=!1,e.name=D.backupName}function K(e){e.isRename=!0,D.backupName=e.name}function q(e){D.orgInfoData={visible:!0,title:"编辑组织",type:"edit",data:{name:e.name,usrgrpid:e.usrgrpid,manager_id:e.manager_id,memo:e.memo}}}function M(e){if(!e.usrgrpid)return!1;y("你确定要删除吗",null,"delete",(async()=>{(0,g.Y)([e.usrgrpid]).then((e=>{e.error||(h("删除成功","success"),x())})).catch((e=>{console.log("err :>> ",e)}))}))}function O(e){n("organizationNodeClick",e)}return(0,s.bv)((()=>{x()})),(e,n)=>{const a=c.EZ,g=(0,s.up)("vab-icon"),y=r.ElButton,h=l.Q0,j=t.Df,S=t.o2,Z=t.YK,B=i.y,E=o.t;return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",k,[(0,s.Wm)(a,{modelValue:D.organizationName,"onUpdate:modelValue":n[0]||(n[0]=e=>D.organizationName=e),placeholder:"请输入组织名搜索",clearable:"","prefix-icon":(0,u.SU)(f.Search),onChange:W},null,8,["modelValue","prefix-icon"]),(0,s.Wm)(h,{content:"新增组织",placement:"top",effect:"light"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{class:"add-btn",onClick:N},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{icon:"add-line"})])),_:1})])),_:1})]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(B,{ref_key:"organizationRef",ref:C,class:"organization-tree",data:D.organizationData,"default-expanded-keys":[1],props:z,"highlight-current":"","current-node-key":D.currentKey,"node-key":"usrgrpid","filter-node-method":I,onNodeClick:O},{default:(0,s.w5)((({node:e,data:o})=>[(0,s._)("span",_,[o.isRename?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"rename-label",onClick:n[1]||(n[1]=(0,d.iM)((()=>{}),["stop"]))},[(0,s.Wm)(a,{modelValue:o.name,"onUpdate:modelValue":e=>o.name=e,placeholder:"请输入数据中心名称",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),(0,s.Wm)(g,{class:"rename-icon icon-check",icon:"check-fill",onClick:(0,d.iM)((e=>U(o)),["stop"])},null,8,["onClick"]),(0,s.Wm)(g,{class:"rename-icon icon-close",icon:"close-fill",onClick:(0,d.iM)((e=>V(o)),["stop"])},null,8,["onClick"])])):((0,s.wg)(),(0,s.iD)("span",v,(0,m.zw)(e.label),1)),(0,s.Wm)(Z,null,{dropdown:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.Wm)(j,{onClick:e=>K(o)},{default:(0,s.w5)((()=>[(0,s.Uk)(" 重命名 ")])),_:2},1032,["onClick"]),(0,s.Wm)(j,{onClick:e=>q(o)},{default:(0,s.w5)((()=>[(0,s.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,s.Wm)(j,{onClick:e=>M(o)},{default:(0,s.w5)((()=>[(0,s.Uk)(" 删除 ")])),_:2},1032,["onClick"])])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("span",b,[(0,s.Wm)(g,{icon:"more-2-fill"})])])),_:2},1024)])])),_:1},8,["data","current-node-key"])),[[E,D.loading]]),D.orgInfoData.visible?((0,s.wg)(),(0,s.j4)((0,u.SU)(w),{key:0,"organization-data":D.orgInfoData.data,title:D.orgInfoData.title,type:D.orgInfoData.type,visible:D.orgInfoData.visible,onCancel:R,onConfirm:x},null,8,["organization-data","title","type","visible"])):(0,s.kq)("",!0)])}}};function y(e){e.__source="src/views/system/user/Organization.vue"}var h=a(83744);"function"===typeof y&&y(w);const C=(0,h.Z)(w,[["__scopeId","data-v-8036340a"]]);var z=C},60384:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var o=a(28314),i=(a(24549),a(7436),a(74842)),t=(a(94851),a(66252)),l=a(72657),r=a(73194),c=a(2262);const s={class:"user-container"};var u={__name:"index",setup(e){const n=(0,c.iH)(null);function a(e){n.value.queryByOrganization(e)}return(e,c)=>{const u=i.Dv,d=o.dq;return(0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{xs:8,sm:6,md:5,lg:4,xl:3,class:"user-organization"},{default:(0,t.w5)((()=>[(0,t.Wm)(l["default"],{onOrganizationNodeClick:a})])),_:1}),(0,t.Wm)(u,{xs:14,sm:18,md:19,lg:20,xl:21},{default:(0,t.w5)((()=>[(0,t.Wm)(r["default"],{ref_key:"userInfoRef",ref:n},null,512)])),_:1})])),_:1})])}}};function d(e){e.__source="src/views/system/user/index.vue"}var m=a(83744);"function"===typeof d&&d(u);const f=(0,m.Z)(u,[["__scopeId","data-v-6c95b576"]]);var g=f}}]);