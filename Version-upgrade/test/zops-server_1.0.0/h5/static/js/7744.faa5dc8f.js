/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7744],{15489:function(e,t,a){a.d(t,{BK:function(){return o},D$:function(){return m},U$:function(){return i},hg:function(){return l},nc:function(){return s}});var r=a(52806);function l(e){return(0,r.Z)({params:{method:"mediatype.get",data:e}})}function s(e){return(0,r.Z)({params:{method:"mediatype.create",data:e}})}function m(e){return(0,r.Z)({params:{method:"mediatype.delete",data:e}})}function o(e){return(0,r.Z)({params:{method:"mediatype.update",data:e}})}function i(e){return(0,r.Z)({params:{method:"mediatype.sendmail",data:e}})}},97744:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var r=a(21211),l=(a(24549),a(12791),a(49530)),s=(a(80773),a(6715),a(57847)),m=(a(43872),a(66252)),o=a(2262),i=a(49963),n=a(15489),p=a(25498),u=a(7605);const d={class:"notification-mode-content"},c=(0,m._)("div",{class:"notification-mode-title"},"邮件设置",-1),f={class:"notification-mode-content"},_=(0,m._)("div",{class:"notification-mode-title"},"发送测试邮件",-1);var b={__name:"Mail",setup(e){const t=(0,o.iH)(null),a=(0,o.iH)(null),b=(e,t,a)=>{e.required&&!t&&a(new Error((0,u.Iu)("邮箱不能为空"))),t&&((0,p.Jh)(t)?a():a(new Error((0,u.Iu)("请输入正确邮箱"))))},g=(e,t,a)=>{e.required&&!t&&a(new Error((0,u.Iu)("邮箱不能为空"))),t&&((0,p.kM)(t)?a():a(new Error((0,u.Iu)("请输入正确邮箱"))))},v={email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:b,trigger:"blur"}]},w={smtp_server:[{required:!0,message:"请输入SMTP服务器",trigger:"blur"}],smtp_port:[{required:!0,message:"请输入SMTP服务器端口",trigger:"blur"},{validator:g,trigger:"blur"}],username:[{required:!0,message:"请输入SMTP用户名称",trigger:"blur"}],passwd:[{required:!0,message:"请输入SMTP用户密码",trigger:"blur"}],smtp_email:[{required:!0,message:"请输入发件人邮件地址",trigger:"blur"},{validator:b,trigger:"blur"}]},D=(0,o.qj)({smtpData:{smtp_server:"",smtp_port:"",username:"",passwd:"",smtp_email:""},emai:""}),S=(0,m.f3)("$baseMessage");function U(){a.value.validate((e=>{e&&(0,n.BK)({smtp_server:D.smtpData.smtp_server,smtp_email:D.smtpData.smtp_email,smtp_port:D.smtpData.smtp_port,username:D.smtpData.username,passwd:D.smtpData.passwd,mediatypeid:"1002"}).then((e=>{e.error||S("邮件保存成功","success")})).catch((e=>{console.log("err :>> ",e),S("邮件保存失败","error")}))}))}function h(){t.value.validate((e=>{e&&(0,n.U$)({email:D.email,smtp_server:D.smtpData.smtp_server,smtp_email:D.smtpData.smtp_email,smtp_port:D.smtpData.smtp_port,username:D.smtpData.username,passwd:D.smtpData.passwd}).then((e=>{e.error||S("测试发送邮件成功，请查收","success")})).catch((()=>{}))}))}function M(){(0,n.hg)({mediatypeids:[1002]}).then((e=>{e.error||(D.smtpData=e[0])}))}return(0,m.bv)((()=>{M()})),(e,n)=>{const p=s.EZ,u=r.nH,b=l.ElButton,g=r.ly,S=(0,m.up)("vab-icon");return(0,m.wg)(),(0,m.iD)("div",null,[(0,m._)("div",d,[c,(0,m.Wm)(g,{ref_key:"smtpFormRef",ref:a,class:"notification-mode-form","label-position":"top",rules:w,model:(0,o.SU)(D).smtpData,onSubmit:n[5]||(n[5]=(0,i.iM)((()=>{}),["prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(u,{label:"SMTP服务器",prop:"smtp_server"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).smtpData.smtp_server,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.SU)(D).smtpData.smtp_server=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,{label:"SMTP服务器端口",prop:"smtp_port"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).smtpData.smtp_port,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,o.SU)(D).smtpData.smtp_port=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,{label:"SMTP用户名称",prop:"username"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).smtpData.username,"onUpdate:modelValue":n[2]||(n[2]=e=>(0,o.SU)(D).smtpData.username=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,{label:"SMTP用户密码",prop:"passwd"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).smtpData.passwd,"onUpdate:modelValue":n[3]||(n[3]=e=>(0,o.SU)(D).smtpData.passwd=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,{label:"发件人邮件地址",prop:"smtp_email"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).smtpData.smtp_email,"onUpdate:modelValue":n[4]||(n[4]=e=>(0,o.SU)(D).smtpData.smtp_email=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,null,{default:(0,m.w5)((()=>[(0,m.Wm)(b,{type:"primary",onClick:U},{default:(0,m.w5)((()=>[(0,m.Uk)("保存")])),_:1})])),_:1})])),_:1},8,["model"])]),(0,m._)("div",f,[_,(0,m.Wm)(g,{ref_key:"sendFormRef",ref:t,class:"notification-mode-form","label-position":"top",model:(0,o.SU)(D),rules:v,onSubmit:n[7]||(n[7]=(0,i.iM)((()=>{}),["prevent"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(u,{label:"邮箱地址",prop:"email"},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:(0,o.SU)(D).email,"onUpdate:modelValue":n[6]||(n[6]=e=>(0,o.SU)(D).email=e),modelModifiers:{trim:!0},placeholder:"请输入",class:"input-select",clearable:""},null,8,["modelValue"]),(0,m.Wm)(b,{class:"send-btn",type:"primary",onClick:h},{default:(0,m.w5)((()=>[(0,m.Wm)(S,{icon:"send-plane-fill"}),(0,m.Uk)(" 发送邮件 ")])),_:1})])),_:1})])),_:1},8,["model"])])])}}};function g(e){e.__source="src/views/problem/alarm-setting/Mail.vue"}"function"===typeof g&&g(b);const v=b;var w=v}}]);