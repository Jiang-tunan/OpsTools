/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[8293,7181,8743,7639,9527,657],{18907:function(e,t,a){a.d(t,{KW:function(){return i},Kj:function(){return m},Ld:function(){return r},Ob:function(){return p},Ox:function(){return u},Wh:function(){return d},XF:function(){return o},bm:function(){return s},uX:function(){return l},v0:function(){return c},y2:function(){return f}});var n=a(52806);function o(e){return(0,n.Z)({params:{method:"host.get",data:e}})}function l(e){return(0,n.Z)({params:{method:"host.exportinventory",data:e}})}function i(e){return(0,n.Z)({params:{method:"host.update",data:e}})}function r(e){return(0,n.Z)({params:{method:"host.create",data:e}})}function s(e){return(0,n.Z)({params:{method:"host.discoverupdate",data:e}})}function u(e){return(0,n.Z)({params:{method:"host.delete",data:e}})}function c(e){return(0,n.Z)({params:{method:"hostgroup.get",data:e}})}function d(e){return(0,n.Z)({params:{method:"modeltype.create",data:e}})}function p(e){return(0,n.Z)({params:{method:"modeltype.get",data:e}})}function f(e){return(0,n.Z)({params:{method:"modeltype.update",data:e}})}function m(e){return(0,n.Z)({params:{method:"modeltype.delete",data:e}})}},22076:function(e,t,a){function n(e){const t=document.documentElement.clientWidth;return t>=1440?16*e:e*Math.round(t/1440*16)}function o(e,t,a){let o=0;return o="remToPx"===a?n(t):t,e?.value?.offsetHeight?e.value.offsetHeight-o:e?.offsetHeight?e.offsetHeight-o:void 0}function l(e,t){const a=new Map;for(const n of e)a.has(n[t])||a.set(n[t],n);return[...a.values()]}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0,a="x"==e?t:3&t|8;return a.toString(16)}))}function r(e){let t=parseInt(e),a=0,n=0;return t>60&&(a=parseInt(t/60),t=parseInt(t%60),a>60&&(n=parseInt(a/60),a=parseInt(a%60))),{second:t,minute:a,hour:n}}a.d(t,{BE:function(){return i},NC:function(){return o},Nb:function(){return l},ZC:function(){return r}})},35068:function(e,t,a){a.d(t,{Z:function(){return u}});var n=a(74842),o=(a(24549),a(94851),a(66252));const l={class:"right-panel"};var i=(0,o.aZ)({__name:"VabQueryFormRightPanel",props:{span:{type:Number,default:10}},setup(e){return(t,a)=>{const i=n.Dv;return(0,o.wg)(),(0,o.j4)(i,{lg:e.span,md:24,sm:24,xl:e.span,xs:24},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o.WI)(t.$slots,"default")])])),_:3},8,["lg","xl"])}}});function r(e){e.__source="library/components/VabQueryForm/components/VabQueryFormRightPanel.vue"}"function"===typeof r&&r(i);const s=i;var u=s},48499:function(e,t,a){a.d(t,{Z:function(){return d}});var n=a(74842),o=(a(24549),a(94851),a(66252));const l={class:"top-panel"};function i(e,t){const a=n.Dv;return(0,o.wg)(),(0,o.j4)(a,{span:24},{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o.WI)(e.$slots,"default")])])),_:3})}function r(e){e.__source="library/components/VabQueryForm/components/VabQueryFormTopPanel.vue"}var s=a(83744);const u={};"function"===typeof r&&r(u);const c=(0,s.Z)(u,[["render",i]]);var d=c},58818:function(e,t,a){a.d(t,{Z:function(){return c}});var n=a(28314),o=(a(24549),a(7436),a(66252));function l(e,t){const a=n.dq;return(0,o.wg)(),(0,o.j4)(a,{class:"vab-query-form",gutter:0},{default:(0,o.w5)((()=>[(0,o.WI)(e.$slots,"default",{},void 0,!0)])),_:3})}function i(e){e.__source="library/components/VabQueryForm/index.vue"}var r=a(83744);const s={};"function"===typeof i&&i(s);const u=(0,r.Z)(s,[["render",l],["__scopeId","data-v-4d22213e"]]);var c=u},93981:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(49530),o=(a(24549),a(80773),a(21211)),l=(a(12791),a(6715),a(38492)),i=(a(94687),a(79303),a(57658),a(66252)),r=a(2262),s=a(39049),u=a(18907),c={__name:"AllocationTemplate",props:{allocationData:{type:Object,default:()=>({})},title:{type:String,default:"分配监控模板"},visible:{type:Boolean,default:!1}},emits:["cancel","confirm"],setup(e,{emit:t}){const a=e,c={name:[{required:!0,message:"请选择监控模板",trigger:"change"}]},d=((0,i.f3)("$baseMessage"),(0,r.iH)(null)),{title:p,visible:f,allocationData:m}=(0,r.BK)(a),g=(0,r.qj)({hostGroupList:[]});function h(){(0,u.v0)({output:["name","groupid"]}).then((e=>{if(!e.error)for(const t in e)if(Object.hasOwnProperty.call(e,t)){const a=e[t];g.hostGroupList.push(a)}g.loading=!1})).catch((e=>{console.log("err :>> ",e),g.loading=!1}))}function w(){t("cancel")}function v(){d.value.validate((e=>{e&&(t("cancel"),t("confirm"))}))}return(0,i.bv)((()=>{h()})),(e,t)=>{const a=l.BT,u=l.ElSelect,h=o.nH,b=o.ly,y=n.ElButton;return(0,i.wg)(),(0,i.j4)((0,r.SU)(s["default"]),{modelValue:(0,r.SU)(f),"onUpdate:modelValue":[t[1]||(t[1]=e=>(0,r.dq)(f)?f.value=e:null),w],title:(0,r.SU)(p),width:"30rem"},{footer:(0,i.w5)((()=>[(0,i.Wm)(y,{onClick:w},{default:(0,i.w5)((()=>[(0,i.Uk)("取消")])),_:1}),(0,i.Wm)(y,{type:"primary",onClick:v},{default:(0,i.w5)((()=>[(0,i.Uk)("确定")])),_:1})])),default:(0,i.w5)((()=>[(0,i.Wm)(b,{ref_key:"allocationFormRef",ref:d,"label-position":"top",model:(0,r.SU)(m),rules:c},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{label:"选择监控模板",prop:"monitoringid"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{modelValue:(0,r.SU)(m).monitoringid,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,r.SU)(m).monitoringid=e),placeholder:"请选择监控模板",class:"input-select"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,r.SU)(g).hostGroupList,(e=>((0,i.wg)(),(0,i.j4)(a,{key:e.groupid,label:e.name,value:e.groupid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}};function d(e){e.__source="src/components/AllocationTemplate.vue"}var p=a(83744);"function"===typeof d&&d(c);const f=(0,p.Z)(c,[["__scopeId","data-v-1b9009e8"]]);var m=f},5743:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(64654),o=(a(24549),a(16135),a(91067)),l=(a(78526),a(47546)),i=(a(49653),a(37965)),r=(a(82880),a(60717),a(66252)),s=a(3577),u=a(2262),c={__name:"CustomTable",props:{columnList:{type:Array,default:()=>[]},listData:{type:Array,default:()=>[]},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},total:{type:Number,default:0},pageNo:{type:Number,default:0},pageSize:{type:Number,default:20},maxHeight:{type:[String,Number],default:"auto"},className:{type:String,default:""},idkey:{type:String,default:""},listLoading:{type:Boolean,default:!0},isIndex:{type:Boolean,default:!1},isSelection:{type:Boolean,default:!0},isPagination:{type:Boolean,default:!0},stripe:{type:Boolean,default:!0},spanMethod:{type:Function,default:()=>{}}},emits:["sizeChange","currentChange","selectRows","sortChange","spanMethod"],setup(e,{expose:t,emit:a}){const c=(0,u.iH)(null),d=e=>{a("sizeChange",e)},p=e=>{a("currentChange",e)},f=e=>{a("selectRows",e)},m=e=>{a("sortChange",e)};function g(e){e&&(console.log("row :>> ",e),c.value.toggleRowSelection(e))}return(0,r.dl)((()=>{c?.value?.doLayout()})),(0,r.bv)((()=>{c.value.doLayout()})),t({tableRef:c,toggleRowSelection:g}),(t,a)=>{const u=l.$Y,g=i.GT,h=l.eI,w=o.R,v=n.t;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)(((0,r.wg)(),(0,r.j4)(h,{ref_key:"tableRef",ref:c,class:(0,s.C_)(["custom-table",e.className]),data:e.listData,border:!0,"row-key":e.idkey,"max-height":e.maxHeight,"span-method":e.spanMethod,stripe:e.stripe,onSelectionChange:f,onSortChange:m},{empty:(0,r.w5)((()=>[(0,r.Wm)(g,{description:"暂无数据"})])),default:(0,r.w5)((()=>[e.isSelection?((0,r.wg)(),(0,r.j4)(u,{key:0,fixed:"left",type:"selection",width:"55"})):(0,r.kq)("",!0),e.isIndex?((0,r.wg)(),(0,r.j4)(u,{key:1,fixed:"left",label:"序号",type:"index",width:"55"})):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columnList,(e=>((0,r.wg)(),(0,r.j4)(u,{key:e.prop,label:e.label,prop:e.prop,"show-overflow-tooltip":e.tooltip,"class-name":"operation"===e.prop?"operation-btns "+e.className:e.className,align:e.align?e.align:"left",sortable:e.sortable,width:e.width,"min-width":e.minWidth,fixed:"true"==e.fixed||"right"==e.fixed&&"right"},(0,r.Nv)({_:2},[e.isHeaderRender?{name:"header",fn:(0,r.w5)((()=>[(0,r.WI)(t.$slots,e.prop+"Header",{column:e})])),key:"0"}:void 0,e.isRender?{name:"default",fn:(0,r.w5)((({row:a,$index:n,column:o})=>[(0,r.WI)(t.$slots,e.prop,{row:a,index:n,column:o})])),key:"1"}:{name:"default",fn:(0,r.w5)((({row:t})=>[(0,r._)("span",{class:"name"},(0,s.zw)(t[e.prop]||"---"),1)])),key:"2"}]),1032,["label","prop","show-overflow-tooltip","class-name","align","sortable","width","min-width","fixed"])))),128))])),_:3},8,["class","data","row-key","max-height","span-method","stripe"])),[[v,e.listLoading]]),e.isPagination?((0,r.wg)(),(0,r.j4)(w,{key:0,"current-page":e.pageNo,layout:e.layout,"page-size":e.pageSize,total:e.total,onCurrentChange:p,onSizeChange:d},null,8,["current-page","layout","page-size","total"])):(0,r.kq)("",!0)],64)}}};function d(e){e.__source="src/components/CustomTable.vue"}var p=a(83744);"function"===typeof d&&d(c);const f=(0,p.Z)(c,[["__scopeId","data-v-bdd84b16"]]);var m=f},57873:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var n=a(16652),o=(a(24549),a(38602),a(66252)),l=a(2262),i=a(3577),r=a(5743);const s=e=>((0,o.dD)("data-v-ed649eb2"),e=e(),(0,o.Cn)(),e),u={class:"interfaces-log-container"},c=s((()=>(0,o._)("div",{class:"interfaces-log-title"},[(0,o._)("span",{class:"title"},"协议状态")],-1)));var d={__name:"ProtocalItem",props:{interfacesData:{type:Object,default:()=>[]}},setup(e){const t=e,a=[{prop:"ip",label:"接口",tooltip:!0,width:"180"},{prop:"available",label:"状态",isRender:!0},{prop:"errors_from",label:"错误",isRender:!0}],s={1:"AGENT",2:"SNMP",3:"IPMI",4:"JMX"},{interfacesData:d}=(0,l.BK)(t);return(e,t)=>{const p=n.$t;return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,l.SU)(d),((e,t)=>((0,o.wg)(),(0,o.j4)(p,{key:t,width:"35rem",trigger:"hover","show-arrow":!1,"popper-class":"interfaces-log-popover"},{reference:(0,o.w5)((()=>[(0,o._)("span",{class:(0,i.C_)(["interfaces-column","interfaces-"+e.available])},(0,i.zw)(s[e.type]),3)])),default:(0,o.w5)((()=>[(0,o._)("div",u,[c,e.interfaceid?((0,o.wg)(),(0,o.j4)(r["default"],{key:0,"list-data":[e],"column-list":a,"is-pagination":!1,"is-selection":!1,"list-loading":!1},{available:(0,o.w5)((({row:e})=>[(0,o._)("span",{class:(0,i.C_)(["available-column","available-"+e.available])},(0,i.zw)("0"===e.available?"无数据":"1"===e.available?"启用中":"不可用"),3)])),errors_from:(0,o.w5)((({row:e})=>[(0,o._)("span",{class:(0,i.C_)({"error-info":!!e.errors_from})},(0,i.zw)(e?e?.errors_from:"---"),3)])),_:2},1032,["list-data"])):(0,o.kq)("",!0)])])),_:2},1024)))),128)}}};function p(e){e.__source="src/components/ProtocalItem.vue"}var f=a(83744);"function"===typeof p&&p(d);const m=(0,f.Z)(d,[["__scopeId","data-v-ed649eb2"]]);var g=m},82578:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var n=a(58818),o=a(35068),l=a(49530),i=(a(24549),a(80773),a(48499)),r=a(21211),s=(a(12791),a(57847)),u=(a(43872),a(6715),a(38492)),c=(a(94687),a(79303),a(57658),a(66252)),d=a(2262),p=a(49963),f=a(3577),m=a(5743),g=a(22076),h=a(18907),w=a(93981),v=a(57873),b=a(22201);const y=["onClick"];var _={__name:"index",setup(e){const t=(0,c.RC)((()=>Promise.all([a.e(4951),a.e(4012)]).then(a.bind(a,24951)))),_=(0,b.tv)(),x=(0,d.iH)(null),k=(0,c.f3)("$baseTableHeight"),S=((0,c.f3)("$baseConfirm"),(0,c.f3)("$baseMessage"),(0,d.iH)([{groupid:"-1",name:"全部设备类型"}])),C={0:"启用中",1:"已停用",2:"未纳管"},U=(0,d.iH)({output:["hostid","name","ip","status","interfaces","problems","items"],selectGroups:["name"],selectInterfaces:"extend",selectProblem:!0,selectItems:"count",search:{name:""}}),D=(0,d.qj)({listLoading:!0,equipmentData:[],selectRows:[],total:0,height:k(3)-30,configData:{type:"new",visible:!1,data:{}},allocationData:{visible:!1,data:{monitoringid:""}}}),W=(0,d.iH)(null),I=[{label:"设备名称",prop:"name",tooltip:!0,minWidth:"200"},{label:"IP地址",prop:"ip",tooltip:!0,width:"150"},{label:"监控状态",prop:"status",tooltip:!0,isRender:!0,width:"150"},{label:"监控来源",prop:"interfaces",tooltip:!0,isRender:!0,width:"270"},{label:"设备告警",prop:"problems",tooltip:!0,isRender:!0,width:"150"},{label:"监控图表",prop:"items",isRender:!0,tooltip:!0,width:"150"},{label:"设备类型",prop:"groups",tooltip:!0,isRender:!0,width:"200"},{align:"right",fixed:"right",label:"操作",tooltip:!0,width:"200",prop:"operation",isRender:!0}],R=e=>{D.selectRows=e},Z=()=>{D.height=(0,g.NC)(W,4.5+1/3+.75+2,"remToPx")},j=e=>{U.value.pageSize=e,z()},q=e=>{U.value.pageNo=e,z()},H=()=>{U.value.groupids||(U.value.groupids=null),U.value.pageNo=1,z()};function z(){D.listLoading=!0,(0,h.XF)(U.value).then((e=>{e.error||(D.equipmentData=e,D.total=Number(e[0].total||"0")),D.listLoading=!1})).catch((e=>{console.log(e),D.listLoading=!1}))}function N(){(0,h.v0)({}).then((e=>{S.value.push(...e)})).catch((e=>{console.log("error :>> ",e)}))}function V(){D.configData={type:"new",visible:!0,title:"新增设备",data:{}}}function L(e){D.configData={type:"edit",title:"编辑设备",visible:!0,data:{hostid:e.hostid}}}function $(){D.configData.visible=!1}function P(e,t){const a={hostid:e.hostid,name:e.name};t&&(a.tab=t),_.push({name:"DeviceMonitoringInfo",query:a})}function B(e){D.allocationData={visible:!0,data:{discoverData:{hostid:e.hostid,name:e.name,groupid:e.groupid},monitoringid:""}}}function M(){D.allocationData.visible=!1}function T(){(0,h.bm)([{hostid:D.allocationData.data.discoverData.hostid,groupid:D.allocationData.data.monitoringid}]).then((e=>{e.error||z()})).catch((e=>{console.log("error :>> ",e)}))}return(0,c.wF)((()=>{window.addEventListener("resize",Z)})),(0,c.Ah)((()=>{window.removeEventListener("resize",Z)})),(0,c.bv)((()=>{z(),N(),Z()})),(e,a)=>{const g=u.BT,h=u.ElSelect,b=r.nH,_=s.EZ,k=r.ly,Z=i.Z,N=l.ElButton,F=o.Z,E=n.Z;return(0,c.wg)(),(0,c.iD)("div",{ref_key:"deviceRef",ref:W,class:"equipment-device-container"},[(0,c.Wm)(E,null,{default:(0,c.w5)((()=>[(0,c.Wm)(Z,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)(k,{class:"query-info-form",inline:"","label-width":"0px",model:(0,d.SU)(U).search,onSubmit:a[2]||(a[2]=(0,p.iM)((()=>{}),["prevent"]))},{default:(0,c.w5)((()=>[(0,c.Wm)(b,{label:"",class:"form-status"},{default:(0,c.w5)((()=>[(0,c.Wm)(h,{modelValue:(0,d.SU)(D).groupids,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,d.SU)(D).groupids=e),placeholder:"全部设备类型",clearable:"",filterable:"",onChange:H},{default:(0,c.w5)((()=>[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)((0,d.SU)(S),(e=>((0,c.wg)(),(0,c.j4)(g,{key:e.groupid,label:e.name,value:e.groupid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.Wm)(b,{label:"",class:"form-name"},{default:(0,c.w5)((()=>[(0,c.Wm)(_,{modelValue:(0,d.SU)(U).search.name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,d.SU)(U).search.name=e),placeholder:"请输入主机名称搜索",onChange:H},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,c.Wm)(F,{span:12},{default:(0,c.w5)((()=>[(0,c.Wm)(N,{type:"primary",disabled:!(0,d.SU)(D).equipmentData.length,onClick:V},{default:(0,c.w5)((()=>[(0,c.Uk)(" 新增设备 ")])),_:1},8,["disabled"])])),_:1})])),_:1}),(0,c.Wm)(m["default"],{ref_key:"equipmentTableRef",ref:x,"max-height":(0,d.SU)(D).height,"class-name":"equipment-table","list-loading":(0,d.SU)(D).listLoading,"list-data":(0,d.SU)(D).equipmentData,"column-list":I,"is-index":!0,total:(0,d.SU)(D).total,onSizeChange:j,onCurrentChange:q,onSelectRows:R},{status:(0,c.w5)((({row:e})=>[(0,c._)("span",{class:(0,f.C_)("status-"+e.status)},(0,f.zw)(C[e.status]||"---"),3)])),interfaces:(0,c.w5)((({row:t})=>[t?.interfaces?.length?(0,c.WI)(e.$slots,"default",{key:0},(()=>[(0,c.Wm)(v["default"],{"interfaces-data":t.interfaces},null,8,["interfaces-data"])])):(0,c.WI)(e.$slots,"default",{key:1},(()=>[(0,c.Uk)("---")]))])),problems:(0,c.w5)((({row:e})=>[(0,c._)("span",{class:(0,f.C_)("problems-"+(e?.problems?"num":"0"))}," 告警 "+(0,f.zw)(e?.problems||"0"),3)])),items:(0,c.w5)((({row:e})=>[(0,c._)("span",{class:(0,f.C_)("items-"+("0"!==e?.items?"num":"0")),onClick:t=>P(e,"monitor-chart")}," 图表 "+(0,f.zw)(e?.items||"0"),11,y)])),groups:(0,c.w5)((({row:e})=>[(0,c.Uk)((0,f.zw)(e?.groups?.length?e?.groups.map((e=>e.name)).join("，"):"---"),1)])),operation:(0,c.w5)((({row:t})=>["2"!==t.status?(0,c.WI)(e.$slots,"default",{key:0},(()=>[(0,c.Wm)(N,{text:"",type:"primary",onClick:e=>L(t)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 编辑 ")])),_:2},1032,["onClick"]),(0,c.Wm)(N,{text:"",type:"primary",onClick:e=>P(t)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 详情 ")])),_:2},1032,["onClick"])])):(0,c.WI)(e.$slots,"default",{key:1},(()=>[(0,c.Wm)(N,{text:"",type:"primary",onClick:e=>B(t)},{default:(0,c.w5)((()=>[(0,c.Uk)(" 纳管 ")])),_:2},1032,["onClick"])]))])),_:3},8,["max-height","list-loading","list-data","total"]),(0,d.SU)(D).configData.visible?((0,c.wg)(),(0,c.j4)((0,d.SU)(t),{key:0,"config-data":(0,d.SU)(D).configData.data,visible:(0,d.SU)(D).configData.visible,title:(0,d.SU)(D).configData.title,type:(0,d.SU)(D).configData.type,onCancel:$,onConfirm:z},null,8,["config-data","visible","title","type"])):(0,c.kq)("",!0),(0,d.SU)(D).allocationData.visible?((0,c.wg)(),(0,c.j4)(w["default"],{key:1,"allocation-data":(0,d.SU)(D).allocationData.data,visible:(0,d.SU)(D).allocationData.visible,onCancel:M,onConfirm:T},null,8,["allocation-data","visible"])):(0,c.kq)("",!0)],512)}}};function x(e){e.__source="src/views/monitoring-center/equipment-monitoring/index.vue"}var k=a(83744);"function"===typeof x&&x(_);const S=(0,k.Z)(_,[["__scopeId","data-v-c280d16c"]]);var C=S}}]);