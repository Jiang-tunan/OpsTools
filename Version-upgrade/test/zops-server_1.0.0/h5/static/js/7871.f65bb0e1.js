/*!
 *  build: Vue  Admin Plus
 *  copyright: vue-admin-beautiful.com
 *  time: 2023-08-28 11:15:16
 */
"use strict";(self["webpackChunkadmin_plus"]=self["webpackChunkadmin_plus"]||[]).push([[7871],{26989:function(e,a,l){l.r(a),l.d(a,{default:function(){return E}});var o=l(28314),n=(l(24549),l(7436),l(65907)),t=(l(21276),l(8734)),s=(l(7553),l(60422)),r=(l(77812),l(74842)),u=(l(94851),l(21211)),d=(l(12791),l(49530)),m=(l(80773),l(6715),l(57847)),i=(l(43872),l(66252)),c=l(2262),f=l(30582),p=l(12688),b=l(25498),v=l(7605),_=l(47720);const w=e=>((0,i.dD)("data-v-5577ee9e"),e=e(),(0,i.Cn)(),e),I={class:"base-setup-container"},h=w((()=>(0,i._)("div",{class:"base-setup-title"},"基本设置",-1))),g=w((()=>(0,i._)("label",{class:"avatar-title"},"头像",-1))),W={class:"avatar-content"},U=w((()=>(0,i._)("span",{class:"avatar-btn"},"更换头像",-1)));var S={__name:"BaseSetup",setup(e){const a=(0,f.L)(),{userdata:l}=(0,_.Jk)(a),w=(0,c.iH)(null),S=(0,i.f3)("$baseMessage"),V=(e,a,l)=>{a?(0,b.Jh)(a)?l():l(new Error((0,v.Iu)("请输入正确邮箱"))):l()},k=(e,a,l)=>{a?(0,b.K9)(a)?l():l(new Error((0,v.Iu)("请输入正确用户名"))):l(new Error((0,v.Iu)("请输入用户名")))},y=(e,a,l)=>{a?(0,b.Mn)(a)?l():l(new Error((0,v.Iu)("请输入正确的手机号码"))):l()},E={username:[{validator:k,trigger:"blur"}],email:[{validator:V,trigger:"blur"}],phone:[{validator:y,trigger:"blur"}]},x=(0,c.qj)({baseInfo:{}});function C(){(0,p.lE)({userids:[l.value.userid]}).then((e=>{e.error||(x.baseInfo=e[0])})).catch((e=>{console.log("err :>> ",e),x.loading=!1}))}function D(){w.value.validate((e=>{e&&("data:image"===x.baseInfo.avatar.slice(0,10)?(0,p._5)({basecode:x.baseInfo.avatar}).then((e=>{e.error?S("上传头像失败","error"):q(e),console.log("data :>> ",e)})):q(x.baseInfo.avatar))}))}function q(e){const a={userid:x.baseInfo.userid||"",email:x.baseInfo.email||"",avatar:e||"",phone:x.baseInfo.phone||"",memo:x.baseInfo.memo||""};(0,p.Nq)(a).then((e=>{e.error||S("用户信息更新成功","success"),console.log("data :>> ",e)})).catch((()=>{}))}function B(e,a){const l=new FileReader;l.readAsDataURL(e),l.onload=()=>{const e={status:!0,data:l.result};a(e)},l.onerror=function(){const e={status:!1,data:l.error};a(e)}}function L(e){B(e,(e=>{e.status?x.baseInfo.avatar=e.data:console.log("file转化base64失败---",e.data)}))}return(0,i.bv)((()=>{C()})),(e,a)=>{const l=m.EZ,f=u.nH,p=d.ElButton,b=u.ly,v=r.Dv,_=s.vs,S=(0,i.up)("Upload"),V=t.gn,k=n.LW,y=o.dq;return(0,i.wg)(),(0,i.iD)("div",I,[h,(0,i.Wm)(y,{class:"base-setup-content"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{span:5},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{ref_key:"baseSetupRef",ref:w,model:(0,c.SU)(x).baseInfo,"label-width":"80px",inline:!1,"label-position":"top",rules:E},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"用户名",prop:"username"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,c.SU)(x).baseInfo.username,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,c.SU)(x).baseInfo.username=e),placeholder:"请输入",maxlength:"100"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(f,{label:"邮箱",prop:"email"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,c.SU)(x).baseInfo.email,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,c.SU)(x).baseInfo.email=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(f,{label:"手机",prop:"phone"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,c.SU)(x).baseInfo.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,c.SU)(x).baseInfo.phone=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(f,{label:"备注",prop:"memo"},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{modelValue:(0,c.SU)(x).baseInfo.memo,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,c.SU)(x).baseInfo.memo=e),type:"textarea",placeholder:"请输入",maxlength:"255",rows:3},null,8,["modelValue"])])),_:1}),(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"primary",onClick:D},{default:(0,i.w5)((()=>[(0,i.Uk)("提交")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1}),(0,i.Wm)(v,{span:2}),(0,i.Wm)(v,{class:"avatar-container",span:4},{default:(0,i.w5)((()=>[g,(0,i._)("div",W,[(0,i.Wm)(_,{class:"avatar-iamge",src:(0,c.SU)(x).baseInfo.avatar},null,8,["src"]),(0,i.Wm)(k,{class:"avatar-uploader",action:"#",limit:1,"show-file-list":!1,"before-upload":L},{trigger:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(V,null,{default:(0,i.w5)((()=>[(0,i.Wm)(S)])),_:1}),U])),_:1})])),_:1})])])),_:1})])),_:1})])}}};function V(e){e.__source="src/views/system/system-setting/BaseSetup.vue"}var k=l(83744);"function"===typeof V&&V(S);const y=(0,k.Z)(S,[["__scopeId","data-v-5577ee9e"]]);var E=y}}]);